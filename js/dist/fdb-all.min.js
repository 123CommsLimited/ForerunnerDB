!function(Pa){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=Pa();else if("function"==typeof define&&define.amd)define([],Pa);else{var h;"undefined"!=typeof window?h=window:"undefined"!=typeof global?h=global:"undefined"!=typeof self&&(h=self);h.ForerunnerDB=Pa()}}(function(){return function h(p,l,e){function b(d,c){if(!l[d]){if(!p[d]){var g="function"==typeof require&&require;if(!c&&g)return g(d,!0);if(a)return a(d,!0);g=Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",
g;}g=l[d]={exports:{}};p[d][0].call(g.exports,function(f){var n=p[d][1][f];return b(n?n:f)},g,g.exports,h,p,l,e)}return l[d].exports}for(var a="function"==typeof require&&require,c=0;c<e.length;c++)b(e[c]);return b}({1:[function(h,p,l){l=h("../lib/Core");h("../lib/CollectionGroup");h("../lib/View");h("../lib/Highcharts");h("../lib/Persist");h("../lib/Overview");h("../lib/vendor/jsviews");p.exports=l},{"../lib/CollectionGroup":3,"../lib/Core":4,"../lib/Highcharts":6,"../lib/Overview":12,"../lib/Persist":14,
"../lib/View":16,"../lib/vendor/jsviews":17}],2:[function(h,p,l){var e,b,a,c,d,k;e=h("./Shared");var g=function(f){this.init.apply(this,arguments)};g.prototype.init=function(f){this._primaryKey="_id";this._primaryIndex=new a("primary");this._primaryCrc=new a("primaryCrc");this._crcLookup=new a("crcLookup");this._name=f;this._data=[];this._groups=[];this._metrics=new b;this._linked=0;this._debug={};this._deferQueue={insert:[],update:[],remove:[],upsert:[]};this._deferThreshold={insert:100,update:100,
remove:100,upsert:100};this._deferTime={insert:1,update:1,remove:1,upsert:1};this._subsetOf(this)};e.addModule("Collection",g);e.inherit(g.prototype,e.chainSystem);l=h("./Overload");b=h("./Metrics");a=h("./KeyValueStore");c=h("./Path");d=h("./Index");k=h("./Crc");h=e.modules.Core;g.prototype.debug=new l([function(){return this._debug.all},function(f){return void 0!==f?"boolean"===typeof f?(this._debug.all=f,this.chainSend("debug",this._debug),this):this._debug[f]||this._db&&this._db._debug&&this._db._debug[f]||
this._debug.all:this._debug.all},function(f,n){return void 0!==f?void 0!==n?(this._debug[f]=n,this.chainSend("debug",this._debug),this):this._debug[f]||this._db&&this._db._debug&&this._db._debug[f]:this._debug.all}]);g.prototype.crc=k;g.prototype.name=function(f){return void 0!==f?(this._name=f,this):this._name};g.prototype.on=new l([function(f,n){this._listeners=this._listeners||{};this._listeners[f]=this._listeners[f]||{};this._listeners[f]["*"]=this._listeners[f]["*"]||[];this._listeners[f]["*"].push(n);
return this},function(f,n,d){this._listeners=this._listeners||{};this._listeners[f]=this._listeners[f]||{};this._listeners[f][n]=this._listeners[f][n]||[];this._listeners[f][n].push(d);return this}]);g.prototype.off=new l([function(f){this._listeners&&this._listeners[f]&&f in this._listeners&&delete this._listeners[f];return this},function(f,n){var d,c;"string"===typeof n?this._listeners&&this._listeners[f]&&this._listeners[f][n]&&delete this._listeners[f][n]:f in this._listeners&&(d=this._listeners[f]["*"],
c=d.indexOf(n),-1<c&&d.splice(c,1));return this},function(f,n,d){this._listeners&&f in this._listeners&&(f=this._listeners[f][n],d=f.indexOf(d),-1<d&&f.splice(d,1))}]);g.prototype.emit=function(f,n){this._listeners=this._listeners||{};if(f in this._listeners){if(this._listeners[f]["*"]){var d=this._listeners[f]["*"],c=d.length,a;for(a=0;a<c;a++)d[a].apply(this,Array.prototype.slice.call(arguments,1))}if(n instanceof Array&&n[0]&&n[0][this._primaryKey]){var d=this._listeners[f],b,g,c=n.length;for(a=
0;a<c;a++)if(d[n[a][this._primaryKey]])for(b=d[n[a][this._primaryKey]].length,g=0;g<b;g++)d[n[a][this._primaryKey]][g].apply(this,Array.prototype.slice.call(arguments,1))}}return this};g.prototype.drop=function(){if(this._db&&this._name){this.debug()&&console.log("Dropping collection "+this._name);this.emit("drop");delete this._db._collection[this._name];var f=[],n;for(n=0;n<this._groups.length;n++)f.push(this._groups[n]);for(n=0;n<f.length;n++)this._groups[n].removeCollection(this);return!0}return!1};
g.prototype.primaryKey=function(f){return void 0!==f?(this._primaryKey=f,this._primaryIndex.primaryKey(f),this._rebuildPrimaryKeyIndex(),this):this._primaryKey};g.prototype._onInsert=function(f,n){this.emit("insert",f,n)};g.prototype._onUpdate=function(f){this.emit("update",f)};g.prototype._onRemove=function(f){this.emit("remove",f)};g.prototype.db=function(f){return void 0!==f?(this._db=f,this):this._db};g.prototype.setData=function(f,n,d){if(f){var c=this._metrics.create("setData");c.start();n=
n||{};n.$decouple=void 0!==n.$decouple?n.$decouple:!0;n.$decouple&&(f=this.decouple(f));f instanceof Array||(f=[f]);c.time("transformIn");f=this.transformIn(f);c.time("transformIn");var a=this._data;this._linked?this.remove():this._data=[];f.length&&(this._linked?this.insert(f):this._data=this._data.concat(f));c.time("Rebuild Primary Key Index");this._rebuildPrimaryKeyIndex(n);c.time("Rebuild Primary Key Index");c.time("Resolve chains");this.chainSend("setData",f,{oldData:a});c.time("Resolve chains");
c.stop();this.emit("setData",this._data,a)}d&&d(!1);return this};g.prototype._rebuildPrimaryKeyIndex=function(f){var n=f&&void 0!==f.ensureKeys?f.ensureKeys:!0;f=f&&void 0!==f.violationCheck?f.violationCheck:!0;var d,c,a,b=this._primaryIndex,g=this._primaryCrc,k=this._crcLookup,e=this._primaryKey,h;b.truncate();g.truncate();k.truncate();d=this._data;for(c=d.length;c--;)if(a=d[c],n&&this._ensurePrimaryKey(a),f){if(!b.uniqueSet(a[e],a))throw"Call to setData failed because your data violates the primary key unique constraint. One or more documents are using the same primary key: "+
a[this._primaryKey];}else h=JSON.stringify(a),b.set(a[e],a),g.set(a[e],h),k.set(h,a)};g.prototype._ensurePrimaryKey=function(f){void 0===f[this._primaryKey]&&(f[this._primaryKey]=this.objectId())};g.prototype.truncate=function(){this.emit("truncate",this._data);this._data.length=0;this.deferEmit("change");return this};g.prototype.upsert=function(f,n){if(f){var d=this._deferQueue.upsert,c=this._deferThreshold.upsert,a={},b;if(f instanceof Array){if(f.length>c){this._deferQueue.upsert=d.concat(f);this.processQueue("upsert",
n);return}a=[];for(d=0;d<f.length;d++)a.push(this.upsert(f[d]));n&&n();return a}f[this._primaryKey]?(b={},b[this._primaryKey]=f[this._primaryKey],this.count(b)?a.op="update":a.op="insert"):a.op="insert";switch(a.op){case "insert":a.result=this.insert(f);break;case "update":a.result=this.update(b,f)}return a}n&&n()};g.prototype.update=function(f,n,d){n=this.decouple(n);n=this.transformIn(n);this.debug()&&console.log('Updating some collection data for collection "'+this.name()+'"');var a=this,c=this._metrics.create("update"),
b=this._primaryKey,g,k,e=function(c){if(n&&void 0!==n[b]&&n[b]!=c[b]){a._primaryIndex.unSet(c[b]);var g=a._updateObject(c,n,f,d,"");if(a._primaryIndex.uniqueSet(c[b],c))return g;throw"Primary key violation in update! Key violated: "+c[b];}return a._updateObject(c,n,f,d,"")};c.start();c.time("Retrieve documents to update");g=this.find(f,{$decouple:!1});c.time("Retrieve documents to update");g.length&&(c.time("Update documents"),k=g.filter(e),c.time("Update documents"),k.length&&(c.time("Resolve chains"),
this.chainSend("update",{query:f,update:n},d),c.time("Resolve chains"),this._onUpdate(k),this.deferEmit("change",{type:"update",data:k})));c.stop();return k||[]};g.prototype.updateById=function(f,n){var c={};c[this._primaryKey]=f;return this.update(c,n)};g.prototype._updateObject=function(f,n,d,a,b,g){n=this.decouple(n);b=b||"";"."===b.substr(0,1)&&(b=b.substr(1,b.length-1));var k=!1,e=!1,h,l,q,m;for(m in n)if(n.hasOwnProperty(m)){h=!1;if("$"===m.substr(0,1))switch(m){case "$index":break;default:h=
!0,(e=this._updateObject(f,n[m],d,a,b,m))&&(k=!0)}if(this._isPositionalKey(m)&&(h=!0,m=m.substr(0,m.length-2),e=new c(b+"."+m),f[m]&&f[m]instanceof Array&&f[m].length)){l=[];for(q=0;q<f[m].length;q++)this._match(f[m][q],e.value(d)[0])&&l.push(q);for(q=0;q<l.length;q++)(e=this._updateObject(f[m][l[q]],n[m+".$"],d,a,b+"."+m,g))&&(k=!0)}if(!h)if(g||"object"!==typeof n[m])switch(g){case "$inc":this._updateIncrement(f,m,n[m]);k=!0;break;case "$push":void 0===f[m]&&(f[m]=[]);if(f[m]instanceof Array){if(void 0!==
n[m].$position&&n[m].$each instanceof Array)for(e=n[m].$position,h=n[m].$each.length,q=0;q<h;q++)this._updateSplicePush(f[m],e+q,n[m].$each[q]);else if(n[m].$each instanceof Array)for(h=n[m].$each.length,q=0;q<h;q++)this._updatePush(f[m],n[m].$each[q]);else this._updatePush(f[m],n[m]);k=!0}else throw"Cannot push to a key that is not an array! ("+m+")";break;case "$pull":if(f[m]instanceof Array){l=[];for(q=0;q<f[m].length;q++)this._match(f[m][q],n[m])&&l.push(q);for(h=l.length;h--;)this._updatePull(f[m],
l[h]),k=!0}break;case "$pullAll":if(f[m]instanceof Array)if(n[m]instanceof Array){if(l=f[m],h=l.length,0<h)for(;h--;){for(e=0;e<n[m].length;e++)l[h]===n[m][e]&&(this._updatePull(f[m],h),h--,k=!0);if(0>h)break}}else throw"Cannot pullAll without being given an array of values to pull! ("+m+")";break;case "$addToSet":void 0===f[m]&&(f[m]=[]);if(f[m]instanceof Array){q=f[m];var r;l=q.length;var p;h=!0;r=a&&a.$addToSet;var V;r&&r.key?(e=!1,V=new c(r.key),p=V.value(n[m])[0]):(p=JSON.stringify(n[m]),e=!0);
for(r=0;r<l;r++)if(e){if(JSON.stringify(q[r])===p){h=!1;break}}else if(p===V.value(q[r])[0]){h=!1;break}h&&(this._updatePush(f[m],n[m]),k=!0)}else throw"Cannot addToSet on a key that is not an array! (undefined)!";break;case "$splicePush":void 0===f[m]&&(f[m]=[]);if(f[m]instanceof Array)if(e=n.$index,void 0!==e)delete n.$index,this._updateSplicePush(f[m],e,n[m]),k=!0;else throw"Cannot splicePush without a $index integer value!";else throw"Cannot splicePush with a key that is not an array! ("+m+")";
break;case "$move":if(f[m]instanceof Array)for(q=0;q<f[m].length;q++){if(this._match(f[m][q],n[m])){k=n[m].$index;if(void 0!==k)this._updateSpliceMove(f[m],q,k),k=!0;else throw"Cannot move without a $index integer value!";break}}else throw"Cannot move on a key that is not an array! ("+m+")";break;case "$mul":this._updateMultiply(f,m,n[m]);k=!0;break;case "$rename":this._updateRename(f,m,n[m]);k=!0;break;case "$unset":this._updateUnset(f,m);k=!0;break;case "$pop":if(f[m]instanceof Array)this._updatePop(f[m],
n[m])&&(k=!0);else throw"Cannot pop from a key that is not an array! ("+m+")";break;default:f[m]!==n[m]&&(this._updateProperty(f,m,n[m]),k=!0)}else if(null!==f[m]&&"object"===typeof f[m])if(q=f[m]instanceof Array,l=n[m]instanceof Array,q||l)if(!l&&q)for(q=0;q<f[m].length;q++)(e=this._updateObject(f[m][q],n[m],d,a,b+"."+m,g))&&(k=!0);else f[m]!==n[m]&&(this._updateProperty(f,m,n[m]),k=!0);else(e=this._updateObject(f[m],n[m],d,a,b+"."+m,g))&&(k=!0);else f[m]!==n[m]&&(this._updateProperty(f,m,n[m]),
k=!0)}return k};g.prototype._isPositionalKey=function(f){return".$"===f.substr(f.length-2,2)};g.prototype._updateProperty=function(f,n,d){this._linked?(jQuery.observable(f).setProperty(n,d),this.debug()&&console.log('ForerunnerDB.Collection: Setting data-bound document property "'+n+'" for collection "'+this.name()+'"')):(f[n]=d,this.debug()&&console.log('ForerunnerDB.Collection: Setting non-data-bound document property "'+n+'" for collection "'+this.name()+'"'))};g.prototype._updateIncrement=function(f,
n,d){this._linked?jQuery.observable(f).setProperty(n,f[n]+d):f[n]+=d};g.prototype._updateSpliceMove=function(f,n,d){this._linked?(jQuery.observable(f).move(n,d),this.debug()&&console.log('ForerunnerDB.Collection: Moving data-bound document array index from "'+n+'" to "'+d+'" for collection "'+this.name()+'"')):(f.splice(d,0,f.splice(n,1)[0]),this.debug()&&console.log('ForerunnerDB.Collection: Moving non-data-bound document array index from "'+n+'" to "'+d+'" for collection "'+this.name()+'"'))};g.prototype._updateSplicePush=
function(f,d,c){f.length>d?this._linked?jQuery.observable(f).insert(d,c):f.splice(d,0,c):this._linked?jQuery.observable(f).insert(c):f.push(c)};g.prototype._updatePush=function(f,d){this._linked?jQuery.observable(f).insert(d):f.push(d)};g.prototype._updatePull=function(f,d){this._linked?jQuery.observable(f).remove(d):f.splice(d,1)};g.prototype._updateMultiply=function(f,d,c){this._linked?jQuery.observable(f).setProperty(d,f[d]*c):f[d]*=c};g.prototype._updateRename=function(f,d,c){var a=f[d];this._linked?
(jQuery.observable(f).setProperty(c,a),jQuery.observable(f).removeProperty(d)):(f[c]=a,delete f[d])};g.prototype._updateUnset=function(f,d){this._linked?jQuery.observable(f).removeProperty(d):delete f[d]};g.prototype._updatePop=function(f,d){var c,a=!1;0<f.length&&(this._linked?(1===d?c=f.length-1:-1===d&&(c=0),-1<c&&(jQuery.observable(arr).remove(c),a=!0)):1===d?(f.pop(),a=!0):-1===d&&(f.shift(),a=!0));return a};g.prototype.remove=function(f,d,c){var a,b;if(f instanceof Array){b=[];for(c=0;c<f.length;c++)b.push(this.remove(f[c],
{noEmit:!0}));(!d||d&&!d.noEmit)&&this._onRemove(b);return b}c=this.find(f,{$decouple:!1});if(c.length){for(b=0;b<c.length;b++)a=c[b],this._removeIndex(a),a=this._data.indexOf(a),this._linked?jQuery.observable(this._data).remove(a):this._data.splice(a,1);this.chainSend("remove",{query:f},d);(!d||d&&!d.noEmit)&&this._onRemove(c);this.deferEmit("change",{type:"remove",data:c})}return c};g.prototype.removeById=function(f){var d={};d[this._primaryKey]=f;return this.remove(d)};g.prototype.deferEmit=function(){var f=
this,d;this._noEmitDefer||this._db&&(!this._db||this._db._noEmitDefer)?this.emit.apply(this,arguments):(d=arguments,this._changeTimeout&&clearTimeout(this._changeTimeout),this._changeTimeout=setTimeout(function(){f.debug()&&console.log("ForerunnerDB.Collection: Emitting "+d[0]);f.emit.apply(f,d)},100))};g.prototype.processQueue=function(f,d){var c=this._deferQueue[f],a=this._deferThreshold[f],b=this._deferTime[f];if(c.length){var g=this;c.length&&(c=c.length>a?c.splice(0,a):c.splice(0,c.length),this[f](c));
setTimeout(function(){g.processQueue(f,d)},b)}else d&&d()};g.prototype.insert=function(f,d,c){"function"===typeof d?(c=d,d=this._data.length):void 0===d&&(d=this._data.length);f=this.transformIn(f);return this._insertHandle(f,d,c)};g.prototype._insertHandle=function(f,d,c){var a=this._deferQueue.insert,b=this._deferThreshold.insert,g=[],k=[];if(f instanceof Array){if(f.length>b){this._deferQueue.insert=a.concat(f);this.processQueue("insert",c);return}for(b=0;b<f.length;b++)a=this._insert(f[b],d+b),
!0===a?g.push(f[b]):k.push({doc:f[b],reason:a})}else a=this._insert(f,d),!0===a?g.push(f):k.push({doc:f,reason:a});this.chainSend("insert",f,{index:d});this._onInsert(g,k);c&&c();this.deferEmit("change",{type:"insert",data:g});return{inserted:g,failed:k}};g.prototype._insert=function(f,d){if(f){var c;this._ensurePrimaryKey(f);if(c=this.insertIndexViolation(f))return"Index violation in index: "+c;this._insertIndex(f);this._linked?jQuery.observable(this._data).insert(d,f):this._data.splice(d,0,f);return!0}return"No document passed to insert"};
g.prototype._insertIndex=function(f){var d=this._indexByName,c,a=JSON.stringify(f);this._primaryIndex.uniqueSet(f[this._primaryKey],f);this._primaryCrc.uniqueSet(f[this._primaryKey],a);this._crcLookup.uniqueSet(a,f);for(c in d)d.hasOwnProperty(c)&&d[c].insert(f)};g.prototype._removeIndex=function(f){var d=this._indexByName,c,a=JSON.stringify(f);this._primaryIndex.unSet(f[this._primaryKey]);this._primaryCrc.unSet(f[this._primaryKey]);this._crcLookup.unSet(a);for(c in d)d.hasOwnProperty(c)&&d[c].remove(f)};
g.prototype.subset=function(f,d){var c=this.find(f,d);return(new g)._subsetOf(this).primaryKey(this._primaryKey).setData(c)};g.prototype.subsetOf=function(){return this.__subsetOf};g.prototype._subsetOf=function(f){this.__subsetOf=f;return this};g.prototype.distinct=function(f,d,a){d=this.find(d,a);f=new c(f);a={};var b=[],g,k;for(k=0;k<d.length;k++)(g=f.value(d[k])[0])&&!a[g]&&(a[g]=!0,b.push(g));return b};g.prototype.decouple=function(f){return JSON.parse(JSON.stringify(f))};g.prototype.findById=
function(f,d){var c={};c[this._primaryKey]=f;return this.find(c,d)[0]};g.prototype.peek=function(f,d){var c=this._data,a=c.length,b,k,e=new g;if("string"===typeof f){for(b=0;b<a;b++)k=JSON.stringify(c[b]),-1<k.indexOf(f)&&e.insert(c[b]);return e.find({},d)}return this.find(f,d)};g.prototype.explain=function(f,d){return this.find(f,d).__fdbOp._data};g.prototype.find=function(f,d){f=f||{};d=d||{};d.$decouple=void 0!==d.$decouple?d.$decouple:!0;var a=this._metrics.create("find"),b=this,g,k=!0,e,h,l,
p,q,m,r,Da,V,aa=[];h=function(d){return b._match(d,f,"and")};a.start();if(f){a.time("analyseQuery");g=this._analyseQuery(f,d,a);a.time("analyseQuery");a.data("analysis",g);if(g.hasJoin&&g.queriesJoin){a.time("joinReferences");for(l=0;l<g.joinsOn.length;l++)q=g.joinsOn[l],p=new c(g.joinQueries[q]),p=p.value(f)[0],this._db.collection(g.joinsOn[l]).subset(p);a.time("joinReferences")}g.indexMatch.length&&(!d||d&&!d.$skipIndex)?(a.data("index.potential",g.indexMatch),a.data("index.used",g.indexMatch[0].index),
a.time("indexLookup"),e=g.indexMatch[0].lookup,a.time("indexLookup"),g.indexMatch[0].keyData.totalKeyCount===g.indexMatch[0].keyData.matchedKeyCount&&(k=!1)):a.flag("usedIndex",!1);k&&(e&&e.length?(g=e.length,a.time("tableScan: "+g),e=e.filter(h)):(g=this._data.length,a.time("tableScan: "+g),e=this._data.filter(h)),d.$orderBy&&(a.time("sort"),e=this.sort(d.$orderBy,e),a.time("sort")),a.time("tableScan: "+g));d.limit&&e&&e.length>d.limit&&(e.length=d.limit,a.data("limit",d.limit));d.$decouple&&(a.time("decouple"),
e=this.decouple(e),a.time("decouple"),a.data("flag.decouple",!0));if(d.join){for(h=0;h<d.join.length;h++)for(q in d.join[h])if(d.join[h].hasOwnProperty(q))for(Da=q,g=this._db.collection(q),k=d.join[h][q],V=0;V<e.length;V++){r={};p=l=!1;for(m in k)if(k.hasOwnProperty(m))if("$"===m.substr(0,1))switch(m){case "$as":Da=k[m];break;case "$multi":l=k[m];break;case "$require":p=k[m];break;default:m.substr(0,3)}else r[m]=(new c(k[m])).value(e[V])[0];r=g.find(r);!p||p&&r[0]?e[V][Da]=!1===l?r[0]:r:aa.push(e[V])}a.data("flag.join",
!0)}if(aa.length){a.time("removalQueue");for(m=0;m<aa.length;m++)q=e.indexOf(aa[m]),-1<q&&e.splice(q,1);a.time("removalQueue")}if(d.transform){a.time("transform");for(m=0;m<e.length;m++)e.splice(m,1,d.transform(e[m]));a.time("transform");a.data("flag.transform",!0)}this._transformEnabled&&this._transformOut&&(a.time("transformOut"),e=this.transformOut(e),a.time("transformOut"));a.data("results",e.length);a.stop()}else a.stop(),e=[];e.__fdbOp=a;return e};g.prototype.indexOf=function(d){if(d=this.find(d,
{$decouple:!1})[0])return this._data.indexOf(d)};g.prototype.transform=function(d){return void 0!==d?("object"===typeof d?(void 0!==d.enabled&&(this._transformEnabled=d.enabled),void 0!==d.dataIn&&(this._transformIn=d.dataIn),void 0!==d.dataOut&&(this._transformOut=d.dataOut)):this._transformEnabled=!1===d?!1:!0,this):{enabled:this._transformEnabled,dataIn:this._transformIn,dataOut:this._transformOut}};g.prototype.transformIn=function(d){if(this._transformEnabled&&this._transformIn){if(d instanceof
Array){var a=[],c;for(c=0;c<d.length;c++)a[c]=this._transformIn(d[c]);return a}return this._transformIn(d)}return d};g.prototype.transformOut=function(d){if(this._transformEnabled&&this._transformOut){if(d instanceof Array){var c=[],a;for(a=0;a<d.length;a++)c[a]=this._transformOut(d[a]);return c}return this._transformOut(d)}return d};g.prototype.sort=function(d,a){a=a||[];var c=[],b,g;for(b in d)d.hasOwnProperty(b)&&(g={},g[b]=d[b],g.___fdbKey=b,c.push(g));return 2>c.length?this._sort(d,a):this._bucketSort(c,
a)};g.prototype._bucketSort=function(d,a){var c=d.shift(),b,g,k=[];if(0<d.length){a=this._sort(c,a);b=this.bucket(c.___fdbKey,a);for(g in b)b.hasOwnProperty(g)&&(c=[].concat(d),k=k.concat(this._bucketSort(c,b[g])));return k}return this._sort(c,a)};g.prototype._sort=function(d,a){var b=new c,g=b.parse(d,!0)[0];b.path(g.path);return a.sort(1===g.value?function(d,a){var c=b.value(d)[0],f=b.value(a)[0];return"string"===typeof c&&"string"===typeof f?c.localeCompare(f):c>f?1:c<f?-1:0}:function(d,c){var a=
b.value(d)[0],f=b.value(c)[0];return"string"===typeof a&&"string"===typeof f?1===a.localeCompare(f)?-1:1:a>f?-1:a<f?1:0})};g.prototype.bucket=function(d,a){var c,b={};for(c=0;c<a.length;c++)b[a[c][d]]=b[a[c][d]]||[],b[a[c][d]].push(a[c]);return b};g.prototype._analyseQuery=function(d,a,b){var g={queriesOn:[this._name],indexMatch:[],hasJoin:!1,queriesJoin:!1,joinQueries:{},query:d,options:a},k,e=[],h=[],l,p,D,q,m;b.time("checkIndexes");void 0!==d[this._primaryKey]&&(b.time("checkIndexMatch: Primary Key"),
l=new c,g.indexMatch.push({lookup:this._primaryIndex.lookup(d,a),keyData:{matchedKeys:[this._primaryKey],matchedKeyCount:1,totalKeyCount:l.countKeys(d)},index:this._primaryIndex}),b.time("checkIndexMatch: Primary Key"));for(m in this._indexById)if(this._indexById.hasOwnProperty(m)&&(p=this._indexById[m],D=p.name(),b.time("checkIndexMatch: "+D),l=p.match(d,a),q=p.lookup(d,a),0<l.matchedKeyCount&&g.indexMatch.push({lookup:q,keyData:l,index:p}),b.time("checkIndexMatch: "+D),l.totalKeyCount===l.matchedKeyCount))break;
b.time("checkIndexes");1<g.indexMatch.length&&(b.time("findOptimalIndex"),g.indexMatch.sort(function(d,a){return d.keyData.totalKeyCount===d.keyData.matchedKeyCount?-1:a.keyData.totalKeyCount===a.keyData.matchedKeyCount?1:d.keyData.matchedKeyCount===a.keyData.matchedKeyCount?d.lookup.length-a.lookup.length:a.keyData.matchedKeyCount-d.keyData.matchedKeyCount}),b.time("findOptimalIndex"));if(a.join){g.hasJoin=!0;for(b=0;b<a.join.length;b++)for(k in a.join[b])a.join[b].hasOwnProperty(k)&&(e.push(k),
"$as"in a.join[b][k]?h.push(a.join[b][k].$as):h.push(k));for(k=0;k<h.length;k++)if(a=this._queryReferencesCollection(d,h[k],""))g.joinQueries[e[k]]=a,g.queriesJoin=!0;g.joinsOn=e;g.queriesOn=g.queriesOn.concat(e)}return g};g.prototype._queryReferencesCollection=function(d,a,c){for(var b in d)if(d.hasOwnProperty(b)){if(b===a)return c&&(c+="."),c+b;if("object"===typeof d[b])return c&&(c+="."),c+=b,this._queryReferencesCollection(d[b],a,c)}return!1};g.prototype._match=function(d,a,c){var b,g;b=typeof d;
g=typeof a;var k=!0,e;if(!("string"!==b&&"number"!==b||"string"!==g&&"number"!==g))d!==a&&(k=!1);else for(e in a)if(a.hasOwnProperty(e)){b=!1;if("$"===e.substr(0,1))switch(e){case "$gt":if(d>a[e]){if("or"===c)return!0}else k=!1;b=!0;break;case "$gte":if(d>=a[e]){if("or"===c)return!0}else k=!1;b=!0;break;case "$lt":if(d<a[e]){if("or"===c)return!0}else k=!1;b=!0;break;case "$lte":if(d<=a[e]){if("or"===c)return!0}else k=!1;b=!0;break;case "$exists":if(void 0===d!==a[e]){if("or"===c)return!0}else k=!1;
b=!0;break;case "$or":b=!0;for(g=0;g<a[e].length;g++){if(this._match(d,a[e][g],"and"))return!0;k=!1}break;case "$and":b=!0;for(g=0;g<a[e].length;g++)if(!this._match(d,a[e][g],"and"))return!1;break;case "$in":if(a[e]instanceof Array){b=a[e];g=b.length;var h,l=!1;for(h=0;h<g;h++)if(b[h]===d){l=!0;break}if(l){if("or"===c)return!0}else k=!1}else throw"Cannot use a $nin operator on a non-array key: "+e;b=!0;break;case "$nin":if(a[e]instanceof Array){b=a[e];g=b.length;l=!0;for(h=0;h<g;h++)if(b[h]===d){l=
!1;break}if(l){if("or"===c)return!0}else k=!1}else throw"Cannot use a $nin operator on a non-array key: "+e;b=!0;break;case "$ne":if(d!=a[e]){if("or"===c)return!0}else k=!1;b=!0}if(!b&&a[e]instanceof RegExp)if(b=!0,"object"===typeof d&&void 0!==d[e]&&a[e].test(d[e])){if("or"===c)return!0}else k=!1;if(!b)if("object"===typeof a[e])if(void 0!==d[e]){if(d[e]instanceof Array&&!(a[e]instanceof Array))for(b=!1,g=0;g<d[e].length&&!(b=this._match(d[e][g],a[e],void 0));g++);else if(!(d[e]instanceof Array)&&
a[e]instanceof Array)for(b=!1,g=0;g<a[e].length&&!(b=this._match(d[e],a[e][g],void 0));g++);else b="object"===typeof d?this._match(d[e],a[e],void 0):this._match(void 0,a[e],void 0);if(b){if("or"===c)return!0}else k=!1}else if(a[e]&&void 0!==a[e].$exists)if(b=this._match(void 0,a[e],void 0)){if("or"===c)return!0}else k=!1;else k=!1;else if(d&&d[e]===a[e]){if("or"===c)return!0}else if(d&&d[e]&&d[e]instanceof Array&&a[e]&&"object"!==typeof a[e]){b=!1;for(g=0;g<d[e].length&&!(b=this._match(d[e][g],a[e],
void 0));g++);if(b){if("or"===c)return!0}else k=!1}else k=!1;if("and"===c&&!k)return!1}return k};g.prototype.count=function(d,a){return d?this.find(d,a).length:this._data.length};g.prototype.link=function(d,a){if(window.jQuery){this._links=this._links||{};var c,b;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(c=this.objectId(a.template),b=a.template):c=a;if(!this._links[c]){if(jQuery(d).length){if(!jQuery.templates[c]){if(!b)if(b=jQuery(a),b.length)b=jQuery(b[0]).html();else throw"Unable to bind collection to target because template does not exist: "+
a;jQuery.views.templates(c,b)}jQuery.templates[c].link(d,this._data);this._links[c]=d;this._linked++;this.debug()&&console.log('ForerunnerDB.Collection: Added binding collection "'+this.name()+'" to output target: '+d);return this}throw'Cannot bind view data to output target selector "'+d+'" because it does not exist in the DOM!';}throw"Cannot create a duplicate link to the target: "+d+" with the template: "+c;}throw"Cannot data-bind without jQuery, please add jQuery to your page!";};g.prototype.unlink=
function(d,a){if(window.jQuery){this._links=this._links||{};var c;a&&"object"===typeof a?a.template&&"string"===typeof a.template&&(c=this.objectId(a.template)):c=a;if(this._links[c])return jQuery.templates[c].unlink(d),delete this._links[c],this._linked--,this.debug()&&console.log('ForerunnerDB.Collection: Removed binding collection "'+this.name()+'" to output target: '+d),this;console.log("Cannot remove link, one does not exist to the target: "+d+" with the template: "+a)}else throw"Cannot data-bind without jQuery, please add jQuery to your page!";
};g.prototype.findSub=function(d,a,b,g){var e=new c(a);d=this.find(d);var k=d.length,h,l,p=this._db.collection("__FDB_temp_"+this.objectId()),D={parents:k,subDocTotal:0,subDocs:[],pathFound:!1,err:""};for(h=0;h<k;h++)if(l=e.value(d[h])[0]){p.setData(l);l=p.find(b,g);if(g.returnFirst&&l.length)return l[0];D.subDocs.push(l);D.subDocTotal+=l.length;D.pathFound=!0}p.drop();if(g.noStats)return D.subDocs;D.pathFound||(D.err="No objects found in the parent documents with a matching path of: "+a);return D};
g.prototype.insertIndexViolation=function(d){var a,c=this._indexByName,b,g;if(this._primaryIndex.get(d[this._primaryKey]))a=this._primaryIndex;else for(b in c)if(c.hasOwnProperty(b)&&(g=c[b],g.unique()&&g.violation(d))){a=g;break}return a?a.name():!1};g.prototype.ensureIndex=function(a,c){this._indexByName=this._indexByName||{};this._indexById=this._indexById||{};var b=new d(a,c,this),g={start:(new Date).getTime()};if(this._indexByName[b.name()])return{err:"Index with that name already exists"};if(this._indexById[b.id()])return{err:"Index with those keys already exists"};
b.rebuild();this._indexByName[b.name()]=b;this._indexById[b.id()]=b;g.end=(new Date).getTime();g.total=g.end-g.start;this._lastOp={type:"ensureIndex",stats:{time:g}};return{index:b,id:b.id(),name:b.name(),state:b.state()}};g.prototype.index=function(d){if(this._indexByName)return this._indexByName[d]};g.prototype.lastOp=function(){return this._metrics.list()};g.prototype.objectId=function(d){var a=Math.pow(10,17);if(d){var c=0,b=d.length,g;for(g=0;g<b;g++)c+=d.charCodeAt(g)*a;d=c.toString(16)}else e.idCounter++,
d=(e.idCounter+(Math.random()*a+Math.random()*a+Math.random()*a+Math.random()*a)).toString(16);return d};g.prototype.diff=function(d){var a={insert:[],update:[],remove:[]},c=this.primaryKey(),b,g,e,k;if(c===d.primaryKey()){b=d._data;k=b.length;for(g=0;g<k;g++)e=b[g],this._primaryIndex.get(e[c])?this._primaryCrc.get(e[c])!==d._primaryCrc.get(e[c])&&a.update.push(e):a.insert.push(e);b=this._data;k=b.length;for(g=0;g<k;g++)e=b[g],d._primaryIndex.get(e[c])||a.remove.push(e)}return a};h.prototype.collection=
function(d,a){if(d)return this._collection[d]||this.debug()&&console.log("Creating collection "+d),this._collection[d]=this._collection[d]||(new g(d)).db(this),void 0!==a&&this._collection[d].primaryKey(a),this._collection[d];throw"Cannot get collection with undefined name!";};h.prototype.collectionExists=function(d){return Boolean(this._collection[d])};h.prototype.collections=function(){var d=[],a;for(a in this._collection)this._collection.hasOwnProperty(a)&&d.push({name:a,count:this._collection[a].count()});
return d};p.exports=g},{"./Crc":5,"./Index":7,"./KeyValueStore":8,"./Metrics":9,"./Overload":11,"./Path":13,"./Shared":15}],3:[function(h,p,l){var e,b;l=h("./Shared");var a=function(){this.init.apply(this,arguments)};a.prototype.init=function(a){this._name=a;this._data=new b("__FDB__cg_data_"+this._name);this._collections=[];this._views=[]};l.addModule("CollectionGroup",a);l.inherit(a.prototype,l.chainSystem);b=h("./Collection");h("./Overload");h=l.modules.Core;e=l.modules.Core.prototype.init;a.prototype.on=
function(){this._data.on.apply(this._data,arguments)};a.prototype.off=function(){this._data.off.apply(this._data,arguments)};a.prototype.emit=function(){this._data.emit.apply(this._data,arguments)};a.prototype.primaryKey=function(a){return void 0!==a?(this._primaryKey=a,this):this._primaryKey};a.prototype.db=function(a){return void 0!==a?(this._db=a,this):this._db};a.prototype.addCollection=function(a){if(a&&-1===this._collections.indexOf(a)){if(this._collections.length){if(this._primaryKey!==a.primaryKey())throw"All collections in a collection group must have the same primary key!";
}else this.primaryKey(a.primaryKey());this._collections.push(a);a._groups.push(this);a.chain(this);this._data.insert(a.find())}return this};a.prototype.removeCollection=function(a){if(a){var d=this._collections.indexOf(a);-1!==d&&(a.unChain(this),this._collections.splice(d,1),d=a._groups.indexOf(this),-1!==d&&a._groups.splice(d,1));0===this._collections.length&&delete this._primaryKey}return this};a.prototype._chainHandler=function(a,d,b,g){switch(d){case "setData":b=this._data.decouple(b);this._data.remove(g.oldData);
this._data.insert(b);break;case "insert":b=this._data.decouple(b);this._data.insert(b);break;case "update":this._data.update(b.query,b.update,g);break;case "remove":this._data.remove(b.query,g)}};a.prototype.insert=function(){this._collectionsRun("insert",arguments)};a.prototype.update=function(){this._collectionsRun("update",arguments)};a.prototype.updateById=function(){this._collectionsRun("updateById",arguments)};a.prototype.remove=function(){this._collectionsRun("remove",arguments)};a.prototype._collectionsRun=
function(a,d){for(var b=0;b<this._collections.length;b++)this._collections[b][a].apply(this._collections[b],d)};a.prototype.find=function(a,d){return this._data.find(a,d)};a.prototype.removeById=function(a){for(var d=0;d<this._collections.length;d++)this._collections[d].removeById(a)};a.prototype.subset=function(a,d){var e=this.find(a,d);return(new b)._subsetOf(this).primaryKey(this._primaryKey).setData(e)};a.prototype.drop=function(){var a,d=[].concat(this._collections),b=[].concat(this._views);
this._debug&&console.log("Dropping collection group "+this._name);for(a=0;a<d.length;a++)this.removeCollection(d[a]);for(a=0;a<b.length;a++)this._removeView(b[a]);this.emit("drop");return!0};h.prototype.init=function(){this._collectionGroup={};e.apply(this,arguments)};h.prototype.collectionGroup=function(b){return b?(this._collectionGroup[b]=this._collectionGroup[b]||(new a(b)).db(this),this._collectionGroup[b]):this._collectionGroup};p.exports=a},{"./Collection":2,"./Overload":11,"./Shared":15}],
4:[function(h,p,l){var e,b;e=h("./Shared.js");var a=function(){this.init.apply(this,arguments)};a.prototype.init=function(){this._collection={};this._debug={}};e.addModule("Core",a);e.inherit(a.prototype,e.chainSystem);l=h("./Overload.js");b=h("./Collection.js");h("./Metrics.js");h=h("./Crc.js");a.prototype._isServer=!1;a.prototype.isClient=function(){return!this._isServer};a.prototype.isServer=function(){return this._isServer};a.prototype.crc=h;a.prototype.isClient=function(){return!this._isServer};
a.prototype.isServer=function(){return this._isServer};a.prototype.decouple=function(a){return JSON.parse(JSON.stringify(a))};a.prototype.debug=new l([function(){return this._debug.all},function(a){return void 0!==a&&"boolean"===typeof a?(this._debug.all=a,this):this._debug.all},function(a,d){return void 0!==a?void 0!==d?(this._debug[a]=d,this):this._debug[a]:this._debug.all}]);a.prototype.arrayToCollection=function(a){return(new b).setData(a)};a.prototype.on=function(a,d){this._listeners=this._listeners||
{};this._listeners[a]=this._listeners[a]||[];this._listeners[a].push(d);return this};a.prototype.off=function(a,d){if(a in this._listeners){var b=this._listeners[a],g=b.indexOf(d);-1<g&&b.splice(g,1)}return this};a.prototype.emit=function(a,d){this._listeners=this._listeners||{};if(a in this._listeners){var b=this._listeners[a],g=b.length,f;for(f=0;f<g;f++)b[f].apply(this,Array.prototype.slice.call(arguments,1))}return this};a.prototype.objectId=function(a){var d,b,g=Math.pow(10,17),f;if(a){d=0;b=
a.length;for(f=0;f<b;f++)d+=a.charCodeAt(f)*g;a=d.toString(16)}else e.idCounter++,a=(e.idCounter+(Math.random()*g+Math.random()*g+Math.random()*g+Math.random()*g)).toString(16);return a};a.prototype.peek=function(a){var d,b,g=[],f=typeof a;for(d in this._collection)this._collection.hasOwnProperty(d)&&(b=this._collection[d],g="string"===f?g.concat(b.peek(a)):g.concat(b.find(a)));return g};a.prototype.peekCat=function(a){var d,b,g={},f,e=typeof a;for(d in this._collection)this._collection.hasOwnProperty(d)&&
(b=this._collection[d],(f="string"===e?b.peek(a):b.find(a))&&f.length&&(g[b.name()]=f));return g};p.exports=a},{"./Collection.js":2,"./Crc.js":5,"./Metrics.js":9,"./Overload.js":11,"./Shared.js":15}],5:[function(h,p,l){var e=function(){var b=[],a,c,d;for(c=0;256>c;c++){a=c;for(d=0;8>d;d++)a=a&1?3988292384^a>>>1:a>>>1;b[c]=a}return b}();p.exports=function(b){var a=-1,c;for(c=0;c<b.length;c++)a=a>>>8^e[(a^b.charCodeAt(c))&255];return(a^-1)>>>0}},{}],6:[function(h,p,l){var e;h=h("./Shared");var b=function(a,
b){this.init.apply(this,arguments)};b.prototype.init=function(a,b){this._options=b;this._selector=$(this._options.selector);this._listeners={};this._collection=a;this._options.series=[];var d,e;switch(this._options.type){case "pie":this._selector.highcharts(this._options.chartOptions);this._chart=this._selector.highcharts();d=this._collection.find();e={allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {y} ({point.percentage:.0f}%)",style:{color:Highcharts.theme&&
Highcharts.theme.contrastTextColor||"black"}}};d=this.pieDataFromCollectionData(d,this._options.keyField,this._options.valField);$.extend(e,this._options.seriesOptions);$.extend(e,{type:"pie",name:this._options.seriesName,data:d});this._chart.addSeries(e);break;case "line":d=this.lineDataFromCollectionData(this._options.seriesField,this._options.keyField,this._options.valField,this._options.orderBy),this._options.chartOptions.xAxis=d.xAxis,this._options.chartOptions.series=d.series,this._selector.highcharts(this._options.chartOptions),
this._chart=this._selector.highcharts()}this._hookEvents()};h=h.modules.Collection;e=h.prototype.init;b.prototype.pieDataFromCollectionData=function(a,b,d){var e=[],g;for(g=0;g<a.length;g++)e.push([a[g][b],a[g][d]]);return e};b.prototype.lineDataFromCollectionData=function(a,b,d,e){var g=this._collection.distinct(a),f=[],h={categories:[]},l,p,P,fa,ga;for(fa=0;fa<g.length;fa++){l=g[fa];p={};p[a]=l;P=[];p=this._collection.find(p,{orderBy:e});for(ga=0;ga<p.length;ga++)h.categories.push(p[ga][b]),P.push(p[ga][d]);
f.push({name:l,data:P})}return{xAxis:h,series:f}};b.prototype._hookEvents=function(){this._collection.on("change",this._changeListener);this._collection.on("drop",this._dropListener)};b.prototype._changeListener=function(){if("undefined"!==typeof this._collection&&this._chart){var a=this._collection.find();switch(this._options.type){case "pie":this._chart.series[0].setData(this.pieDataFromCollectionData(a,this._options.keyField,this._options.valField));break;case "line":a=this.lineDataFromCollectionData(this._options.seriesField,
this._options.keyField,this._options.valField,this._options.orderBy);this._chart.xAxis[0].setCategories(a.xAxis.categories);for(var b=0;b<a.series.length;b++)this._chart.series[b].setData(a.series[b].data)}}};b.prototype._dropListener=function(){this._collection.off("change",this._changeListener);this._collection.off("drop",this._dropListener)};b.prototype.drop=function(){this._chart.destroy();this._collection.off("change",this._changeListener);this._collection.off("drop",this._dropListener);delete this._collection._highcharts[this._options.selector];
delete this._chart;delete this._options;delete this._collection;return this};h.prototype.init=function(){this._highcharts={};e.apply(this,arguments)};h.prototype.chart=function(a){this._highcharts[a.selector]||(this._highcharts[a.selector]=new b(this,a));return this._highcharts[a.selector]};h.prototype.dropChart=function(a){this._highcharts[a]&&this._highcharts[a].drop()};p.exports=b},{"./Shared":15}],7:[function(h,p,l){l=h("./Shared");var e=h("./Path");h=function(){this.init.apply(this,arguments)};
h.prototype.init=function(b,a,c){this._crossRef={};this._size=0;this._id=this._itemKeyHash(b,b);this.data({});this.unique(a&&a.unique?a.unique:!1);void 0!==b&&this.keys(b);void 0!==c&&this.collection(c);this.name(a&&a.name?a.name:this._id)};l.addModule("Index",h);l.inherit(h.prototype,l.chainSystem);h.prototype.id=function(){return this._id};h.prototype.state=function(){return this._state};h.prototype.size=function(){return this._size};h.prototype.data=function(b){return void 0!==b?(this._data=b,
this):this._data};h.prototype.name=function(b){return void 0!==b?(this._name=b,this):this._name};h.prototype.collection=function(b){return void 0!==b?(this._collection=b,this):this._collection};h.prototype.keys=function(b){return void 0!==b?(this._keys=b,this._keyCount=(new e).parse(this._keys).length,this):this._keys};h.prototype.type=function(b){return void 0!==b?(this._type=b,this):this._type};h.prototype.unique=function(b){return void 0!==b?(this._unique=b,this):this._unique};h.prototype.rebuild=
function(){if(this._collection){var b=this._collection.subset({},{$decouple:!1,$orderBy:this._keys}).find(),a,c=b.length;this._data={};this._unique&&(this._uniqueLookup={});for(a=0;a<c;a++)this.insert(b[a])}this._state={name:this._name,keys:this._keys,indexSize:this._size,built:new Date,updated:new Date,ok:!0}};h.prototype.insert=function(b,a){var c,d;this._unique&&(c=this._itemHash(b,this._keys),this._uniqueLookup[c]=b);c=this._itemHashArr(b,this._keys);for(d=0;d<c.length;d++)this.pushToPathValue(c[d],
b)};h.prototype.remove=function(b,a){var c,d;this._unique&&(c=this._itemHash(b,this._keys),delete this._uniqueLookup[c]);c=this._itemHashArr(b,this._keys);for(d=0;d<c.length;d++)this.pullFromPathValue(c[d],b)};h.prototype.violation=function(b){b=this._itemHash(b,this._keys);return Boolean(this._uniqueLookup[b])};h.prototype.hashViolation=function(b){return Boolean(this._uniqueLookup[b])};h.prototype.pushToPathValue=function(b,a){var c=this._data[b]=this._data[b]||[];-1===c.indexOf(a)&&(c.push(a),
this._size++,this.pushToCrossRef(a,c))};h.prototype.pullFromPathValue=function(b,a){var c=this._data[b],d;d=c.indexOf(a);-1<d&&(c.splice(d,1),this._size--,this.pullFromCrossRef(a,c));c.length||delete this._data[b]};h.prototype.pull=function(b){var a=b[this._collection.primaryKey()],c=this._crossRef[a],d,e=c.length,g;for(d=0;d<e;d++)g=c[d],this._pullFromArray(g,b);this._size--;delete this._crossRef[a]};h.prototype._pullFromArray=function(b,a){for(var c=b.length;c--;)b[c]===a&&b.splice(c,1)};h.prototype.pushToCrossRef=
function(b,a){var c=b[this._collection.primaryKey()];this._crossRef[c]=this._crossRef[c]||[];c=this._crossRef[c];-1===c.indexOf(a)&&c.push(a)};h.prototype.pullFromCrossRef=function(b,a){var c=b[this._collection.primaryKey()];delete this._crossRef[c]};h.prototype.lookup=function(b){return this._data[this._itemHash(b,this._keys)]||[]};h.prototype.match=function(b,a){return(new e).countObjectPaths(this._keys,b)};h.prototype._itemHash=function(b,a){var c=new e,d,k="",g;d=c.parse(a);for(g=0;g<d.length;g++)k&&
(k+="_"),k+=c.value(b,d[g].path).join(":");return k};h.prototype._itemKeyHash=function(b,a){var c=new e,d,k="",g;d=c.parse(a);for(g=0;g<d.length;g++)k&&(k+="_"),k+=c.keyValue(b,d[g].path);return k};h.prototype._itemHashArr=function(b,a){var c=new e,d,k=[],g,f,h,l;d=c.parse(a);for(h=0;h<d.length;h++)for(g=c.value(b,d[h].path),f=0;f<g.length;f++)if(0===h)k.push(g[f]);else for(l=0;l<k.length;l++)k[l]=k[l]+"_"+g[f];return k};p.exports=h},{"./Path":13,"./Shared":15}],8:[function(h,p,l){h=h("./Shared");
l=function(e){this.init.apply(this,arguments)};l.prototype.init=function(e){this._name=e;this._data={};this._primaryKey="_id"};h.addModule("KeyValueStore",l);h.inherit(l.prototype,h.chainSystem);l.prototype.name=function(e){return void 0!==e?(this._name=e,this):this._name};l.prototype.primaryKey=function(e){return void 0!==e?(this._primaryKey=e,this):this._primaryKey};l.prototype.truncate=function(){this._data={};return this};l.prototype.set=function(e,b){this._data[e]=b?b:!0;return this};l.prototype.get=
function(e){return this._data[e]};l.prototype.lookup=function(e){e=e[this._primaryKey];var b,a,c,d;if(e instanceof Array){a=e.length;d=[];for(b=0;b<a;b++)(c=this._data[e[b]])&&d.push(c);return d}if(e instanceof RegExp){d=[];for(b in this._data)this._data.hasOwnProperty(b)&&e.test(b)&&d.push(this._data[b]);return d}if("object"===typeof e){if(e.$ne){d=[];for(b in this._data)this._data.hasOwnProperty(b)&&b!==e.$ne&&d.push(this._data[b]);return d}if(e.$in&&e.$in instanceof Array){d=[];for(b in this._data)this._data.hasOwnProperty(b)&&
-1<e.$in.indexOf(b)&&d.push(this._data[b]);return d}if(e.$nin&&e.$nin instanceof Array){d=[];for(b in this._data)this._data.hasOwnProperty(b)&&-1===e.$nin.indexOf(b)&&d.push(this._data[b]);return d}if(e.$or&&e.$or instanceof Array){d=[];for(b=0;b<e.$or.length;b++)d=d.concat(this.lookup(e.$or[b]));return d}}else return c=this._data[e],void 0!==c?[c]:[]};l.prototype.unSet=function(e){delete this._data[e];return this};l.prototype.uniqueSet=function(e,b){return void 0===this._data[e]?(this._data[e]=b,
!0):!1};p.exports=l},{"./Shared":15}],9:[function(h,p,l){l=h("./Shared");var e=h("./Operation");h=function(){this.init.apply(this,arguments)};h.prototype.init=function(){this._data=[]};l.addModule("Metrics",h);l.inherit(h.prototype,l.chainSystem);h.prototype.create=function(b){b=new e(b);this._enabled&&this._data.push(b);return b};h.prototype.start=function(){this._enabled=!0;return this};h.prototype.stop=function(){this._enabled=!1;return this};h.prototype.clear=function(){this._data=[];return this};
h.prototype.list=function(){return this._data};p.exports=h},{"./Operation":10,"./Shared":15}],10:[function(h,p,l){l=h("./Shared");var e=h("./Path");h=function(b){this.pathSolver=new e;this.counter=0;this.init.apply(this,arguments)};h.prototype.init=function(b){this._data={operation:b,index:{potential:[],used:!1},steps:[],time:{startMs:0,stopMs:0,totalMs:0,process:{}},flag:{},log:[]}};l.addModule("Operation",h);l.inherit(h.prototype,l.chainSystem);h.prototype.start=function(){this._data.time.startMs=
(new Date).getTime()};h.prototype.log=function(b){if(b){var a=0<this._log.length?this._data.log[this._data.log.length-1].time:0;b={event:b,time:(new Date).getTime(),delta:0};this._data.log.push(b);a&&(b.delta=b.time-a);return this}return this._data.log};h.prototype.time=function(b){if(void 0!==b){var a=this._data.time.process,a=a[b]=a[b]||{};a.startMs?(a.stopMs=(new Date).getTime(),a.totalMs=a.stopMs-a.startMs,a.stepObj.totalMs=a.totalMs,delete a.stepObj):(a.startMs=(new Date).getTime(),a.stepObj=
{name:b},this._data.steps.push(a.stepObj));return this}return this._data.time};h.prototype.flag=function(b,a){if(void 0!==b&&void 0!==a)this._data.flag[b]=a;else return void 0!==b?this._data.flag[b]:this._data.flag};h.prototype.data=function(b,a,c){return void 0!==a?(this.pathSolver.set(this._data,b,a),this):this.pathSolver.get(this._data,b)};h.prototype.pushData=function(b,a,c){this.pathSolver.push(this._data,b,a)};h.prototype.stop=function(){this._data.time.stopMs=(new Date).getTime();this._data.time.totalMs=
this._data.time.stopMs-this._data.time.startMs};p.exports=h},{"./Path":13,"./Shared":15}],11:[function(h,p,l){l=function(e){if(e){var b,a=e.length;return function(){for(b=0;b<a;b++)if(e[b].length===arguments.length)return e[b].apply(this,arguments);return null}}return function(){}};h("./Shared").addModule("Overload",l);p.exports=l},{"./Shared":15}],12:[function(h,p,l){var e,b;l=h("./Shared");var a=function(){this.init.apply(this,arguments)};a.prototype.init=function(a){this._name=a;this._data=new b;
this._reducedData={};this._collections=[]};l.addModule("Overview",a);l.inherit(a.prototype,l.chainSystem);b=h("./Collection");h("./Overload");h=l.modules.Core;e=l.modules.Core.prototype.init;a.prototype.from=function(a){void 0!==a&&("string"===typeof a&&(a=this._db.collection(a)),this._addCollection(a));return this};a.prototype.find=function(){for(var a=0;a<this._collections.length;a++)this._collections[a][type].apply(this._collections[a],args)};a.prototype._addCollection=function(a){-1===this._collections.indexOf(a)&&
(this._collections.push(a),a.chain(this),this._refresh());return this};a.prototype._removeCollection=function(a){-1<this._collections.indexOf(a)&&(this._collections.splice(a,1),a.unChain(this),this._refresh());return this};a.prototype._refresh=function(){this.find(this._querySettings.query,this._querySettings.options)};a.prototype._chainHandler=function(a,d,b,g){switch(d){case "setData":case "insert":case "update":case "remove":this._data.remove(b.query,g)}};a.prototype.link=function(a,d){if(window.jQuery){this._links=
this._links||{};var b,g;d&&"object"===typeof d?d.template&&"string"===typeof d.template&&(b=this.objectId(d.template),g=d.template):b=d;if(!this._links[b]){if(jQuery(a).length){if(!jQuery.templates[b]){if(!g)if(g=jQuery(d),g.length)g=jQuery(g[0]).html();else throw"Unable to bind overview to target because template does not exist: "+d;jQuery.views.templates(b,g)}jQuery.templates[b].link(a,this._data);this._links[b]=a;this._linked++;this.debug()&&console.log('ForerunnerDB.Overview: Added binding overview "'+
this.name()+'" to output target: '+a);return this}throw'Cannot bind view data to output target selector "'+a+'" because it does not exist in the DOM!';}throw"Cannot create a duplicate link to the target: "+a+" with the template: "+b;}throw"Cannot data-bind without jQuery, please add jQuery to your page!";};a.prototype.unlink=function(a,d){if(window.jQuery){this._links=this._links||{};var b;d&&"object"===typeof d?d.template&&"string"===typeof d.template&&(b=this.objectId(d.template)):b=d;if(this._links[b])return jQuery.templates[b].unlink(a),
delete this._links[b],this._linked--,this.debug()&&console.log('ForerunnerDB.Overview: Removed binding overview "'+this.name()+'" to output target: '+a),this;console.log("Cannot remove link, one does not exist to the target: "+a+" with the template: "+d)}else throw"Cannot data-bind without jQuery, please add jQuery to your page!";};h.prototype.init=function(){this._overview={};e.apply(this,arguments)};h.prototype.overview=function(b){return b?(this._overview[b]=this._overview[b]||(new a(b)).db(this),
this._overview[b]):this._overview};p.exports=a},{"./Collection":2,"./Overload":11,"./Shared":15}],13:[function(h,p,l){h=h("./Shared");l=function(e){this.init.apply(this,arguments)};l.prototype.init=function(e){e&&this.path(e)};h.addModule("Path",l);h.inherit(l.prototype,h.chainSystem);l.prototype.path=function(e){return void 0!==e?(this._path=this.clean(e),this._pathParts=this._path.split("."),this):this._path};l.prototype.hasObjectPaths=function(e,b){var a=!0,c;for(c in e)if(e.hasOwnProperty(c)&&
(void 0===b[c]||"object"===typeof e[c]&&(a=this.hasObjectPaths(e[c],b[c]),!a)))return!1;return a};l.prototype.countKeys=function(e){var b=0,a;for(a in e)e.hasOwnProperty(a)&&void 0!==e[a]&&("object"!==typeof e[a]?b++:b+=this.countKeys(e[a]));return b};l.prototype.countObjectPaths=function(e,b){var a,c={},d=0,k=0,g;for(g in b)b.hasOwnProperty(g)&&("object"===typeof b[g]?(a=this.countObjectPaths(e[g],b[g]),c[g]=a.matchedKeys,k+=a.totalKeyCount,d+=a.matchedKeyCount):(k++,e&&e[g]&&"object"!==typeof e[g]?
(c[g]=!0,d++):c[g]=!1));return{matchedKeys:c,matchedKeyCount:d,totalKeyCount:k}};l.prototype.parse=function(e,b){var a=[],c="",d,k,g;for(k in e)if(e.hasOwnProperty(k))if(c=k,"object"===typeof e[k])if(b)for(d=this.parse(e[k],b),g=0;g<d.length;g++)a.push({path:c+"."+d[g].path,value:d[g].value});else for(d=this.parse(e[k]),g=0;g<d.length;g++)a.push({path:c+"."+d[g].path});else b?a.push({path:c,value:e[k]}):a.push({path:c});return a};l.prototype.parseArr=function(e,b){b=b||{};return this._parseArr(e,
"",[],b)};l.prototype._parseArr=function(e,b,a,c){var d,k="";b=b||"";a=a||[];for(d in e)e.hasOwnProperty(d)&&(!c.ignore||c.ignore&&!c.ignore.test(d))&&(k=b?b+"."+d:d,"object"===typeof e[d]?this._parseArr(e[d],k,a,c):a.push(k));return a};l.prototype.value=function(e,b){if(void 0!==e&&"object"===typeof e){var a,c,d,k,g=[],f;void 0!==b&&(b=this.clean(b),a=b.split("."));a=a||this._pathParts;c=a.length;d=e;for(f=0;f<c;f++){d=d[a[f]];if(k instanceof Array){for(c=0;c<k.length;c++)g=g.concat(this.value(k,
c+"."+a[f]));return g}if(!d||"object"!==typeof d)break;k=d}return[d]}return[]};l.prototype.set=function(e,b,a){if(void 0!==e&&void 0!==b){var c;b=this.clean(b);b=b.split(".");c=b.shift();b.length?(e[c]=e[c]||{},this.set(e[c],b.join("."),a)):e[c]=a}return e};l.prototype.get=function(e,b){return this.value(e,b)[0]};l.prototype.push=function(e,b,a){if(void 0!==e&&void 0!==b){var c;b=this.clean(b);b=b.split(".");c=b.shift();if(b.length)e[c]=e[c]||{},this.set(e[c],b.join("."),a);else if(e[c]=e[c]||[],
e[c]instanceof Array)e[c].push(a);else throw"Cannot push to a path whose endpoint is not an array!";}return e};l.prototype.keyValue=function(e,b){var a,c,d,k,g;void 0!==b&&(b=this.clean(b),a=b.split("."));a=a||this._pathParts;c=a.length;d=e;for(g=0;g<c;g++)if(d=d[a[g]],!d||"object"!==typeof d){k=a[g]+":"+d;break}return k};l.prototype.clean=function(e){"."===e.substr(0,1)&&(e=e.substr(1,e.length-1));return e};p.exports=l},{"./Shared":15}],14:[function(h,p,l){l=h("./Shared");var e,b,a,c;c=function(){this.init.apply(this,
arguments)};c.prototype.init=function(a){a.isClient()&&void 0!==Storage&&this.mode("localStorage")};l.addModule("Persist",c);l.inherit(c.prototype,l.chainSystem);l=l.modules.Core;e=h("./Collection");b=e.prototype.drop;h("./CollectionGroup");h("./Overload");a=l.prototype.init;c.prototype.mode=function(a){return void 0!==a?(this._mode=a,this):this._mode};c.prototype.save=function(a,b,c){switch(this.mode()){case "localStorage":b="object"===typeof b?"json::fdb::"+JSON.stringify(b):"raw::fdb::"+b;try{localStorage.setItem(a,
b)}catch(f){c&&c(f)}c&&c(!1)}c&&c("No data handler.")};c.prototype.load=function(a,b){var c,f;switch(this.mode()){case "localStorage":try{c=localStorage.getItem(a)}catch(e){b(e,null)}if(c){c=c.split("::fdb::");switch(c[0]){case "json":f=JSON.parse(c[1]);break;case "raw":f=c[1]}b&&b(!1,f)}}b&&b("No data handler or unrecognised data type.")};c.prototype.drop=function(a,b){switch(this.mode()){case "localStorage":try{localStorage.removeItem(a)}catch(c){b&&b(c)}b&&b(!1)}b&&b("No data handler or unrecognised data type.")};
e.prototype.drop=function(a){if(a)if(this._name)if(this._db)this._db.persist.drop(this._name);else return callback&&callback("Cannot drop a collection's persistent storage when the collection is not attached to a database!"),"Cannot drop a collection's persistent storage when the collection is not attached to a database!";else return callback&&callback("Cannot drop a collection's persistent storage when no name assigned to collection!"),"Cannot drop a collection's persistent storage when no name assigned to collection!";
b.apply(this)};e.prototype.save=function(a){if(this._name)if(this._db)this._db.persist.save(this._name,this._data);else return a&&a("Cannot save a collection that is not attached to a database!"),"Cannot save a collection that is not attached to a database!";else return a&&a("Cannot save a collection with no assigned name!"),"Cannot save a collection with no assigned name!"};e.prototype.load=function(a){var b=this;if(this._name)if(this._db)this._db.persist.load(this._name,function(c,f){if(c)return a&&
a(c),c;f&&b.setData(f);a&&a(!1)});else return a&&a("Cannot load a collection that is not attached to a database!"),"Cannot load a collection that is not attached to a database!";else return a&&a("Cannot load a collection with no assigned name!"),"Cannot load a collection with no assigned name!"};l.prototype.init=function(){this.persist=new c(this);a.apply(this,arguments)};p.exports=c},{"./Collection":2,"./CollectionGroup":3,"./Overload":11,"./Shared":15}],15:[function(h,p,l){p.exports={idCounter:0,
modules:{},addModule:function(e,b){this.modules[e]=b},inherit:function(e,b){for(var a in b)b.hasOwnProperty(a)&&(e[a]=b[a])},chainSystem:{chain:function(e){this._chain=this._chain||[];-1===this._chain.indexOf(e)&&this._chain.push(e)},unChain:function(e){this._chain&&(e=this._chain.indexOf(e),-1<e&&this._chain.splice(e,1))},chainSend:function(e,b,a){if(this._chain){var c=this._chain,d=c.length,k;for(k=0;k<d;k++)c[k].chainReceive(this,e,b,a)}},chainReceive:function(e,b,a,c){(!this._chainHandler||this._chainHandler&&
!this._chainHandler(e,b,a,c))&&this.chainSend(b,a,c)}}}},{}],16:[function(h,p,l){var e,b,a;l=h("./Shared");var c=function(a,b,c){this.init.apply(this,arguments)};c.prototype.init=function(a,b,c){this._name=a;this._collections=[];this._groups=[];this._listeners={};this._querySettings={query:b,options:c};this._debug={};this._privateData=new e("__FDB__view_privateData_"+this._name)};l.addModule("View",c);l.inherit(c.prototype,l.chainSystem);e=h("./Collection");CollectionGroup=h("./CollectionGroup");
h=h("./Overload");b=e.prototype.init;l=l.modules.Core;a=l.prototype.init;c.prototype.debug=new h([function(){return this._debug.all},function(a){return void 0!==a&&"boolean"===typeof a?(this._debug.all=a,this.privateData().debug(a),this.publicData().debug(a),this):this._debug.all},function(a,b){return void 0!==a?void 0!==b?(this._debug[a]=b,this.privateData().debug(a,b),this.publicData().debug(a,b),this):this._debug[a]:this._debug.all}]);c.prototype.name=function(a){return void 0!==a?(this._name=
a,this):this._name};c.prototype.insert=function(){this._collectionsRun("insert",arguments)};c.prototype.update=function(){this._collectionsRun("update",arguments)};c.prototype.updateById=function(){this._collectionsRun("updateById",arguments)};c.prototype.remove=function(){this._collectionsRun("remove",arguments)};c.prototype._collectionsRun=function(a,b){for(var c=0;c<this._collections.length;c++)this._collections[c][a].apply(this._collections[c],b)};c.prototype.find=function(a,b){return this.publicData().find(a,
b)};c.prototype.link=function(a,b){var c=this.publicData();this.debug()&&console.log('ForerunnerDB.View: Setting up data binding on view "'+this.name()+'" in underlying (internal) view collection "'+c.name()+'" for output target: '+a);return c.link(a,b)};c.prototype.unlink=function(a,b){var c=this.publicData();this.debug()&&console.log('ForerunnerDB.View: Removing data binding on view "'+this.name()+'" in underlying (internal) view collection "'+c.name()+'" for output target: '+a);return c.unlink(a,
b)};c.prototype.from=function(a){void 0!==a&&("string"===typeof a&&(a=this._db.collection(a)),this._addCollection(a));return this};c.prototype._addCollection=function(a){if(-1===this._collections.indexOf(a)){this._collections.push(a);a.chain(this);var b=a.find(this._querySettings.query,this._querySettings.options);this._transformPrimaryKey(a.primaryKey());this._transformInsert(b);this._privateData.primaryKey(a.primaryKey());this._privateData.insert(b)}return this};c.prototype._removeCollection=function(a){-1<
this._collections.indexOf(a)&&(this._collections.splice(a,1),a.unChain(this),this._privateData.remove(a.find(this._querySettings.query,this._querySettings.options)));return this};c.prototype._chainHandler=function(a,b,c,f){var e,h;switch(b){case "setData":this.debug()&&console.log('ForerunnerDB.View: Setting data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"');c=this._privateData.decouple(c);this._transformSetData(c);this._privateData.setData(c);
break;case "insert":this.debug()&&console.log('ForerunnerDB.View: Inserting some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"');c=this._privateData.decouple(c);if(this._querySettings.options&&this._querySettings.options.$orderBy)if(e=[].concat(this._privateData._data),(a=c instanceof Array)?e=e.concat(c):e.push(c),e=this._privateData.sort(this._querySettings.options.$orderBy,e),a)for(c.sort(function(a,b){return e.indexOf(a)-e.indexOf(b)}),
a=0;a<c.length;a++)b=e.indexOf(c[a]),this._transformInsert(c,b),this._privateData._insertHandle(c,b);else b=e.indexOf(c),this._transformInsert(c,b),this._privateData._insertHandle(c,b);else b=f&&f.index?f.index:this._privateData._data.length,this._transformInsert(c,b),this._privateData._insertHandle(c,b);break;case "update":this.debug()&&console.log('ForerunnerDB.View: Updating some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"');c=this._privateData.update(c.query,
c.update,c.options);if(this._querySettings.options&&this._querySettings.options.$orderBy)for(e=[].concat(this._privateData._data),e=this._privateData.sort(this._querySettings.options.$orderBy,e),c.sort(function(a,b){return e.indexOf(a)-e.indexOf(b)}),a=0;a<c.length;a++)f=this._privateData._data.indexOf(c[a]),b=e.indexOf(c[a]),this._privateData._updateSpliceMove(this._privateData._data,f,b);if(this._transformEnabled&&this._transformIn)for(b=this._publicData.primaryKey(),a=0;a<c.length;a++)f={},h=c[a],
f[b]=h[b],this._transformUpdate(f,h);break;case "remove":this.debug()&&console.log('ForerunnerDB.View: Removing some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"'),this._transformRemove(c.query,f),this._privateData.remove(c.query,f)}};c.prototype.on=function(){this._privateData.on.apply(this._privateData,arguments)};c.prototype.off=function(){this._privateData.off.apply(this._privateData,arguments)};c.prototype.emit=function(){this._privateData.emit.apply(this._privateData,
arguments)};c.prototype.drop=function(){if(this._collections&&this._collections.length){(this.debug()||this._db&&this._db.debug())&&console.log("ForerunnerDB.View: Dropping view "+this._name);for(var a=this._collections.length;a--;)this._removeCollection(this._collections[a]);this._privateData.drop();return!0}return!1};c.prototype.db=function(a){return void 0!==a?(this._db=a,this.privateData().db(a),this.publicData().db(a),this):this._db};c.prototype.primaryKey=function(){return this._privateData.primaryKey()};
c.prototype.queryData=function(a,b,c){void 0!==a&&(this._querySettings.query=a);void 0!==b&&(this._querySettings.options=b);return void 0!==a||void 0!==b?(void 0!==c&&!0!==c||this.refresh(),this):this._querySettings};c.prototype.queryAdd=function(a,b,c){var f=this._querySettings.query,e;if(void 0!==a)for(e in a)a.hasOwnProperty(e)&&(void 0===f[e]||void 0!==f[e]&&b)&&(f[e]=a[e]);void 0!==c&&!0!==c||this.refresh()};c.prototype.queryRemove=function(a,b){var c=this._querySettings.query,f;if(void 0!==
a)for(f in a)a.hasOwnProperty(f)&&delete c[f];void 0!==b&&!0!==b||this.refresh()};c.prototype.query=function(a,b){return void 0!==a?(this._querySettings.query=a,void 0!==b&&!0!==b||this.refresh(),this):this._querySettings.query};c.prototype.queryOptions=function(a,b){return void 0!==a?(this._querySettings.options=a,void 0===a.$decouple&&(a.$decouple=!0),void 0!==b&&!0!==b||this.refresh(),this):this._querySettings.options};c.prototype.refresh=function(a){var b;a=this.publicData();var c;this._privateData.remove();
a.remove();for(c=0;c<this._collections.length;c++)b=this._collections[c],this._privateData.insert(b.find(this._querySettings.query,this._querySettings.options));b=this._privateData.find({},this._querySettings.options);a._linked?jQuery.observable(a._data).refresh(b):(this._privateData._data.length=0,this._privateData._data=this._privateData._data.concat(b));return this};c.prototype.count=function(){return this._privateData&&this._privateData._data?this._privateData._data.length:0};c.prototype.transform=
function(a){return void 0!==a?("object"===typeof a?(void 0!==a.enabled&&(this._transformEnabled=a.enabled),void 0!==a.dataIn&&(this._transformIn=a.dataIn),void 0!==a.dataOut&&(this._transformOut=a.dataOut)):this._transformEnabled=!1===a?!1:!0,this._transformPrimaryKey(this.privateData().primaryKey()),this._transformSetData(this.privateData().find()),this):{enabled:this._transformEnabled,dataIn:this._transformIn,dataOut:this._transformOut}};c.prototype.privateData=function(){return this._privateData};
c.prototype.publicData=function(){return this._transformEnabled?this._publicData:this._privateData};c.prototype._transformSetData=function(a){this._transformEnabled&&(this._publicData=new e("__FDB__view_publicData_"+this._name),this._publicData.db(this._privateData._db),this._publicData.transform({enabled:!0,dataIn:this._transformIn,dataOut:this._transformOut}),this._publicData.setData(a))};c.prototype._transformInsert=function(a,b){this._transformEnabled&&this._publicData&&this._publicData.insert(a,
b)};c.prototype._transformUpdate=function(a,b,c){this._transformEnabled&&this._publicData&&this._publicData.update(a,b,c)};c.prototype._transformRemove=function(a,b){this._transformEnabled&&this._publicData&&this._publicData.remove(a,b)};c.prototype._transformPrimaryKey=function(a){this._transformEnabled&&this._publicData&&this._publicData.primaryKey(a)};e.prototype.init=function(){this._views=[];b.apply(this,arguments)};e.prototype.view=function(a,b,e){a=(new c(a,b,e)).db(this._db)._addCollection(this);
this._views=this._views||[];this._views.push(a);return a};e.prototype._addView=CollectionGroup.prototype._addView=function(a){void 0!==a&&this._views.push(a);return this};e.prototype._removeView=CollectionGroup.prototype._removeView=function(a){void 0!==a&&(a=this._views.indexOf(a),-1<a&&this._views.splice(a,1));return this};l.prototype.init=function(){this._views={};a.apply(this,arguments)};l.prototype.view=function(a){this._views[a]||(this.debug()||this._db&&this._db.debug())&&console.log("Core.View: Creating view "+
a);this._views[a]=this._views[a]||(new c(a)).db(this);return this._views[a]};l.prototype.viewExists=function(a){return Boolean(this._views[a])};l.prototype.views=function(){var a=[],b;for(b in this._views)this._views.hasOwnProperty(b)&&a.push({name:b,count:this._views[b].count()});return a};p.exports=c},{"./Collection":2,"./CollectionGroup":3,"./Overload":11,"./Shared":15}],17:[function(h,p,l){window.jQuery&&(this.jQuery=window.jQuery,function(){(function(e,b,a){function c(a){return a}function d(a){debugger;
return a}function h(a){ba=(wa._dbgMode=a)?"Unavailable (nested view): use #getIndex()":"";za("dbg",La.dbg=ma.dbg=a?d:c)}function g(a){this.name=(t.link?"JsViews":"JsRender")+" Error";this.message=a||this.name}function f(a,b){for(var c in b)a[c]=b[c];return a}function l(a){return"function"===typeof a}function p(a,b,c){if(!ca.rTag||a)v=a?a.charAt(0):v,ja=a?a.charAt(1):ja,N=b?b.charAt(0):N,H=b?b.charAt(1):H,Q=c||Q,a="\\"+v+"(\\"+Q+")?\\"+ja,b="\\"+N+"\\"+H,A="(?:(?:(\\w+(?=[\\/\\s\\"+N+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+
N+"]|\\"+N+"(?!\\"+H+"))*?)",ca.rTag=A+")",A=RegExp(a+A+"(\\/)?|(?:\\/(\\w+)))"+b,"g"),na=RegExp("<.*>|([^\\\\]|^)[{}]|"+a+".*"+b);return[v,ja,N,H,Q]}function Ja(b,c){c||(c=b,b=a);var d,f,e,g;e=this;d=!c||"root"===c;if(b){if(g=e.type===c?e:a,!g)if(d=e.views,e._.useKey)for(f in d){if(g=d[f].get(b,c))break}else for(f=0,e=d.length;!g&&f<e;f++)g=d[f].get(b,c)}else if(d)for(;e.parent.parent;)g=e=e.parent;else for(;e&&!g;)g=e.type===c?e:a,e=e.parent;return g}function P(){var b=this.get("item");return b?
b.index:a}function fa(){return this.index}function ga(b){var c,d=this,g=d.linkCtx,h=(d.ctx||{})[b];h===a&&g&&g.ctx&&(h=g.ctx[b]);h===a&&(h=La[b]);h&&l(h)&&!h._wrp&&(c=function(){return h.apply(this&&this!==e?this:d,arguments)},c._wrp=1,f(c,h));return c||h}function ua(b,c,d){var e,f,g=+d===d&&d,h=c.linkCtx;g&&(d=(g=c.tmpl.bnds[g-1])(c.data,c,F));e=d.args[0];if(b||g){e=h&&h.tag;e||(e={_:{inline:!h,bnd:g},tagName:":",cvt:b,flow:!0,tagCtx:d,_is:"tag"},h&&(h.tag=e,e.linkCtx=h,d.ctx=R(d.ctx,h.view.ctx)),
ca._lnk(e));for(f in d.props)Na.test(f)&&(e[f]=d.props[f]);d.view=c;e.ctx=d.ctx||{};delete d.ctx;c._.tag=e;e=va(e,e.convert||"true"!==b&&b)[0];e=g&&c._.onRender?c._.onRender(e,c,g):e;c._.tag=a}return e!=a?e:""}function va(a,b){var c=a.tagCtx,d=c.view,e=c.args;b=b&&(""+b===b?d.getRsc("converters",b)||la("Unknown converter: '"+b+"'"):b);e=e.length||c.index?b?e.slice():e:[d.data];b&&(b.depends&&(a.depends=ca.getDeps(a.depends,a,b.depends,b)),e[0]=b.apply(a,e));return e}function D(b,c){for(var d,e=this;d===
a&&e;)d=(d=e.tmpl[b])&&d[c],e=e.parent;return d||F[b][c]}function q(b,c,d,e,g){var h,l,B,k,m,n,z,E,s,p,t,q="",L=+e===e&&e,G=c.linkCtx||0,r=c.ctx,A=d||c.tmpl;"tag"===b._is&&(h=b,b=h.tagName,e=h.tagCtxs);h=h||G.tag;L&&(e=(E=A.bnds[L-1])(c.data,c,F));n=e.length;for(m=0;m<n;m++){m||d&&h||(s=c.getRsc("tags",b)||la("Unknown tag: {{"+b+"}}"));l=e[m];G.tag||(z=l.tmpl,z=l.content=z&&A.tmpls[z-1],f(l,{tmpl:(h?h:s).template||z,render:W,index:m,view:c,ctx:R(l.ctx,r)}));if(d=l.props.tmpl)d=""+d===d?c.getRsc("templates",
d)||Ba(d):d,l.tmpl=d;h||(s._ctr?(h=new s._ctr,p=!!h.init,h.attr=h.attr||s.attr||a):ca._lnk(h={render:s.render}),h._={inline:!G},G&&(G.attr=h.attr=G.attr||h.attr,G.tag=h,h.linkCtx=G),(h._.bnd=E||G.fn)?h._.arrVws={}:h.dataBoundOnly&&la("{^{"+b+"}} tag must be data-bound"),h.tagName=b,h.parent=k=r&&r.tag,h._is="tag",h._def=s,h.tagCtxs=e);if(!m)for(t in z=l.props)Na.test(t)&&(h[t]=z[t]);l.tag=h;h.dataMap&&h.tagCtxs&&(l.map=h.tagCtxs[m].map);h.flow||(z=l.ctx=l.ctx||{},l=h.parents=z.parentTags=r&&R(z.parentTags,
r.parentTags)||{},k&&(l[k.tagName]=k),z.tag=h)}c._.tag=h;h.rendering={};for(m=0;m<n;m++){l=h.tagCtx=h.tagCtxs[m];z=l.props;b=va(h,h.convert);if(e=z.dataMap||h.dataMap)if(b.length||z.dataMap){k=l.map;if(!k||k.src!==b[0]||g)k&&k.src&&k.unmap(),k=l.map=e.map(b[0],z);b=[k.tgt]}h.ctx=l.ctx;!m&&p&&(e=h.template,h.init(l,G,h.ctx),p=a,h.template!==e&&(h._.tmpl=h.template));k=a;if(e=h.render)k=e.apply(h,b);b=b.length?b:[c];k=k!==a?k:l.render(b[0],!0)||(g?a:"");q=q?q+(k||""):k}delete h.rendering;h.tagCtx=h.tagCtxs[0];
h.ctx=h.tagCtx.ctx;h._.inline&&(B=h.attr)&&B!==I&&(q="text"===B?ma.html(q):"");return L&&c._.onRender?c._.onRender(q,c,L):q}function m(a,b,c,d,e,f,g,h){var l="array"===b,k={key:0,useKey:l?0:1,id:""+Ma++,onRender:h,bnds:{}};this.data=d;this.tmpl=e;this.content=g;this.views=l?[]:{};this.parent=c;this.type=b;this._=k;this.linked=!!h;c?(b=c.views,d=c._,d.useKey?(b[k.key="_"+d.useKey++]=this,this.index=ba,this.getIndex=P,f=d.tag,k.bnd=l&&(!f||!!f._.bnd&&f)):b.splice(k.key=this.index=f,0,this),this.ctx=
a||c.ctx):this.ctx=a}function r(a){var b,c,d,e,f,g;for(b in S)if(e=S[b],(f=e.compile)&&(c=a[b+"s"]))for(d in c)(e=c[d]=f(d,c[d],a))&&(g=ca.onStore[b])&&g(d,e,f)}function Da(b,c,d){l(c)?c={depends:c.depends,render:c}:(c.baseTag&&(c.flow=!!c.flow,c=f(f({},c.baseTag),c)),(b=c.template)!==a&&(c.template=""+b===b?Ba[b]||Ba(b):b),!1!==c.init&&(b=c._ctr=function(){},(b.prototype=c).constructor=b));d&&(c._parentTmpl=d);return c}function V(c,d,f,g){function h(d){if(""+d===d||0<d.nodeType){try{k=0<d.nodeType?
d:!na.test(d)&&b&&b(e.document).find(d)[0]}catch(l){}k&&(d=Ba[c=c||k.getAttribute(da)],d||(c=c||"_"+ea++,k.setAttribute(da,c),d=Ba[c]=V(c,k.innerHTML,f,g)),k=a);return d}}var l,k;d=d||"";l=h(d);g=g||(d.markup?d:{});g.tmplName=c;f&&(g._parentTmpl=f);!l&&d.markup&&(l=h(d.markup))&&l.fn&&(l.debug!==d.debug||l.allowCode!==d.allowCode)&&(l=l.markup);if(l!==a)return c&&!f&&(w[c]=function(){return d.render.apply(d,arguments)}),l.fn||d.fn?l.fn&&(d=c&&c!==l.tmplName?R(g,l):l):(d=Ha(l,g),Ea(l.replace(x,"\\$&"),
d)),r(g),d}function aa(a){function b(c,d){this.tgt=a.getTgt(c,d)}l(a)&&(a={getTgt:a});a.baseMap&&(a=f(f({},a.baseMap),a));a.map=function(a,c){return new b(a,c)};return a}function Ha(a,b){var c,d=wa.wrapMap||{},e=f({markup:a,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:sa},b);b.htmlTag||(c=X.exec(a),e.htmlTag=c?c[1].toLowerCase():"");(c=d[e.htmlTag])&&c!==d.div&&(e.markup=t.trim(e.markup));return e}function oa(b,c){function d(f,g,h){var l,k,B;if(f&&"object"===typeof f&&!f.nodeType&&!f.markup&&
!f.getTgt){for(k in f)d(k,f[k],g);return F}g===a&&(g=f,f=a);f&&""+f!==f&&(h=g,g=f,f=a);B=h?h[e]=h[e]||{}:d;k=c.compile;null===g?f&&delete B[f]:(g=k?g=k(f,g,h):g,f&&(B[f]=g));k&&g&&(g._is=b);g&&(l=ca.onStore[b])&&l(f,g,k);return g}var e=b+"s";F[e]=d;S[b]=c}function ya(a,b){var c=this.jquery&&(this[0]||la('Unknown template: "'+this.selector+'"')),d=c.getAttribute(da);return sa.call(d?Ba[d]:Ba(c),a,b)}function qa(a,b,c){if(wa._dbgMode)try{return a.fn(b,c,F)}catch(d){return la(d,c)}return a.fn(b,c,F)}
function sa(a,b,c,d,e,f){return d||!this.fn._nvw||t.isArray(a)?W.call(this,a,b,c,d,e,f):qa(this,a,{tmpl:this})}function W(b,c,d,e,f,g){var h,l,k,B,n,z,E,s,p;k=this;var q="";!!c===c&&(d=c,c=a);!0===f&&(h=!0,f=0);k.tag?(z=k,k=k.tag,l=k._,n=k.tagName,s=l.tmpl||z.tmpl,p=k.attr&&k.attr!==I,c=R(c,k.ctx),E=z.content,!1===z.props.link&&(c=c||{},c.link=!1),e=e||z.view,b=arguments.length?b:e):s=k;if(s&&(!e&&b&&"view"===b._is&&(e=b),e&&(E=E||e.content,g=g||e._.onRender,b===e&&(b=e.data),c=R(c,e.ctx)),e&&e.data!==
a||((c=c||{}).root=b),s.fn||(s=Ba[s]||Ba(s)),s)){z=g=!1!==(c&&c.link)&&!p&&g;!0===g&&(z=a,g=e._.onRender);c=s.helpers?R(s.helpers,c):c;if(t.isArray(b)&&!d)for(B=h?e:f!==a&&e||new m(c,"array",e,b,s,f,E,g),h=0,l=b.length;h<l;h++)k=b[h],n=new m(c,"item",B,k,s,(f||0)+h,E,g),k=qa(s,k,n),q+=B._.onRender?B._.onRender(k,n):k;else{if(e||!s.fn._nvw)B=h?e:new m(c,n||"data",e,b,s,f,E,g),l&&!k.flow&&(B.tag=k);q+=qa(s,b,B)}return z?z(q,B):q}return""}function la(a,b,c){c=wa.onError(a,b,c);if(""+a===a)throw new ca.Err(c);
return!b.linkCtx&&b.linked?ma.html(c):c}function O(a){la("Syntax error\n"+a)}function Ea(a,b,c,d){function e(b){(b-=n)&&E.push(a.substr(n,b).replace(ka,"\\n"))}function f(b){b&&O('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}var g,h,l,k=b&&b.allowCode,m=[],n=0,R=[],E=m,s=[,,m];c&&(a=v+a+H);f(R[0]&&R[0][2].pop()[0]);a.replace(A,function(g,m,z,p,q,t,L,G,r,A,w,v){t&&(q=":",p=I);A=A||c;m=(m||c)&&[];var F="",C="",ra="",Fa="",Y="",Ka="",Oa="",Xa="";L=!A&&!q&&!L;z=z||(r=r||"#data",q);e(v);n=
v+g.length;G?k&&E.push(["*","\n"+r.replace(ia,"$1")+"\n"]):z?("else"===z&&(T.test(r)&&O('for "{{else if expr}}" use "{{else expr}}"'),m=s[7],s[8]=a.substring(s[8],v),s=R.pop(),E=s[2],L=!0),r&&B(r.replace(ka," "),m,b).replace(J,function(a,b,c,d,e,f,g,h){g?(C+=f+",",Fa+="'"+h+"',"):c?(ra+=d+f+",",Ka+=d+"'"+h+"',"):b?Oa+=f:("trigger"===e&&(Xa+=f),F+=d+f+",",Y+=d+"'"+h+"',",l=l||Na.test(e));return""}).slice(0,-1),h=[z,p||!!d||l||"",L&&[],[Fa.slice(0,-1),Y.slice(0,-1),Ka.slice(0,-1)],[C.slice(0,-1),F.slice(0,
-1),ra.slice(0,-1)],Oa,Xa,m||0],E.push(h),L&&(R.push(s),s=h,s[8]=n)):w&&(f(w!==s[0]&&"else"!==s[0]&&w),s[8]=a.substring(s[8],v),s=R.pop());f(!s&&w);E=s[2]});e(a.length);(n=m[m.length-1])&&f(""+n!==n&&+n[8]===n[8]&&n[0]);c?(g=z(m,a,c),g.paths=m[0][7]):g=z(m,b);g._nvw&&(g._nvw=!/[~#]/.test(a));return g}function Ia(a,b){return"\n\t"+(b?b+":{":"")+"args:["+a[0]+"]"+(a[1]||!b?",\n\tprops:{"+a[1]+"}":"")+(a[2]?",\n\tctx:{"+a[2]+"}":"")}function B(a,b,c){var d,e,f,g,h,l=0,k=c?c.links:b&&(b.links=b.links||
{}),B={},m={0:-1},n=0;return(a+(c?" ":"")).replace(/\)\^/g,").").replace(Ga,function(z,R,s,E,p,q,t,L,G,r,A,w,v,F,x,C,ra,Fa,Y,Ka){function Oa(a,c,C,g,ra,h,Fa,Y){return C&&(b&&("linkTo"===d&&(e=b._jsvto=b._jsvto||[],e.push(p)),d&&!f||b.push(p.slice(c.length))),"."!==C)?(a=(g?'view.hlp("'+g+'")':ra?"view":"data")+(Y?(h?"."+h:g?"":ra?"":"."+C)+(Fa||""):(Y=g?"":ra?h||"":C,"")),a+=Y?"."+Y:"",c+("view.data"===a.slice(0,9)?a.slice(5):a)):a}q=q||"";s=s||R||w;p=p||G;r=r||ra||"";if(!t||h||g)return!b||!C||h||
g||d&&!f&&!e||(C=m[n],Ka.length-1>Y-C&&(C=Ka.slice(C,Y+1),C=ja+":"+C+N,t=k[C],t||(k[C]=1,k[C]=t=Ea(C,c||b,!0),t.paths.push({_jsvOb:t})),1!==t&&(e||b).push({_jsvOb:t}))),h?(h=!v,h?z:'"'):g?(g=!F,g?z:'"'):(s?(n++,m[n]=Y++,s):"")+(Fa?n?"":(l=Ka.slice(l,Y),d?(d=f=e=!1,"\b"):"\b,")+l+(l=Y+z.length,"\b"):L?(n&&O(a),d=p,f=E,l=Y+z.length,p+":"):p?p.split("^").join(".").replace(Z,Oa)+(r?(B[++n]=!0,"."!==p.charAt(0)&&(m[n]=Y),r):q):q?q:x?(B[n--]=!1,x)+(r?(B[++n]=!0,r):""):A?(B[n]||O(a),","):R?"":(h=v,g=F,'"'));
O(a)})}function z(a,c,d){var e,f,g,h,l,k,B,m,n,R,s,E,p,q,t,L,G,r,A,w,v,F,x,N,H=0,C="",ra={},Fa=a.length;""+c===c?(t=d?'data-link="'+c.replace(ka," ").slice(1,-1)+'"':c,c=0):(t=c.tmplName||"unnamed",c.allowCode&&(ra.allowCode=!0),c.debug&&(ra.debug=!0),s=c.bnds,q=c.tmpls);for(e=0;e<Fa;e++)if(f=a[e],""+f===f)C+='\n+"'+f+'"';else if(g=f[0],"*"===g)C+=";\n"+f[1]+"\nret=ret";else{h=f[1];r=f[2];l=Ia(f[3],"params")+"},"+Ia(p=f[4]);x=f[5];N=f[6];A=f[8];(v="else"===g)||(H=0,s&&(E=f[7])&&(H=s.push(E)));(f=
":"===g)?h&&(g=h===I?">":h+g):(r&&(L=Ha(A,ra),L.tmplName=t+"/"+g,z(r,L),q.push(L)),v||(G=g,w=C,C=""),L=(L=a[e+1])&&"else"===L[0]);v=x?";\ntry{\nret+=":"\n+";if(f&&(E||N||h&&h!==I)){F="return {"+l+"};";x&&(F="try {\n"+F+"\n}catch(e){return {error: j._err(e,view,"+x+")}}\n");F=new Function("data,view,j,u"," // "+t+" "+H+" "+g+"\n"+F);F.paths=E;F._tag=g;if(d)return F;R=1}C+=f?(d?(x?"\ntry{\n":"")+"return ":v)+(R?(R=0,n=m=!0,'c("'+h+'",view,'+(E?(s[H-1]=F,H):"{"+l+"}")+")"):">"===g?(B=!0,"h("+p[0]+")"):
"((v="+p[0]+')!=null?v:"")'):(n=k=!0,"\n{view:view,tmpl:"+(r?q.length:"0")+","+l+"},");if(G&&!L){C="["+C.slice(0,-1)+"]";if(d||E)if(C=new Function("data,view,j,u"," // "+t+" "+H+" "+G+"\nreturn "+C+";"),E&&((s[H-1]=C).paths=E),C._tag=g,d)return C;C=w+v+'t("'+G+'",view,this,'+(H||C)+")";G=E=0}x&&(n=!0,C+=";\n}catch(e){ret"+(d?"urn ":"+=")+"j._err(e,view,"+x+");}\n"+(d?"":"ret=ret"))}C="// "+t+"\nj=j||"+(b?"jQuery.":"jsviews.")+"views;var v"+(k?",t=j._tag":"")+(m?",c=j._cnvt":"")+(B?",h=j.converters.html":
"")+(d?";\n":',ret=""\n')+(ra.debug?"debugger;":"")+C+(d?"\n":";\nreturn ret;");try{C=new Function("data,view,j,u",C)}catch(Y){O("Compiled template code:\n\n"+C+'\n: "'+Y.message+'"')}c&&(c.fn=C);n||(C._nvw=!0);return C}function R(a,b){return a&&a!==b?b?f(f({},b),a):a:b&&f({},b)}function E(a){return ha[a]||(ha[a]="&#"+a.charCodeAt(0)+";")}function L(a){var b,c,d=[];if("object"===typeof a)for(b in a)(c=a[b])&&c.toJSON&&!c.toJSON()||l(c)||d.push({key:b,prop:c});return d}function G(a){return null!=a?
M.test(a)&&(""+a).replace(pa,E)||a:""}if(!(b&&b.render||e.jsviews)){var t,s,A,na,ba,v="{",ja="{",N="}",H="}",Q="^",Z=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,Ga=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,ka=/[ \t]*(\r\n|\n|\r)/g,ia=/\\(['"])/g,
x=/['"\\]/g,J=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,T=/^if\s/,X=/<(\w+)[>\s]/,M=/[\x00`><\"'&]/,Na=/^on[A-Z]|^convert(Back)?$/,pa=/[\x00`><"'&]/g,ea=0,Ma=0,ha={"&":"&amp;","<":"&lt;",">":"&gt;","\x00":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},I="html",da="data-jsv-tmpl",w={},S={template:{compile:V},tag:{compile:Da},helper:{},converter:{}},F={jsviews:"v1.0.0-beta",settings:function(a){f(wa,a);h(wa._dbgMode);wa.jsv&&wa.jsv()},sub:{View:m,Err:g,tmplFn:Ea,cvt:va,
parse:B,extend:f,syntaxErr:O,onStore:{},_lnk:c},map:aa,_cnvt:ua,_tag:q,_err:la};(g.prototype=Error()).constructor=g;P.depends=function(){return[this.get("item"),"index"]};fa.depends=function(){return["index"]};m.prototype={get:Ja,getIndex:fa,getRsc:D,hlp:ga,_is:"view"};for(s in S)oa(s,S[s]);var Ba=F.templates,ma=F.converters,La=F.helpers,za=F.tags,ca=F.sub,wa=F.settings;b?(t=b,t.fn.render=ya,t.observable&&(f(ca,t.views.sub),F.map=t.views.map)):(t=e.jsviews={},t.isArray=Array&&Array.isArray||function(a){return"[object Array]"===
Object.prototype.toString.call(a)});t.render=w;t.views=F;t.templates=Ba=F.templates;wa({debugMode:h,delimiters:p,onError:function(b,c,d){c&&(b=d===a?"{Error: "+b+"}":l(d)?d(b,c):d);return b==a?"":b},_dbgMode:!0});za({"else":function(){},"if":{render:function(a){return this.rendering.done||!a&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render(this.tagCtx.view,!0))},onUpdate:function(a,b,c){var d;for(a=0;(d=this.tagCtxs[a])&&d.args.length;a++)if(d=
d.args[0],b=!d!==!c[a].args[0],!this.convert&&d||b)return b;return!1},flow:!0},"for":{render:function(b){var c,d=this.tagCtx,e="",f=0;if(!this.rendering.done){if(c=!arguments.length)b=d.view.data;b!==a&&(e+=d.render(b,c),f+=t.isArray(b)?b.length:1);if(this.rendering.done=f)this.selected=d.index}return e},flow:!0},include:{flow:!0},"*":{render:c,flow:!0}});za("props",{baseTag:za["for"],dataMap:aa(L)});ma({html:G,attr:G,url:function(b){return b!=a?encodeURI(""+b):null===b?b:""}});p()}})(this,this.jQuery);
(function(e,b,a){function c(a){return r(a)?new h(a):new d(a)}function d(a){this._data=a;return this}function h(a){this._data=a;return this}function g(a,b){a=r(a)?a:[a];var c,d,e=b,f=e,h=a.length,l=[];for(c=0;c<h;c++)d=a[c],W(d)?l=l.concat(g(d.call(b,b),b)):""+d!==d?(b=f=d,f!==e&&l.push(e=f)):(f!==e&&l.push(e=f),l.push(d));return l}function f(a,b){var c,d;for(c in a){d=!0;break}d||delete qa[b]}function l(b,c){if(!b.data||!b.data.off){var d,e,f,g=c.oldValue,h=c.value,k=b.data,m=k.observeAll,n=!k.cb.noArray,
p=k.paths;if(b.type===ya)(k.cb.array||k.cb).call(k,b,c);else if(k.prop===c.path||"*"===k.prop)g=typeof g===V&&(p[0]||n&&r(g))&&g,h=typeof(h=c.value)===V&&(p[0]||n&&r(h))&&h,m?(d=m._path+"."+c.path,e=m.filter,f=[m.parents().slice()],g&&P(n,m.ns,[g],p,k.cb,!0,e,f,d),h&&P(n,m.ns,[h],p,k.cb,a,e,f,d)):(g&&P(n,[g],p,k.cb,!0),h&&P(n,[h],p,k.cb)),k.cb(b,c)}}function p(){function d(a,c,e,f){var g,h=Ea(w),k=r(w)?[w]:w;a=M?a+"."+M:a;if(ba||f)h&&b(k).off(a,l);else{if(Q=h&&b._data(w))for(N=(Q=(Q=Q&&Q.events)&&
Q[e?ya:oa])&&Q.length;N--;)if((H=Q[N].data)&&H.cb._cId===v._cId&&H.ns===M){if(e)return;("*"===c&&H.prop!==c||H.prop===s)&&b(w).off(a,l)}c=e?{}:{fullPath:A,paths:c?[c]:[],prop:s};c.ns=M;c.cb=v;T&&(c.observeAll={_path:T,path:function(){g=J.length;return T.replace(/[[.]/g,function(a){g--;return"["===a?"["+b.inArray(J[g-1],J[g]):"."})},parents:function(){return J},filter:X,ns:M});b(k).on(a,null,c,l);ka&&(ka[b.data(w,"obId")||b.data(w,"obId",la++)]=w)}}function e(a,b){a._ob=Z(a,da);var c=da;return function(d,
e){var f=a._ob,g=b.length;typeof f===V&&(h(f,!0),(g||ea&&r(f))&&P(ea,[f],b,v,Z,!0));f=a._ob=Z(a,c);typeof f===V&&(h(f),(g||ea&&r(f))&&P(ea,[f],b,v,Z,[c]));v(d,e)}}function h(b,e,f,g){if(ea){var k=w,l=T;w=b;g&&(w=b[g],T+="."+g,X&&(w=c._fltr(g,b,T,X)));w&&(f||r(w))&&d(ya+".observe"+(v?".obs"+(ja=v._cId=v._cId||O++):""),a,!0,e);w=k;T=l}}var k,q,G,t,s,A,D,ba,v,ja,N,H,Q,Z,aa,ka,ia,x,J,T,X,M,fa,ga,ea=!1!=this,va=1,ha=sa,I=Array.apply(0,arguments);k=I.pop();var da=I.shift(),w=x=da,S=I.length;da+""===da&&
ea&&(M=da,da=w=x=I.shift(),S--);if(W(k))v=k;else if(k+""===k&&(T=k,J=I.pop(),X=I.pop(),k=I.pop(),S-=3),!0===k?ba=k:k&&(da=k,va=0),k=I[S-1],S&&k===a||W(k))v=I.pop(),S--;S&&W(I[S-1])&&(Z=v,v=I.pop(),S--);ha+=ba?v?".obs"+v._cId:"":".obs"+(ja=v._cId=v._cId||O++);ba||(ka=qa[ja]=qa[ja]||{});fa=M&&M.match(Ha)||[""];for(ga=fa.length;ga--;)for(M=fa[ga],r(x)?h(x,ba,!0):ba&&0===S&&x&&d(ha,""),k=ia=0;k<S;k++)if(A=I[k],""!==A){w=x;if(""+A===A){t=A.split("^");t[1]&&(ia=t[0].split(".").length,A=t.join("."),ia=A.split(".").length-
ia);if(Z&&(aa=Z(A,x))){S+=aa.length-1;m.apply(I,[k--,1].concat(aa));continue}t=A.split(".")}else va&&!W(A)&&(A._jsvOb&&(x=e(A,I.slice(k+1)),x.noArray=!ea,x._cId=v._cId,P(ea,[da],I.slice(0,k),x,Z),x=a,A=A._ob),w=A),x=A,t=[x];for(;w&&(s=t.shift())!==a;)if(typeof w===V){if(""+s===s){if(""===s)continue;if(t.length<ia+1&&!w.nodeType){if(!ba&&(Q=Ea(w)&&b._data(w))){N=(Q=(Q=Q.events)&&Q[oa])&&Q.length;for(G=0;N--;)!(H=Q[N].data)||H.cb!==v||H.ns!==M||H.prop!==s&&"*"!==H.prop||((q=t.join("."))&&H.paths.push(q),
G++);if(G){w=w[s];continue}}if("*"===s){!ba&&Q&&Q.length&&d(ha,"",!1,!0);W(w)?(D=w.depends)&&P(ea,[D],v,ba||da):d(ha,"");for(q in w)h(w,ba,a,q);break}else s&&d(ha+"."+s,t.join("."))}T&&(T+="."+s);s=w[s]}if(W(s)){(D=s.depends)&&P(ea,[w],g(D,w),v,Z,ba||[da]);break}w=s}h(w,ba)}ja&&f(ka,ja);return{cbId:ja,bnd:ka}}function Ja(){[].push.call(arguments,!0);return p.apply(this,arguments)}function P(){var a=[].concat.apply([],arguments);return p.apply(a.shift(),a)}function fa(a,b,c,d){a+""!==a&&(c=b,b=a,a=
"");ua(a,this._data,b,c,[],"root",d)}function ga(a,b,c){fa.call(this,a,b,c,!0)}function ua(b,d,e,f,g,h,k){function l(a,d){n=a.length;for(v=h+"[]";n--;)(D=c._fltr(n,a,v,f))&&ua(b,D,e,f||"",g.slice(),v,d)}function m(a,c){h=a.data.observeAll._path;var d=g;g[0]!==a.target&&(g=g.slice(),g.unshift(a.target));switch(c.change){case "insert":l(c.items);break;case "remove":l(c.items,!0);break;case "refresh":l(c.oldItems,!0);l(a.target);break;case "set":v=h+"."+c.path,ua(b,c.oldValue,e,0,g.slice(),v,!0),ua(b,
c.value,e,0,g.slice(),v)}e.apply(this,arguments);g=d}var n,q,v,D;if(typeof d===V){q=r(d)?"":"*";g.unshift(d);if(e){if(q||0!==f)m._cId=e._cId=e._cId||O++,p(b,d,q,m,k,f,g.slice(),h)}else p(b,d,q,a,k,f,g.slice(),h);if(q)for(n in d)"_"!==n.charAt(0)&&n!==Da&&(v=h+"."+n,(D=c._fltr(n,d,v,f))&&ua(b,D,e,f||0,g.slice(),v,k));else l(d,k)}}function va(a,b,c){return 0>c.indexOf(".")&&0>c.indexOf("[")&&b[a]}if(!b)throw"jsViews/jsObservable require jQuery";if(!b.observable){e=b.views=b.views||{jsviews:"v1.0.0-alpha",
sub:{}};var D=e.sub,q=b.event.special,m=[].splice,r=b.isArray,Da=b.expando,V="object",aa=parseInt,Ha=/\S+/g,oa=D.propChng=D.propChng||"propertyChange",ya=D.arrChng=D.arrChng||"arrayChange",qa=D._cbBnds=D._cbBnds||{},sa=oa+".observe",W=b.isFunction,la=1,O=1,Ea=b.hasData,Ia={};D.getDeps=function(){var a=arguments;return function(){for(var b,c,d=[],e=a.length;e--;)b=a[e--],(c=a[e])&&(d=d.concat(W(c)?c(b,b):c));return d}};b.observable=c;c._fltr=function(a,b,c,d){(a=d&&W(d)?d(a,b,c):b[a])&&(a=W(a)?a.set&&
a.call(b):a);return typeof a===V&&a};c.Object=d;c.Array=h;b.observe=c.observe=p;b.unobserve=c.unobserve=Ja;c._apply=P;d.prototype={_data:null,observeAll:fa,unobserveAll:ga,data:function(){return this._data},setProperty:function(b,c,d){var e,f=this._data;b=b||"";if(f)if(r(b))for(e=b.length;e--;)c=b[e],this.setProperty(c.name,c.value,d===a||d);else if(""+b!==b)for(e in b)this.setProperty(e,b[e],c);else if(b!==Da){for(b=b.split(".");f&&1<b.length;)f=f[b.shift()];f&&this._setProperty(f,b[0],c,d)}return this},
removeProperty:function(a){this.setProperty(a,Ia);return this},_setProperty:function(b,c,d,e){var f,g,h,k=c?b[c]:b;W(k)&&k.set&&(g=k,f=!0===k.set?k:k.set,k=k.call(b));if(k!==d||e&&k!=d)if(!(k instanceof Date)||k>d||k<d)f?(f.call(b,d),d=g.call(b)):(h=d===Ia)?(delete b[c],d=a):c&&(b[c]=d),this._trigger(b,{change:"set",path:c,value:d,oldValue:k,remove:h})},_trigger:function(a,c){b(a).triggerHandler(oa,c)}};h.prototype={_data:null,observeAll:fa,unobserveAll:ga,data:function(){return this._data},insert:function(a,
b){var c=this._data;1===arguments.length&&(b=a,a=c.length);a=aa(a);-1<a&&a<=c.length&&(b=r(b)?b:[b],b.length&&this._insert(a,b));return this},_insert:function(a,b){var c=this._data,d=c.length;m.apply(c,[a,0].concat(b));this._trigger({change:"insert",index:a,items:b},d)},remove:function(b,c){var d;d=this._data;b===a&&(b=d.length-1);b=aa(b);c=c?aa(c):0===c?0:1;-1<c&&-1<b&&(d=d.slice(b,b+c),(c=d.length)&&this._remove(b,c,d));return this},_remove:function(a,b,c){var d=this._data,e=d.length;d.splice(a,
b);this._trigger({change:"remove",index:a,items:c},e)},move:function(a,b,c){c=c?aa(c):0===c?0:1;a=aa(a);b=aa(b);if(0<c&&-1<a&&-1<b&&a!==b){var d=this._data.slice(a,a+c);(c=d.length)&&this._move(a,b,c,d)}return this},_move:function(a,b,c,d){var e=this._data,f=e.length;e.splice(a,c);e.splice.apply(e,[b,0].concat(d));this._trigger({change:"move",oldIndex:a,index:b,items:d},f)},refresh:function(a){var b=this._data.slice();this._refresh(b,a);return this},_refresh:function(a,b){var c=this._data,d=c.length;
m.apply(c,[0,c.length].concat(b));this._trigger({change:"refresh",oldItems:a},d)},_trigger:function(a,c){var d=this._data,e=d.length,d=b([d]);d.triggerHandler(ya,a);e!==c&&d.triggerHandler(oa,{change:"set",path:"length",value:e,oldValue:c})}};q[oa]=q[ya]={remove:function(a){var c,d,e,g,h=a.data;if(h&&(h.off=1,h=h.cb)&&(c=qa[h._cId])){a=b._data(this).events[a.type];for(e=a.length;e--&&!d;)d=(g=a[e].data)&&g.cb===h;d||(delete c[b.data(this,"obId")],f(c,h._cId))}}};e.map=function(d){function e(a,b,f){var g,
h=this;this.src&&this.unmap();"object"===typeof a&&(h.src=a,h.tgt=f||h.tgt||[],h.options=b||h.options,h.update(),d.obsSrc&&c(h.src).observeAll(h.obs=function(a,b){g||(g=1,d.obsSrc(h,a,b),g=0)},h.srcFlt),d.obsTgt&&c(h.tgt).observeAll(h.obt=function(a,b){g||(g=1,d.obsTgt(h,a,b),g=0)},h.tgtFlt))}(e.prototype={srcFlt:d.srcFlt||va,tgtFlt:d.tgtFlt||va,update:function(a){b.observable(this.tgt).refresh(d.getTgt(this.src,this.options=a||this.options))},unmap:function(){this.src&&(this.obs&&b.observable(this.src).unobserveAll(this.obs,
this.srcFlt),this.obt&&b.observable(this.tgt).unobserveAll(this.obt,this.tgtFlt),this.src=a)},map:e,_def:d}).constructor=e;W(d)&&(d={getTgt:d});d.baseMap&&(d=b.extend({},d.baseMap,d));d.map=function(a,b,c){return new e(a,b,c)};return d}}})(this,this.jQuery);(function(e,b,a){function c(c,d,e){var f,g,h,k,m,p,q,s,r,y=c.target,t=y._jsvBnd,u=/&(\d+)\+?/g;if(t)for(;h=u.exec(t);)if(h=Aa[h[1]])if(d=h.to){h=h.linkCtx;q=h.view;r=h.tag;p=b(y);m=q.hlp(S);s=q.hlp(F);g=l(y);f=Ra[g];e===a&&(e=M(g)?g(y):f?p[f]():
p.attr(g));f=d[1];d=d[0];f&&(k=M(f)?f:q.getRsc("converters",f));k&&(e=k.call(r,e));f=q.linkCtx;q.linkCtx=h;g={change:"change",oldValue:h._val,value:e};if(!(m&&!1===m.call(h,c,g)||r&&r.onBeforeChange&&!1===r.onBeforeChange(c,g)||e===a)&&(m=d[0],e!==a&&m)){m=m._jsvOb?m._ob:m;r&&(r._.chging=!0);ea(m).setProperty(d[2]||d[1],e);s&&s.call(h,c,g);if(r){if(r.onAfterChange)r.onAfterChange(c,g);delete r._.chging}h._val=e}q.linkCtx=f}}function d(c,d,e){var f,g,m,p=this.data,q=this.elem,s=this.convert;g=q.parentNode;
var r=this.view,t=r.linkCtx,v=r.hlp(S);r.linkCtx=this;if(g&&!(v&&d&&!1===v.call(this,c,d)||d&&"*"!==c.data.prop&&c.data.prop!==d.path)){d&&(this.eventArgs=d);if(d||this._initVal){delete this._initVal;g=e.call(r.tmpl,p,r,x);a:{var y=g,w=m=this.tag;f=this.attr||l(q,!0,s!==a);var u,z,A=w&&w.parentElem||this.elem;if(y!==a){z=b(A);f=w&&w.attr||f;M(y)&&ja(this.expr+": missing parens");"visible"===f&&(f="css-display");if(w=/^css-/.test(f)&&f.slice(4))u=b.style(A,w),+y===y&&(u=parseInt(u));else if("link"!==
f){if("value"===f)A.type===La&&(u=z.prop(f=ma));else if(f===za)if(A.value===""+y)u=z.prop(ma);else break a;u===a&&(u=(u=Ra[f])?z[u]():z.attr(f))}this._val=u}}if(g&&g.error!==a)g=g.error;else if(m){g=g[0]?g:[g];e=d&&m.onUpdate&&!1===m.onUpdate(c,d,g);qa(m,g);if(e||f===ca){f===U&&m.onBeforeLink&&m.onBeforeLink();aa(m,m.tagCtx);P(this,p,q);r.linkCtx=t;return}if(m._.chging)return;g=":"===m.tagName?x._cnvt(m.cvt,r,g[0]):x._tag(m,r,r.tmpl,g,!0)}else e._tag&&(g=(s=""===s?wa:s)?x._cnvt(s,r,g):x._tag(e._tag,
r,r.tmpl,g,!0),m=this.tag,f=this.attr||f);h(g,this,f,m)&&d&&(v=r.hlp(F))&&v.call(this,c,d);m&&aa(m,m.tagCtx)}P(this,p,q);r.linkCtx=t}}function h(c,d,f,g){var k,l,m,n,p,q,r=c!==a,s=d.data,y=g&&g.parentElem||d.elem,t=b(y),u=d.view;q=d._val;var v=u.ctx,w=u.linkCtx,x=g||f===U;g&&(g.parentElem=g.parentElem||d.expr||g._elCnt?y:y.parentNode,l=g._prv,m=g._nxt);if(r){if(/^css-/.test(f))"visible"===d.attr&&(d=(y.currentStyle||eb.call(e,y,"")).display,c?(c=y._jsvd||d,c!==ca||(c=bb[k=y.nodeName])||(d=ia.createElement(k),
ia.body.appendChild(d),c=bb[k]=(d.currentStyle||eb.call(e,d,"")).display,ia.body.removeChild(d))):(y._jsvd=d,c=ca)),(x=x||q!==c)&&b.style(y,f.slice(4),c);else if("link"!==f){if(f===ma)p=1,c=c&&"false"!==c;else if(f===za)if(y.value===""+c)c=!0,p=1,f=ma;else{P(d,s,y);return}else if("selected"===f||"disabled"===f||"multiple"===f||"readonly"===f)c=c&&"false"!==c?f:null;if(k=Ra[f])if(f===U){u.linkCtx=d;u.ctx=d.ctx;if(g&&g._.inline){f=g.nodes(!0);if(g._elCnt){if(l&&l!==m)B(l,m,y,g._tgId,"^",!0);else if(n=
y._dfr)q=g._tgId+"^",k=n.indexOf("#"+q)+1,p=n.indexOf("/"+q),k&&0<p&&(k+=q.length,p>k&&(y._dfr=n.slice(0,k)+n.slice(p),z(n.slice(k,p))));l=l?l.previousSibling:m?m.previousSibling:y.lastChild}b(f).remove();if(g&&g.onBeforeLink)g.onBeforeLink();n=u.link(u.data,y,l,m,c,g&&{tag:g._tgId,lazyLink:g.tagCtx.props.lazyLink})}else{r&&t.empty();if(g&&g.onBeforeLink)g.onBeforeLink();r&&(n=u.link(s,y,l,m,c,g&&{tag:g._tgId}))}u.linkCtx=w;u.ctx=v}else{if(x=x||q!==c)if("text"===f&&y.children&&!y.children[0])y.textContent!==
a?y.textContent=c:y.innerText=null===c?"":c;else t[k](c)}else if(x=x||q!==c)t[p?"prop":"attr"](f,c!==a||p?c:null);d._val=c}return n||x}if(f===U&&g&&g.onBeforeLink)g.onBeforeLink()}function g(a,b){var c=this.hlp(S),d=this.hlp(F);if(!c||!1!==c.call(this,a,b)){if(b){var c=b.index,e=b.items;switch(b.change){case "insert":this.addViews(c,e);break;case "remove":this.removeViews(c,e.length);break;case "move":this.refresh();break;case "refresh":this.refresh()}}d&&d.call(this,a,b)}}function f(c){var d,e=c.data,
f=c._.bnd;if(!c._.useKey&&f){if(d=c._.bndArr)b([d[1]]).off(da,d[0]),c._.bndArr=a;f!==!!f&&f._.inline?e?f._.arrVws[c._.id]=c:delete f._.arrVws[c._.id]:e&&(d=function(a){a.data&&a.data.off||g.apply(c,arguments)},b([e]).on(da,d),c._.bndArr=[d,e])}}function l(a,b,c){var d=a.nodeName.toLowerCase(),e=T.merge[d]||a.contentEditable===wa&&{to:U,from:U};return e?b?"input"===d&&a.type===za?za:e.to:e.from:b?c?"text":U:""}function p(c,d,e,f,g,h,k){var l,m,n,q=c.parentElem,r=c._prv,s=c._nxt,t=c._elCnt;r&&r.parentNode!==
q&&ja("Missing parentNode");if(k)for(n in m=c.nodes(),t&&r&&r!==s&&B(r,s,q,c._.id,"_",!0),c.removeViews(a,a,!0),f=s,t&&(r=r?r.previousSibling:s?s.previousSibling:q.lastChild),b(m).remove(),c._.bnds)W(n);else{if(d){l=f[d-1];if(!l)return!1;r=l._nxt}t?r=(f=r)?f.previousSibling:q.lastChild:f=r.nextSibling}d=e.render(g,h,c._.useKey&&k,c,k||d,!0);c.link(g,q,r,f,d,l)}function Ja(b,c,d){var e;d?(e="^`",c=c._.tag||{_:{inline:!0,bnd:d},tagCtx:{view:c},flow:!0},d=c._tgId,d||(Aa[d=cb++]=c,c._tgId=""+d)):(e="_`",
ka[d=c._.id]=c);return"#"+d+e+(b!=a?b:"")+"/"+d+e}function P(b,c,d){var e,f=b.tag,g=b.convertBack,h=[],k=b._bndId||""+cb++,l=b._hdlr;delete b._bndId;f&&(h=f.depends||h,h=M(h)?f.depends(f):h,e=f.linkedElem);if(!b._depends||""+b._depends!==""+h)if(b._depends&&ea._apply(!1,[c],b._depends,l,!0),c=ea._apply(!1,[c],b.fn.paths,h,l,b._ctxCb),c.elem=d,c.linkCtx=b,c._tgId=k,d._jsvBnd=d._jsvBnd||"",d._jsvBnd+="&"+k,b._depends=h,b.view._.bnds[k]=k,Aa[k]=c,e&&(c.to=[[],g]),(e||g!==a)&&ya(c,f&&f.convertBack||g),
f){if(f.onAfterBind)f.onAfterBind(c);f.flow||f._.inline||(d.setAttribute(ha,(d.getAttribute(ha)||"")+"#"+k+"^/"+k+"^"),f._tgId=""+k)}if(e&&e[0])for(f._.radio&&(e=e.children("input[type=radio]")),b=e.length;b--;)e[b]._jsvBnd=e[b]._jsvBnd||d._jsvBnd+"+",e[b]._jsvLnkdEl=f}function fa(a,b,c,d,e,f,g){return ga(this,a,b,c,d,e,f,g)}function ga(d,e,f,g,h,k,l,m){if(d&&e){e=e.jquery?e:b(e);G||(G=ia.body,b(G).on(w,c).on("blur","[contenteditable]",c));for(var n,q,p,s,y,v,u,x=Ja,z=g&&"replace"===g.target,A=e.length;A--;)if(u=
e[A],""+d===d)y=t(u),n=y.ctx,y.ctx=g,va(d,u,y,f),y.ctx=n;else{k=k||t(u);if(d.markup!==a)!1===k.link&&(g=g||{},g.link=x=!1),z&&(v=u.parentNode),p=d.render(f,g,h,k,a,x),v?(l=u.previousSibling,m=u.nextSibling,b.cleanData([u],!0),v.removeChild(u),u=v):(l=m=a,b(u).empty());else if(!0!==d)break;if(u._dfr&&!m){s=r(u._dfr,1,db);n=0;for(q=s.length;n<q;n++)y=s[n],(y=ka[y.id])&&y.data!==a&&y.parent.removeViews(y._.key,a,!0);u._dfr=""}k.link(f,u,l,m,p,a,g)}}return e}function ua(c,d,e,h,k,l,m,n){function p(b,
c,d,e,f,g,h,C,l,m,ra,n,Fa){var Y,q="";if(Fa)return y=0,b;u=C||l||"";e=e||m;d=d||n;la&&!d&&(e||u||g)&&(la=a,O=na.shift());if(e=e||d)y=0,la=a,ga&&(d||n?Wa[O]||/;svg;|;math;/.test(";"+na.join(";")+";")||(Y="'<"+O+".../"):Wa[e]?Y="'</"+e:na.length&&e===O||(Y="Mismatch: '</"+e),Y&&Ta(Y+">' in:\n"+k)),oa=xa,O=na.shift(),xa=Va[O],m=m?"</"+m+">":"",oa&&(ta+=Ca,Ca="",xa?ta+="-":(q=m+Za+"@"+ta+Ya+(ra||""),ta=Ea.shift()));xa?(g?Ca+=g:c=m||n||"",u&&(c+=u,Ca&&(c+=" "+ha+'="'+Ca+'"',Ca=""))):c=g?c+q+f+Za+g+Ya+
h+u:q||b;y&&g&&Ta(" No {^{ tags within elem markup ("+y+' ). Use data-link="..."');u&&(y=u,na.unshift(O),O=u.slice(1),na[0]&&na[0]===jb[O]&&ja("Parent of <tr> must be <tbody>"),la=Wa[O],(xa=Va[O])&&!oa&&(Ea.unshift(ta),ta=""),oa=xa,ta&&xa&&(ta+="+"));return c}function s(b,c){var e,h,k,C,l=[];if(b){"@"===b._tkns.charAt(0)&&(c=K.previousSibling,K.parentNode.removeChild(K),K=a);for(G=b.length;G--;){E=b[G];k=E.ch;if(e=E.path)for(D=e.length-1;h=e.charAt(D--);)"+"===h?"-"===e.charAt(D)?(D--,c=c.previousSibling):
c=c.parentNode:c=c.lastChild;if("^"===k){if(u=Aa[e=E.id]){h=c&&(!K||K.parentNode!==c);if(!K||h)u.parentElem=c;E.elCnt&&h&&(c._dfr=(E.open?"#":"/")+e+k+(c._dfr||""));l.push([h?null:K,E])}}else if(B=ka[e=E.id])(B.parentElem||(B.parentElem=c||K&&K.parentNode||d,B._.onRender=Ja,B._.onArrayChange=g,f(B)),h=B.parentElem,E.open)?(B._elCnt=E.elCnt,c?c._dfr="#"+e+k+(c._dfr||""):(B._prv||(h._dfr=q(h._dfr,"#"+e+k)),B._prv=K)):(!c||K&&K.parentNode===c?K&&(B._nxt||(h._dfr=q(h._dfr,"/"+e+k)),B._nxt=K):(c._dfr=
"/"+e+k+(c._dfr||""),B._nxt=a),z=B.linkCtx,(C=B.ctx&&B.ctx.onAfterCreate||Ia)&&C.call(z,B))}for(G=l.length;G--;)sa.push(l[G])}return!b||b.elCnt}function w(a){var b,c;if(a)for(G=a.length,D=0;D<G;D++)if(E=a[D],M.id)M.id=M.id!==E.id&&M.id;else if(c=u=Aa[E.id].linkCtx.tag,!u.flow){if(!da){for(b=1;c=c.parent;)b++;ba=ba||b}!da&&b!==ba||ea&&u.tagName!==ea||W.push(u)}}function x(){H=Ua?d.querySelectorAll(Q):b(Q,d).get();F=H.length;e&&e.innerHTML&&(L=Ua?e.querySelectorAll(Q):b(Q,e).get(),e=L.length?L[L.length-
1]:e);for(A=ba=0;A<F;A++)if(K=H[A],e&&!ya)ya=K===e;else if(h&&K===h)break;else K.parentNode&&Ha(r(K,a,W&&ob))&&!M&&K.getAttribute(N)&&sa.push([K]);ua===Ga&&k===a&&d.getAttribute(N)&&sa.push([d]);Da(e,xa);Da(h,xa);if(!M){if(xa&&ta+Ca&&(K=h,ta&&(h?s(r(ta+"+",1),h):s(r(ta,1),d)),s(r(Ca,1),d),h)){U=h.getAttribute(ha);if(F=U.indexOf(qa)+1)U=U.slice(F+qa.length-1);h.setAttribute(ha,Ca+U)}F=sa.length;for(A=0;A<F;A++)if(K=sa[A],J=K[1],K=K[0],J){if(u=Aa[J.id]){if(z=u.linkCtx)u=z.tag,u.linkCtx=z;J.open?(K&&
(u.parentElem=K.parentNode,u._prv=K),u._elCnt=J.elCnt,!u||u.onBeforeLink&&!1===u.onBeforeLink()||u._.bound||(u._.bound=!0,B=u.tagCtx.view,va(a,u._prv,B,c,J.id)),u._.linking=!0):(u._nxt=K,u._.linking&&(fa=u.tagCtx,B=fa.view,delete u._.linking,u._.bound||(u._.bound=!0,va(a,u._prv,B,c,J.id)),aa(u,fa)))}}else B=t(K),va(K.getAttribute(N),K,B,c,a,m)}pa&&pa.resolve()}var y,z,u,A,F,D,G,H,K,B,E,J,L,I,S,R,P,W,da,ea,fa,ga,ba,M,X,ca,O,la,ma,U,xa,oa,Ca,qa,ya,pa,ua=this,za=ua._.id+"_",ta="",sa=[],na=[],Ea=[],Ia=
ua.hlp(Ba),Ha=s;l&&(pa=l.lazyLink&&b.Deferred(),l.tmpl?S="/"+l._.id+"_":(M=l.get,l.tag&&(za=l.tag+"^",l=!0)),l=!0===l);M&&(Ha=w,W=M.tags,da=M.deep,ea=M.name);d=d?""+d===d?b(d)[0]:d.jquery?d[0]:d:ua.parentElem||ia.body;ga=!T.noValidate&&d.contentEditable!==wa;O=d.tagName.toLowerCase();xa=!!Va[O];e=e&&V(e,xa);h=h&&V(h,xa)||null;if(k!=a){ma=X=ia.createElement("div");qa=Ca="";ca="http://www.w3.org/2000/svg"===d.namespaceURI?"svg_ns":(I=hb.exec(k))&&I[1]||"";v&&I&&I[2]&&ja("Unsupported: "+I[2]);if(xa){for(P=
h;P&&!(R=r(P));)P=P.nextSibling;if(U=R?R._tkns:d._dfr){I=S||"";if(l||!S)I+="#"+za;D=U.indexOf(I);D+1&&(D+=I.length,qa=Ca=U.slice(0,D),U=U.slice(D),R?P.setAttribute(ha,U):d._dfr=U)}}la=a;k=(""+k).replace(lb,p);ga&&na.length&&Ta("Mismatched '<"+O+"...>' in:\n"+k);if(n)return;ab.appendChild(X);ca=Z[ca]||Z.div;l=ca[0];for(ma.innerHTML=ca[1]+k+ca[2];l--;)ma=ma.lastChild;ab.removeChild(X);for(X=ia.createDocumentFragment();ca=ma.firstChild;)X.appendChild(ca);d.insertBefore(X,h)}pa?setTimeout(x,0):x();return pa&&
pa.promise()}function va(c,d,e,f,g,h){var k,m,q,p,r,t,y,v;f=e.data===a?f||{}:e.data;if(g)h=Aa[g],h=h.linkCtx?h.linkCtx.tag:h,y=h.linkCtx||{data:f,elem:h._elCnt?h.parentElem:d,view:e,ctx:e.ctx,attr:U,fn:h._.bnd,tag:h,_bndId:g},D(y,y.fn);else if(c&&d)for(k=e.tmpl,q=l(d),c=b.trim(c).replace(ib,"\\$&"),c=c.slice(-1)!==na?A+":"+c+(q?":":"")+na:c,s.lastIndex=0;m=s.exec(c);)v=s.lastIndex,q=g?U:m[1],t=m[3],r=m[10],p=a,y={data:f,elem:d,view:e,ctx:h||e.ctx,attr:q,_initVal:!m[2]},m[6]&&(!q&&(p=/:([\w$]*)$/.exec(r))&&
(p=p[1],p!==a&&(r=-p.length-1,t=t.slice(0,r-1)+na)),null===p&&(p=a),y.convert=m[5]||""),y.expr=q+t,(m=k.links[t])||(k.links[t]=m=J.tmplFn(t,k,!0,p)),y.fn=m,q||p===a||(y.convertBack=p),D(y,m),s.lastIndex=v}function D(a,b){function c(e,f){d.call(a,e,f,b)}c.noArray=!0;a._ctxCb=Ea(a.view);a._hdlr=c;c(!0)}function q(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function m(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):1===a.nodeType&&a.getAttribute(ha)||
"")}function r(a,b,c){function d(a,b,c,g,h,k){f.push({elCnt:e,id:g,ch:h,open:b,close:c,path:k,token:a})}var e,f=[];if(b=b?a:m(a))return f.elCnt=!a.type,e="@"===b.charAt(0)||!a.type,f._tkns=b,b.replace(c||pb,d),f}function Da(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):b&&""===a.getAttribute(N)&&a.removeAttribute(N))}function V(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;c&&(1!==c.nodeType?(c=ia.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,a)):m(c)||c.getAttribute(N)||
c.setAttribute(N,""));return c}function aa(c,d){var e,f,g,h,k,l,m;e=d.view;var n=c.linkCtx=c.linkCtx||{tag:c,data:e.data,view:e,ctx:e.ctx};if(c.onAfterLink)c.onAfterLink(d,n);if(f=(e=c.targetTag?c.targetTag.linkedElem:c.linkedElem)&&e[0]){if(g=c._.radio)e=e.children("input[type=radio]");if(g||!c._.chging){h=J.cvt(c,c.convert)[0];if(g||f!==n.elem){for(m=e.length;m--;){f=e[m];k=f._jsvLnkdEl;if(c._.inline&&(!k||k!==c&&k.targetTag!==c))for(f._jsvLnkdEl=c,k=n.elem?n.elem._jsvBnd:c._prv._jsvBnd,f._jsvBnd=
k+"+",k=k.slice(1).split("&"),l=k.length;l--;)ya(Aa[k[l]],c.convertBack);g&&(f[ma]=h===f.value)}n._val=h}h!==a&&(g||f.value===a?f.contentEditable===wa&&(f.innerHTML=h):f.type===La?f[ma]=h&&"false"!==h:e.val(h))}}if(f=f||":"===c.tagName&&n.elem)g=f._jsvTr,h=d.props.trigger,g!==h&&(f._jsvTr=h,e=e||b(f),oa(e,g,"off"),oa(e,h,"on"))}function Ha(a){setTimeout(function(){c(a)},0)}function oa(a,b,d){b&&a[d](!0===b?"keydown":b,!0===b?Ha:c)}function ya(a,b){var c,d,e,f,g,h=a.linkCtx,k=h.data,l=h.fn.paths;if(a){if(c=
l._jsvto)l=c;for(d=l.length;d&&""+(f=l[--d])!==f;);!f||h.tag&&!h.tag.tagCtx.args.length?a.to=[[],b]:(f=f.split("^").join("."),a.to="."===f.charAt(0)?[[g=l[d-1],f.slice(1)],b]:[h._ctxCb(e=d?l[0].split("^").join("."):f)||[k,e],b],c&&g&&(a.to[0][0]=h._ctxCb(g,k)))}}function qa(a,c){var d,e;d=a.tagCtx.view;var f=a.tagCtxs||[a.tagCtx],g=f.length,h=!c;for(c=c||a._.bnd.call(d.tmpl,(a.linkCtx||d).data,d,x);g--;)d=f[g],e=c[g],b.observable(d.props).setProperty(e.props),X(d.ctx,e.ctx),d.args=e.args,h&&(d.tmpl=
e.tmpl);return f}function sa(a){for(var b,c,d=[],e=b=a.length;e--;)d.push(a[e]);for(e=b;e--;)if(b=d[e],b.parentNode){if(c=b._jsvBnd)for(c=c.slice(1).split("&"),b._jsvBnd="",a=c.length;a--;)W(c[a],b._jsvLnkdEl,b);z(m(b)+(b._dfr||""))}}function W(c,d,e){var f,g,h,k=Aa[c];if(d)e===d.linkedElem[0]&&(delete e._jsvLnkdEl,delete d.linkedElem);else if(k){delete Aa[c];for(f in k.bnd)d=k.bnd[f],e=".obs"+k.cbId,b.isArray(d)?b([d]).off(da+e).off(I+e):b(d).off(I+e),delete k.bnd[f];if(f=k.linkCtx){if(d=f.tag){if(e=
d.tagCtxs)for(g=e.length;g--;)(h=e[g].map)&&h.unmap();if(g=(e=(h=d.linkedElem)&&h[0]||f.elem)&&e._jsvTr)oa(h||b(e),g,"off"),e._jsvTr=a;if(d.onDispose)d.onDispose();d._elCnt||(d._prv&&d._prv.parentNode.removeChild(d._prv),d._nxt&&d._nxt.parentNode.removeChild(d._nxt))}delete f.view._.bnds[c]}delete J._cbBnds[k.cbId]}}function la(d,e){d===a?(G&&(b(G).off(w,c).off("blur","[contenteditable]",c),G=a),d=!0,Ga.removeViews(),sa(ia.body.getElementsByTagName("*"))):e&&!0===d&&(e=e.jquery?e:b(e),e.each(function(){for(var b;(b=
t(this,!0))&&b.parent;)b.parent.removeViews(b._.key,a,!0);sa(this.getElementsByTagName("*"));sa([this])}));return e}function O(a,b){return la(this,a,b)}function Ea(a){a=a||b.view();return function(b,c){var d,e,f=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,c,a,x);if("~"===b.charAt(0)){if("~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d))return e?[e,d.join("."),c]:[];b=b.slice(1).split(".");if(c=a.hlp(b.shift()))b.length&&f.unshift(b.join(".")),f.unshift(c);
return c?f:[]}if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(kb,""),c]}}}function Ia(a){return a.type===La?a[ma]:a.value}function B(a,b,c,d,e,f){var g,h,k,l,m,n,p=0,s=a===b;if(a){k=r(a)||[];g=0;for(h=k.length;g<h;g++){l=k[g];n=l.id;if(n===d&&l.ch===e)if(f)h=0;else break;s||(m="_"===l.ch?ka[n]:Aa[n].linkCtx.tag,l.open?m._prv=b:l.close&&(m._nxt=b));p+=n.length+2}p&&a.setAttribute(ha,a.getAttribute(ha).slice(p));a=b?b.getAttribute(ha):c._dfr;if(h=a.indexOf("/"+d+e)+1)a=k._tkns.slice(0,p)+a.slice(h+
(f?-1:d.length+1));a&&(b?b.setAttribute(ha,a):c._dfr=a)}else c._dfr=q(c._dfr,"#"+d+e),f||b||(c._dfr=q(c._dfr,"/"+d+e))}function z(b){var c,d,e;if(e=r(b,1,mb))for(b=0,c=e.length;b<c;b++)d=e[b],"_"===d.ch?(d=ka[d.id])&&d.data!==a&&d.parent.removeViews(d._.key,a,!0):W(d.id)}function R(a,c,d){switch(d.change){case "set":a=a.tgt;for(c=a.length;c--&&a[c].key!==d.path;);-1===c?d.path&&b.observable(a).insert({key:d.path,prop:d.value}):d.remove?b.observable(a).remove(c):b.observable(a[c]).setProperty("prop",
d.value)}}function E(a,c,d){a=a.src;switch(d.change){case "set":"prop"===d.path?b.observable(a).setProperty(c.target.key,d.value):(b.observable(a).setProperty(d.oldValue,null),delete a[d.oldValue],b.observable(a).setProperty(d.value,c.target.prop));break;case "remove":c=d.items[0];b.observable(a).removeProperty(c.key);delete a[c.key];break;case "insert":c=d.items[0],c.key&&b.observable(a).setProperty(c.key,c.prop)}}function L(a,b,c){return 0>c.indexOf(".")&&b[a]}var G,t,s,A,na,ba,v,ja,N,H,Q,Z,Ga,
ka,ia=e.document,x=b.views,J=x.sub,T=x.settings,X=J.extend,M=b.isFunction,Na=x.converters,pa=x.tags,ea=b.observable,Ma=ea.observe,ha="data-jsv",I=J.propChng=J.propChng||"propertyChange",da=J.arrChng=J.arrChng||"arrayChange",w="change.jsv",S="onBeforeChange",F="onAfterChange",Ba="onAfterCreate",ma="checked",La="checkbox",za="radio",ca="none",wa="true",Ya='">\x3c/script>',Za='<script type="jsv',Qa="script,["+ha+"]",U="html",Ra={value:"val",input:"val",html:U,text:"text"},$a={from:"value",to:"value"},
Sa=0,fb=b.cleanData,gb=T.delimiters,Ta=J.syntaxErr,hb=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,ib=/['"\\]/g,ab=ia.createDocumentFragment(),Ua=ia.querySelector,Va={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},jb={tr:"table"},Wa={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},bb={},Aa={},cb=1,kb=/^#(view\.?)?/,lb=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,
db=/(#)()(\d+)(_)/g,mb=/(#)()(\d+)([_^])/g,nb=/(?:(#)|(\/))(\d+)(_)/g,ob=/(#)()(\d+)(\^)/g,pb=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,eb=e.getComputedStyle;if(!b)throw"JsViews requires jQuery";if(!b.views)throw"JsViews requires JsRender";if(!b.observable)throw"JsViews requires jquery.observable";b.link||(H={contents:function(c,d){c!==!!c&&(d=c,c=a);var e,f=b(this.nodes());f[0]&&(e=d?f.filter(d):f,f=c&&d?e.add(f.find(d)):e);return f},nodes:function(a,b,c){var d=this._elCnt,e=!b&&d,f=[];b=b||this._prv;
c=c||this._nxt;for(b=e?b===this._nxt?this.parentElem.lastSibling:b:!1===this._.inline?b||this.linkCtx.elem.firstChild:b&&b.nextSibling;b&&(!c||b!==c);)(a||d||"SCRIPT"!==b.tagName)&&f.push(b),b=b.nextSibling;return f},childTags:function(b,c){b!==!!b&&(c=b,b=a);var d=this.link?this:this.tagCtx.view,e=this._prv,f=this._elCnt,g=[];e&&d.link(a,this.parentElem,f?e.previousSibling:e,this._nxt,a,{get:{tags:g,deep:b,name:c,id:f&&this._tgId}});return g},refresh:function(b){var c,d=this.linkCtx,e=this.tagCtx.view;
this.disposed&&ja("Removed tag");b===a&&(b=x._tag(this,e,e.tmpl,qa(this),!0));b+""===b&&(c=this._.inline?U:d.attr||l(this.parentElem,!0),c=h(b,d,c,this));aa(this,this.tagCtx);return c||this},update:function(b){var d=this.linkedElem;d&&c({target:d[0]},a,b)}},J.onStore.template=function(a,c){c.link=fa;c.unlink=O;a&&(b.link[a]=function(){return fa.apply(c,arguments)},b.unlink[a]=function(){return O.apply(c,arguments)})},J.onStore.tag=function(a,b){J._lnk(b)},J._lnk=function(a){return X(a,H)},J.viewInfos=
r,(T.delimiters=function(){var a=gb.apply(x,arguments);A=a[1];na=a[2];ba=a[4];s=RegExp("(?:^|\\s*)([\\w-]*)(\\"+ba+")?(\\"+A+J.rTag+"\\"+na+")","g");return this})(),X(J._lnk(J.View.prototype),{addViews:function(a,b,c){var d,e=b.length,f=this.views;if(!this._.useKey&&e&&(c=this.tmpl)&&(d=f.length+e,!1!==p(this,a,c,f,b,this.ctx)))for(a+=e;a<d;a++)ea(f[a]).setProperty("index",a);return this},removeViews:function(c,d,e){function g(c){var d,h,k,l,n,p=m[c];if(p&&p.link){c=p._.id;e||(n=p.nodes());p.removeViews(a,
a,!0);p.data=a;k=p._prv;l=p._nxt;h=p.parentElem;e||(p._elCnt&&B(k,l,h,c,"_"),b(n).remove());if(!p._elCnt)try{k.parentNode.removeChild(k),l.parentNode.removeChild(l)}catch(q){}f(p);for(d in p._.bnds)W(d);delete ka[c]}}var h,k,l=!this._.useKey,m=this.views;l&&(k=m.length);if(c===a)if(l){for(h=k;h--;)g(h);this.views=[]}else{for(h in m)g(h);this.views={}}else if(d===a&&(l?d=1:(g(c),delete m[c])),l&&d){for(h=c+d;h-- >c;)g(h);m.splice(c,d);if(k=m.length)for(;c<k;)ea(m[c]).setProperty("index",c++)}return this},
refresh:function(a){var b=this.parent;b&&(p(this,this.index,this.tmpl,b.views,this.data,a,!0),f(this));return this},link:ua}),ka={0:Ga=new J.View(a,"top")},Na.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),c=c.replace(RegExp("(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))"),"$2"),a=c+(a?(c&&" ")+d:""));return a},pa("on",{attr:ca,onAfterLink:function(c,d){for(var e,f,g=0,h=c.args,k=c.props.data,l=c.view,m=c.props.context;!M(e=h[g++]););
f=h.slice(g);h=h.slice(0,g-1);m||(m=(m=/^(.*)[\.^][\w$]+$/.exec(c.params.args.slice(-f.length-1)[0]))&&J.tmplFn("{:"+m[1]+"}",l.tmpl,!0)(d.data,l));if(e){if(this._evs)this.onDispose();b(d.elem).on(this._evs=h[0]||"click",this._sel=h[1],k==a?null:k,this._hlr=function(a){return e.apply(m||d.data,[].concat(f,a,{change:a.type,view:l,linkCtx:d}))})}},onDispose:function(){b(this.parentElem).off(this._evs,this._sel,this._hlr)},flow:!0}),X(pa["for"],{onArrayChange:function(a,b){var c,d=b.change;if(this.tagCtxs[1]&&
("insert"===d&&a.target.length===b.items.length||"remove"===d&&!a.target.length||"refresh"===d&&!b.oldItems.length!==!a.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var a,c,d,e,f=this,g=f._ars||{},h=f.tagCtxs,k=h.length,l=f.selected||0;for(a=0;a<=l;a++)c=h[a],e=c.map?c.map.tgt:c.args.length?c.args[0]:c.view.data,(d=g[a])&&e!==d[0]&&(Ma(d[0],d[1],!0),delete g[a]),!g[a]&&b.isArray(e)&&
(Ma(e,c=function(a,b){f.onArrayChange(a,b)}),g[a]=[e,c]);for(a=l+1;a<k;a++)if(d=g[a])Ma(d[0],d[1],!0),delete g[a];f._ars=g},onDispose:function(){for(var a in this._ars)Ma(this._ars[a][0],this._ars[a][1],!0)}}),X(pa["for"],H),X(pa["if"],H),X(pa.include,H),pa("props",{baseTag:pa["for"],dataMap:x.map({getTgt:pa.props.dataMap.getTgt,obsSrc:R,obsTgt:E,tgtFlt:L})}),X(b,{view:x.view=t=function(c,d,e){d!==!!d&&(e=d,d=a);var f,g,h,k,l,m;m=0;l=ia.body;if(c&&c!==l&&1<Ga._.useKey&&(c=""+c===c?b(c)[0]:c.jquery?
c[0]:c))if(d)for(m=Ua?c.querySelectorAll(Qa):b(Qa,c).get(),l=m.length,c=0;c<l;c++)for(f=m[c],g=r(f,a,db),h=0,k=g.length;h<k;h++){if(f=g[h],f=ka[f.id])if(f=f&&e?f.get(!0,e):f)return f}else for(;c;){if(g=r(c,a,nb))for(l=g.length;l--;)if(f=g[l],f.open){if(1>m)return(f=ka[f.id])&&e?f.get(e):f||Ga;m--}else m++;c=c.previousSibling||c.parentNode}return d?a:Ga},link:x.link=ga,unlink:x.unlink=la,cleanData:function(a){a.length&&Sa&&sa(a);fb.apply(b,arguments)}}),x.utility={validate:function(b){try{Ga.link(a,
ia.createElement("div"),a,a,b,a,a,1)}catch(c){return c.message}}},X(b.fn,{link:function(a,b,c,d,e,f,g){return ga(a,this,b,c,d,e,f,g)},unlink:function(a){return la(a,this)},view:function(a){return t(this[0],a)}}),b.each([U,"replaceWith","empty","remove"],function(a,c){var d=b.fn[c];b.fn[c]=function(){var a;Sa=1;try{a=d.apply(this,arguments)}finally{Sa=0}return a}}),X(Ga,{tmpl:{links:{},tags:{}}}),Ga._.onRender=Ja,T({wrapMap:Z={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>",
"</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:N="data-link",merge:{input:{from:Ia,to:"value"},textarea:$a,select:$a,optgroup:{to:"label"}},jsrDbgMode:T.debugMode,debugMode:function(a){T.jsrDbgMode(a);
a?e._jsv={views:ka,bindings:Aa}:delete e._jsv},jsv:function(){T.debugMode(T._dbgMode);N=T.linkAttr;ja=x._err;Q=Qa+",["+N+"]";v=T.noDomLevel0;Z.optgroup=Z.option;Z.tbody=Z.tfoot=Z.colgroup=Z.caption=Z.thead;Z.th=Z.td}}))})(this,this.jQuery)}())},{}]},{},[1])(1)});
