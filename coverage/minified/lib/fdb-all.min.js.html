<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for lib/fdb-all.min.js</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../prettify.css">
    <link rel="stylesheet" href="../base.css">
    <style type='text/css'>
        div.coverage-summary .sorter {
            background-image: url(../sort-arrow-sprite.png);
        }
    </style>
</head>
<body>
<div class="header medium">
    <h1>Code coverage report for <span class="entity">lib/fdb-all.min.js</span></h1>
    <h2>
        Statements: <span class="metric">59.17% <small>(2042 / 3451)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Branches: <span class="metric">47.63% <small>(1635 / 3433)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Functions: <span class="metric">55.02% <small>(724 / 1316)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Lines: <span class="metric">100% <small>(6 / 6)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../index.html">All files</a> &#187; <a href="index.html">lib/</a> &#187; fdb-all.min.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9</td><td class="line-coverage"><span class="cline-any cline-yes">133073</span>
<span class="cline-any cline-yes">2048</span>
<span class="cline-any cline-yes">276900</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">5729</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">886</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">878</span></td><td class="text"><pre class="prettyprint lang-js">!function a(b,c,d){function e(g,h){if(!c[g]){<span class="missing-if-branch" title="if path not taken" >I</span>if(!b[g]){<span class="cstat-no" title="statement not covered" >var i="function"==typeof require&amp;&amp;require;<span class="cstat-no" title="statement not covered" >i</span>f(!h&amp;&amp;i)<span class="cstat-no" title="statement not covered" >return i(g,!0);<span class="cstat-no" title="statement not covered" >i</span></span>f(f)<span class="cstat-no" title="statement not covered" >return f(g,!0);<span class="cstat-no" title="statement not covered" >v</span></span>ar j=new Error("Cannot find module '"+g+"'");<span class="cstat-no" title="statement not covered" >t</span>hrow j.code="MODULE_NOT_FOUND",j}</span>var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:<span class="branch-1 cbranch-no" title="branch not covered" >a)</span>},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&amp;&amp;require,g=0;g&lt;d.length;g++)e(d[g]);return e}({1:[function(a,b,c){{var d=a("./core");a("../lib/CollectionGroup"),a("../lib/View"),a("../lib/Highchart"),a("../lib/Persist"),a("../lib/Document"),a("../lib/Overview"),a("../lib/Grid"),a("../lib/Rest"),a("../lib/Odm")}"undefined"!=typeof window&amp;&amp;(window.ForerunnerDB=d),b.exports=d},{"../lib/CollectionGroup":5,"../lib/Document":9,"../lib/Grid":10,"../lib/Highchart":11,"../lib/Odm":25,"../lib/Overview":28,"../lib/Persist":30,"../lib/Rest":32,"../lib/View":35,"./core":2}],2:[function(a,b,c){{var d=a("../lib/Core");a("../lib/Shim.IE8")}"undefined"!=typeof window&amp;&amp;(window.ForerunnerDB=d),b.exports=d},{"../lib/Core":6,"../lib/Shim.IE8":34}],3:[function(a,b,c){"use strict";var d=a("./Shared"),e=function(a){var b;this._primaryKey="_id",this._keyArr=[],this._data=[],this._objLookup={},this._count=0;for(b in a)a.hasOwnProperty(b)&amp;&amp;this._keyArr.push({key:b,dir:a[b]})};d.addModule("ActiveBucket",e),d.mixin(e.prototype,"Mixin.Sorting"),d.synthesize(e.prototype,"primaryKey"),e.prototype.qs=function(a,b,c,d){if(!b.length)return 0;for(var e,f,g,h=-1,i=0,j=b.length-1;j&gt;=i&amp;&amp;(e=Math.floor((i+j)/2),h!==e);)f=b[e],void 0!==f&amp;&amp;(g=d(this,a,c,f),g&gt;0&amp;&amp;(i=e+1),0&gt;g&amp;&amp;(j=e-1)),h=e;return g&gt;0?e+1:e},e.prototype._sortFunc=function(a,b,c,d){var e,f,g,h=c.split(".:."),i=d.split(".:."),j=a._keyArr,k=j.length;for(e=0;k&gt;e;e++)if(f=j[e],g=typeof b[f.key],"number"===g&amp;&amp;(h[e]=Number(h[e]),i[e]=Number(i[e])),h[e]!==i[e]){if(1===f.dir)return a.sortAsc(h[e],i[e]);<span class="missing-if-branch" title="else path not taken" >E</span>if(-1===f.dir)return a.sortDesc(h[e],i[e])}},e.prototype.insert=function(a){var b,c;return b=this.documentKey(a),c=this._data.indexOf(b),-1===c?(c=this.qs(a,this._data,b,this._sortFunc),this._data.splice(c,0,b)):this._data.splice(c,0,b),this._objLookup[a[this._primaryKey]]=b,this._count++,c},e.prototype.remove=function(a){var b,c;return b=this._objLookup[a[this._primaryKey]],b?(c=this._data.indexOf(b),c&gt;-1?(this._data.splice(c,1),delete this._objLookup[a[this._primaryKey]],this._count--,!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1)</span>:<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>,e.prototype.index=function(a){var b,c;return b=this.documentKey(a),c=this._data.indexOf(b),-1===c&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >c=this.qs(a,this._data,b,this._sortFunc))</span>,c},e.prototype.documentKey=function(a){var b,c,d="",e=this._keyArr,f=e.length;for(b=0;f&gt;b;b++)c=e[b],d&amp;&amp;(d+=".:."),d+=a[c.key];return d+=".:."+a[this._primaryKey]},e.prototype.count=function(){return this._count},d.finishModule("ActiveBucket"),b.exports=e},{"./Shared":33}],4:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m;d=a("./Shared");var n=function(a){this.init.apply(this,arguments)};n.prototype.init=function(a,b){this._primaryKey="_id",this._primaryIndex=new g("primary"),this._primaryCrc=new g("primaryCrc"),this._crcLookup=new g("crcLookup"),this._name=a,this._data=[],this._metrics=new f,this._options=b||{changeTimestamp:!1},this._internalData={},this._deferQueue={insert:[],update:[],remove:[],upsert:[]},this._deferThreshold={insert:100,update:100,remove:100,upsert:100},this._deferTime={insert:1,update:1,remove:1,upsert:1},this.subsetOf(this)},d.addModule("Collection",n),d.mixin(n.prototype,"Mixin.Common"),d.mixin(n.prototype,"Mixin.Events"),d.mixin(n.prototype,"Mixin.ChainReactor"),d.mixin(n.prototype,"Mixin.CRUD"),d.mixin(n.prototype,"Mixin.Constants"),d.mixin(n.prototype,"Mixin.Triggers"),d.mixin(n.prototype,"Mixin.Sorting"),d.mixin(n.prototype,"Mixin.Matching"),d.mixin(n.prototype,"Mixin.Updating"),f=a("./Metrics"),g=a("./KeyValueStore"),h=a("./Path"),i=a("./IndexHashMap"),j=a("./IndexBinaryTree"),k=a("./Crc"),e=d.modules.Db,l=a("./Overload"),m=a("./ReactorIO"),n.prototype.crc=k,d.synthesize(n.prototype,"state"),d.synthesize(n.prototype,"name"),n.prototype.data=function(){return this._data},n.prototype.drop=function(a){var b;<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >return a&amp;&amp;a(!1,!0),!0;<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(this._db&amp;&amp;this._db._collection&amp;&amp;this._name){if(this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log("Dropping collection "+this._name),</span>this._state="dropped",this.emit("drop",this),delete this._db._collection[this._name],this._collate)for(b in this._collate)this._collate.hasOwnProperty(b)&amp;&amp;this.collateRemove(b);return delete this._primaryKey,delete this._primaryIndex,delete this._primaryCrc,delete this._crcLookup,delete this._name,delete this._data,delete this._metrics,a&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >a(!1,!0),</span>!0}<span class="cstat-no" title="statement not covered" >return a&amp;&amp;a(!1,!0),!1}</span>,n.prototype.primaryKey=function(a){return void 0!==a?(this._primaryKey!==a&amp;&amp;(this._primaryKey=a,this._primaryIndex.primaryKey(a),this.rebuildPrimaryKeyIndex()),this):this._primaryKey},n.prototype._onInsert=function(a,b){this.emit("insert",a,b)},n.prototype._onUpdate=function(a){this.emit("update",a)},n.prototype._onRemove=function(a){this.emit("remove",a)},n.prototype._onChange=function(){this._options.changeTimestamp&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >this._internalData.lastChange=new Date)</span>},d.synthesize(n.prototype,"db",function(a){return a&amp;&amp;"_id"===this.primaryKey()&amp;&amp;this.primaryKey(a.primaryKey()),this.$super.apply(this,arguments)}),n.prototype.setData=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(a){var d=this._metrics.create("setData");d.start(),b=this.options(b),this.preSetData(a,b,c),b.$decouple&amp;&amp;(a=this.decouple(a)),a instanceof Array||(a=[a]),d.time("transformIn"),a=this.transformIn(a),d.time("transformIn");var e=[].concat(this._data);this._dataReplace(a),d.time("Rebuild Primary Key Index"),this.rebuildPrimaryKeyIndex(b),d.time("Rebuild Primary Key Index"),d.time("Rebuild All Other Indexes"),this._rebuildIndexes(),d.time("Rebuild All Other Indexes"),d.time("Resolve chains"),this.chainSend("setData",a,{oldData:e}),d.time("Resolve chains"),d.stop(),this.emit("setData",this._data,e)}return c&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >c(!1),</span>this},n.prototype.rebuildPrimaryKeyIndex=function(a){a=a||{$ensureKeys:void 0,$violationCheck:void 0};var b,c,d,e,f=a&amp;&amp;void 0!==a.$ensureKeys?<span class="branch-0 cbranch-no" title="branch not covered" >a.$ensureKeys:</span>!0,g=a&amp;&amp;void 0!==a.$violationCheck?<span class="branch-0 cbranch-no" title="branch not covered" >a.$violationCheck:</span>!0,h=this._primaryIndex,i=this._primaryCrc,j=this._crcLookup,k=this._primaryKey;for(h.truncate(),i.truncate(),j.truncate(),b=this._data,c=b.length;c--;){<span class="missing-if-branch" title="else path not taken" >E</span>if(d=b[c],f&amp;&amp;this.ensurePrimaryKey(d),g){<span class="missing-if-branch" title="if path not taken" >I</span>if(!h.uniqueSet(d[k],d))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Call to setData on collection failed because your data violates the primary key unique constraint. One or more documents are using the same primary key: '+d[this._primaryKey]}</span>else <span class="cstat-no" title="statement not covered" >h.set(d[k],d);e</span>=JSON.stringify(d),i.set(d[k],e),j.set(e,d)}},n.prototype.ensurePrimaryKey=function(a){void 0===a[this._primaryKey]&amp;&amp;(a[this._primaryKey]=this.objectId())},n.prototype.truncate=function(){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';r</span>eturn this.emit("truncate",this._data),this._data.length=0,this._primaryIndex=new g("primary"),this._primaryCrc=new g("primaryCrc"),this._crcLookup=new g("crcLookup"),this._onChange(),this.deferEmit("change",{type:"truncate"}),this},n.prototype.upsert=function(a,b){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(a){var c,d,e=this._deferQueue.upsert,f=this._deferThreshold.upsert,g={};if(a instanceof Array){<span class="missing-if-branch" title="if path not taken" >I</span>if(a.length&gt;f)<span class="cstat-no" title="statement not covered" >return this._deferQueue.upsert=e.concat(a),this.processQueue("upsert",b),{};f</span>or(g=[],d=0;d&lt;a.length;d++)g.push(this.upsert(a[d]));return b&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >b(),</span>g}switch(a[this._primaryKey]?(c={},c[this._primaryKey]=a[this._primaryKey],this._primaryIndex.lookup(c)[0]?g.op="update":g.op="insert"):<span class="branch-1 cbranch-no" title="branch not covered" >g.op="insert",</span>g.op){case"insert":g.result=this.insert(a);break;case"update":g.result=this.update(c,a)}return g}<span class="cstat-no" title="statement not covered" >return b&amp;&amp;b(),{}}</span>,n.prototype.filter=function(a,b,c){return this.find(a,c).filter(b)},n.prototype.filterUpdate=function(a,b,c){var d,e,f,g,h=this.find(a,c),i=[],j=this.primaryKey();for(g=0;g&lt;h.length;g++)d=h[g],f=b(d),f&amp;&amp;(e={},e[j]=d[j],i.push(this.update(e,f)));return i},n.prototype.update=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';b</span>=this.decouple(b),b=this.transformIn(b),this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('Updating some collection data for collection "'+this.name()+'"');</span>var d,e,f=this,g=this._metrics.create("update"),h=function(d){var e,h,i,j=f.decouple(d);return f.willTrigger(f.TYPE_UPDATE,f.PHASE_BEFORE)||f.willTrigger(f.TYPE_UPDATE,f.PHASE_AFTER)?(e=f.decouple(d),h={type:"update",query:f.decouple(a),update:f.decouple(b),options:f.decouple(c),op:g},i=f.updateObject(e,h.update,h.query,h.options,""),f.processTrigger(h,f.TYPE_UPDATE,f.PHASE_BEFORE,d,e)!==!1?(i=f.updateObject(d,e,h.query,h.options,""),f.processTrigger(h,f.TYPE_UPDATE,f.PHASE_AFTER,d,e)):i=!1):i=f.updateObject(d,b,a,c,""),f._updateIndexes(j,d),i};return g.start(),g.time("Retrieve documents to update"),d=this.find(a,{$decouple:!1}),g.time("Retrieve documents to update"),d.length&amp;&amp;(g.time("Update documents"),e=d.filter(h),g.time("Update documents"),e.length&amp;&amp;(g.time("Resolve chains"),this.chainSend("update",{query:a,update:b,dataSet:d},c),g.time("Resolve chains"),this._onUpdate(e),this._onChange(),this.deferEmit("change",{type:"update",data:e}))),g.stop(),e||<span class="branch-1 cbranch-no" title="branch not covered" >[]}</span>,n.prototype._replaceObj=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c;<span class="cstat-no" title="statement not covered" >t</span>his._removeFromIndexes(a);<span class="cstat-no" title="statement not covered" >f</span>or(c in a)<span class="cstat-no" title="statement not covered" >a.hasOwnProperty(c)&amp;&amp;delete a[c];<span class="cstat-no" title="statement not covered" >f</span></span>or(c in b)<span class="cstat-no" title="statement not covered" >b.hasOwnProperty(c)&amp;&amp;(a[c]=b[c]);<span class="cstat-no" title="statement not covered" >i</span></span>f(!this._insertIntoIndexes(a))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Primary key violation in update! Key violated: '+a[this._primaryKey];<span class="cstat-no" title="statement not covered" >r</span></span>eturn this}</span>,n.prototype.updateById=function(a,b){var c={};return c[this._primaryKey]=a,this.update(c,b)},n.prototype.updateObject=function(a,b,c,d,e,f){b=this.decouple(b),e=e||"","."===e.substr(0,1)&amp;&amp;(e=e.substr(1,e.length-1));var g,i,j,k,l,m,n,o,p,q=!1,r=!1;for(p in b)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.hasOwnProperty(p)){if(g=!1,"$"===p.substr(0,1))switch(p){<span class="branch-0 cbranch-no" title="branch not covered" >case"$key":<span class="branch-1 cbranch-no" title="branch not covered" >c</span>ase"$index":c</span>ase"$data":g=!0;break;case"$each":for(g=!0,k=b.$each.length,j=0;k&gt;j;j++)r=this.updateObject(a,b.$each[j],c,d,e),r&amp;&amp;(q=!0);q=q||<span class="branch-1 cbranch-no" title="branch not covered" >r;</span>break;default:g=!0,r=this.updateObject(a,b[p],c,d,e,p),q=q||r}if(this._isPositionalKey(p)&amp;&amp;(g=!0,p=p.substr(0,p.length-2),m=new h(e+"."+p),a[p]&amp;&amp;a[p]instanceof Array&amp;&amp;a[p].length)){for(i=[],j=0;j&lt;a[p].length;j++)this._match(a[p][j],m.value(c)[0],"",{})&amp;&amp;i.push(j);for(j=0;j&lt;i.length;j++)r=this.updateObject(a[p][i[j]],b[p+".$"],c,d,e+"."+p,f),q=q||r}if(!g)if(f||"object"!=typeof b[p])switch(f){case"$inc":this._updateIncrement(a,p,b[p]),q=!0;break;case"$cast":switch(b[p]){case"array":a[p]instanceof Array||(this._updateProperty(a,p,b.$data||[]),q=!0);break;<span class="branch-1 cbranch-no" title="branch not covered" >case"object":<span class="cstat-no" title="statement not covered" >(!(a[p]instanceof Object)||a[p]instanceof Array)&amp;&amp;(this._updateProperty(a,p,b.$data||{}),q=!0);<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-2 cbranch-no" title="branch not covered" >c</span></span>ase"number":<span class="cstat-no" title="statement not covered" >"number"!=typeof a[p]&amp;&amp;(this._updateProperty(a,p,Number(a[p])),q=!0);<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-3 cbranch-no" title="branch not covered" >c</span></span>ase"string":<span class="cstat-no" title="statement not covered" >"string"!=typeof a[p]&amp;&amp;(this._updateProperty(a,p,String(a[p])),q=!0);<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-4 cbranch-no" title="branch not covered" >d</span></span>efault:<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot update cast to unknown type: '+b[p]}</span></span>break;case"$push":<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0===a[p]&amp;&amp;this._updateProperty(a,p,[]),!(a[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot push to a key that is not an array! ('+p+")";i</span>f(void 0!==b[p].$position&amp;&amp;b[p].$each instanceof Array)for(l=b[p].$position,k=b[p].$each.length,j=0;k&gt;j;j++)this._updateSplicePush(a[p],l+j,b[p].$each[j]);else if(b[p].$each instanceof Array)for(k=b[p].$each.length,j=0;k&gt;j;j++)this._updatePush(a[p],b[p].$each[j]);else this._updatePush(a[p],b[p]);q=!0;break;case"$pull":<span class="missing-if-branch" title="else path not taken" >E</span>if(a[p]instanceof Array){for(i=[],j=0;j&lt;a[p].length;j++)this._match(a[p][j],b[p],"",{})&amp;&amp;i.push(j);for(k=i.length;k--;)this._updatePull(a[p],i[k]),q=!0}break;case"$pullAll":<span class="missing-if-branch" title="else path not taken" >E</span>if(a[p]instanceof Array){<span class="missing-if-branch" title="if path not taken" >I</span>if(!(b[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot pullAll without being given an array of values to pull! ('+p+")";<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(i=a[p],k=i.length,k&gt;0)for(;k--;){for(l=0;l&lt;b[p].length;l++)i[k]===b[p][l]&amp;&amp;(this._updatePull(a[p],k),k--,q=!0);if(0&gt;k)break}}break;case"$addToSet":<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0===a[p]&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this._updateProperty(a,p,[]),</span>!(a[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot addToSet on a key that is not an array! ('+p+")";v</span>ar s,t,u,v,w=a[p],x=w.length,y=!0,z=d&amp;&amp;d.$addToSet;for(b[p].$key?(u=!1,v=new h(b[p].$key),t=v.value(b[p])[0],delete b[p].$key):z&amp;&amp;z.key?(u=!1,v=new h(z.key),t=v.value(b[p])[0]):(t=JSON.stringify(b[p]),u=!0),s=0;x&gt;s;s++)if(u){<span class="missing-if-branch" title="else path not taken" >E</span>if(JSON.stringify(w[s])===t){y=!1;break}}else if(t===v.value(w[s])[0]){y=!1;break}y&amp;&amp;(this._updatePush(a[p],b[p]),q=!0);break;case"$splicePush":<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0===a[p]&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this._updateProperty(a,p,[]),</span>!(a[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot splicePush with a key that is not an array! ('+p+")";<span class="missing-if-branch" title="if path not taken" >I</span>i</span>f(l=b.$index,void 0===l)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot splicePush without a $index integer value!';d</span>elete b.$index,l&gt;a[p].length&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >l=a[p].length)</span>,this._updateSplicePush(a[p],l,b[p]),q=!0;break;case"$move":<span class="missing-if-branch" title="if path not taken" >I</span>if(!(a[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot move on a key that is not an array! ('+p+")";f</span>or(j=0;j&lt;a[p].length;j++)<span class="missing-if-branch" title="else path not taken" >E</span>if(this._match(a[p][j],b[p],"",{})){var A=b.$index;<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0===A)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot move without a $index integer value!';d</span>elete b.$index,this._updateSpliceMove(a[p],j,A),q=!0;break}break;case"$mul":this._updateMultiply(a,p,b[p]),q=!0;break;case"$rename":this._updateRename(a,p,b[p]),q=!0;break;case"$overwrite":this._updateOverwrite(a,p,b[p]),q=!0;break;case"$unset":this._updateUnset(a,p),q=!0;break;<span class="branch-12 cbranch-no" title="branch not covered" >case"$clear":<span class="cstat-no" title="statement not covered" >this._updateClear(a,p),q=!0;<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-13 cbranch-no" title="branch not covered" >c</span></span>ase"$pop":<span class="cstat-no" title="statement not covered" >if(!(a[p]instanceof Array))<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot pop from a key that is not an array! ('+p+")";<span class="cstat-no" title="statement not covered" >t</span></span>his._updatePop(a[p],b[p])&amp;&amp;(q=!0);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span></span>efault:a[p]!==b[p]&amp;&amp;(this._updateProperty(a,p,b[p]),q=!0)}else <span class="missing-if-branch" title="else path not taken" >E</span>if(null!==a[p]&amp;&amp;"object"==typeof a[p])if(n=a[p]instanceof Array,o=b[p]instanceof Array,n||o)if(!o&amp;&amp;n)for(j=0;j&lt;a[p].length;j++)r=this.updateObject(a[p][j],b[p],c,d,e+"."+p,f),q=q||r;else a[p]!==b[p]&amp;&amp;(this._updateProperty(a,p,b[p]),q=!0);else r=this.updateObject(a[p],b[p],c,d,e+"."+p,f),q=q||<span class="branch-1 cbranch-no" title="branch not covered" >r;</span>else <span class="cstat-no" title="statement not covered" >a[p]!==b[p]&amp;&amp;(this._updateProperty(a,p,b[p]),q=!0)}</span>return q},n.prototype._isPositionalKey=function(a){return".$"===a.substr(a.length-2,2)},n.prototype.remove=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';v</span>ar d,e,f,g,h,i,j,k,l=this;if("function"==typeof b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >c=b,b=void 0)</span>,a instanceof Array){for(g=[],f=0;f&lt;a.length;f++)<span class="cstat-no" title="statement not covered" >g.push(this.remove(a[f],{noEmit:!0}));r</span>eturn(!b||<span class="branch-1 cbranch-no" title="branch not covered" >b&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >!b.noEmit)</span>&amp;&amp;this._onRemove(g),c&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >c(!1,g),</span>g}<span class="missing-if-branch" title="else path not taken" >E</span>if(d=this.find(a,{$decouple:!1}),d.length){h=function(a){l._removeFromIndexes(a),e=l._data.indexOf(a),l._dataRemoveAtIndex(e)};for(var m=0;m&lt;d.length;m++)j=d[m],l.willTrigger(l.TYPE_REMOVE,l.PHASE_BEFORE)||l.willTrigger(l.TYPE_REMOVE,l.PHASE_AFTER)?(i={type:"remove"},k=l.decouple(j),l.processTrigger(i,l.TYPE_REMOVE,l.PHASE_BEFORE,k,k)!==!1&amp;&amp;(h(j),l.processTrigger(i,l.TYPE_REMOVE,l.PHASE_AFTER,k,k))):h(j);this.chainSend("remove",{query:a,dataSet:d},b),(!b||<span class="branch-1 cbranch-no" title="branch not covered" >b&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >!b.noEmit)</span>&amp;&amp;this._onRemove(d),this._onChange(),this.deferEmit("change",{type:"remove",data:d})}return c&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >c(!1,d),</span>d},n.prototype.removeById=function(a){var b={};return b[this._primaryKey]=a,this.remove(b)},n.prototype.deferEmit=function(a,b){var c,d=this;this._noEmitDefer||this._db&amp;&amp;(!this._db||this._db._noEmitDefer)?this.emit.apply(this,arguments):(c=arguments,this._deferTimeout=this._deferTimeout||{},this._deferTimeout[a]&amp;&amp;clearTimeout(this._deferTimeout[a]),this._deferTimeout[a]=setTimeout(function(){d.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log("ForerunnerDB.Collection: Emitting "+c[0]),</span>d.emit.apply(d,c)},1))},n.prototype.processQueue=function(a,b,c){var d,e,f=this,g=this._deferQueue[a],h=this._deferThreshold[a],i=this._deferTime[a];if(c=c||{deferred:!0},g.length){<span class="missing-if-branch" title="else path not taken" >E</span>if(g.length)switch(d=g.length&gt;h?g.splice(0,h):g.splice(0,g.length),e=f[a](d),a){case"insert":c.inserted=c.inserted||[],c.failed=c.failed||[],c.inserted=c.inserted.concat(e.inserted),c.failed=c.failed.concat(e.failed)}setTimeout(function(){f.processQueue.call(f,a,b,c)},i)}else b&amp;&amp;b(c)},n.prototype.insert=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';r</span>eturn"function"==typeof b?(<span class="branch-0 cbranch-no" title="branch not covered" >c=b,b=this._data.length)</span>:void 0===b&amp;&amp;(b=this._data.length),a=this.transformIn(a),this._insertHandle(a,b,c)},n.prototype._insertHandle=function(a,b,c){var d,e,f,g=this._deferQueue.insert,h=this._deferThreshold.insert,i=[],j=[];if(a instanceof Array){if(a.length&gt;h)return this._deferQueue.insert=g.concat(a),void this.processQueue("insert",c);for(f=0;f&lt;a.length;f++)d=this._insert(a[f],b+f),d===!0?i.push(a[f]):j.push({doc:a[f],reason:d})}else d=this._insert(a,b),d===!0?i.push(a):j.push({doc:a,reason:d});return this.chainSend("insert",a,{index:b}),e={deferred:!1,inserted:i,failed:j},this._onInsert(i,j),c&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >c(e),</span>this._onChange(),this.deferEmit("change",{type:"insert",data:i}),e},n.prototype._insert=function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if(a){var c,d,e,f,g=this;if(this.ensurePrimaryKey(a),c=this.insertIndexViolation(a),e=function(a){g._insertIntoIndexes(a),b&gt;g._data.length&amp;&amp;(b=g._data.length),g._dataInsertAtIndex(b,a)},c)return"Index violation in index: "+c;if(g.willTrigger(g.TYPE_INSERT,g.PHASE_BEFORE)||g.willTrigger(g.TYPE_INSERT,g.PHASE_AFTER)){if(d={type:"insert"},g.processTrigger(d,g.TYPE_INSERT,g.PHASE_BEFORE,{},a)===!1)return!1;e(a),g.willTrigger(g.TYPE_INSERT,g.PHASE_AFTER)&amp;&amp;(f=g.decouple(a),g.processTrigger(d,g.TYPE_INSERT,g.PHASE_AFTER,{},f))}else e(a);return!0}<span class="cstat-no" title="statement not covered" >return"No document passed to insert"}</span>,n.prototype._dataInsertAtIndex=function(a,b){this._data.splice(a,0,b)},n.prototype._dataRemoveAtIndex=function(a){this._data.splice(a,1)},n.prototype._dataReplace=function(a){for(;this._data.length;)this._data.pop();this._data=this._data.concat(a)},n.prototype._insertIntoIndexes=function(a){var b,c,d=this._indexByName,e=JSON.stringify(a);c=this._primaryIndex.uniqueSet(a[this._primaryKey],a),this._primaryCrc.uniqueSet(a[this._primaryKey],e),this._crcLookup.uniqueSet(e,a);for(b in d)d.hasOwnProperty(b)&amp;&amp;d[b].insert(a);return c},n.prototype._removeFromIndexes=function(a){var b,c=this._indexByName,d=JSON.stringify(a);this._primaryIndex.unSet(a[this._primaryKey]),this._primaryCrc.unSet(a[this._primaryKey]),this._crcLookup.unSet(d);for(b in c)c.hasOwnProperty(b)&amp;&amp;c[b].remove(a)},n.prototype._updateIndexes=function(a,b){this._removeFromIndexes(a),this._insertIntoIndexes(b)},n.prototype._rebuildIndexes=function(){var a,b=this._indexByName;for(a in b)b.hasOwnProperty(a)&amp;&amp;b[a].rebuild()},n.prototype.subset=function(a,b){var c=this.find(a,b);return(new n).subsetOf(this).primaryKey(this._primaryKey).setData(c)},d.synthesize(n.prototype,"subsetOf"),n.prototype.isSubsetOf=function(a){return!0},n.prototype.distinct=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';v</span>ar d,e,f=this.find(b,c),g=new h(a),i={},j=[];for(e=0;e&lt;f.length;e++)d=g.value(f[e])[0],d&amp;&amp;!i[d]&amp;&amp;(i[d]=!0,j.push(d));return j},n.prototype.findById=function(a,b){var c={};return c[this._primaryKey]=a,this.find(c,b)[0]},n.prototype.peek=function(a,b){var c,d,e=this._data,f=e.length,g=new n,h=typeof a;<span class="missing-if-branch" title="else path not taken" >E</span>if("string"===h){for(c=0;f&gt;c;c++)d=JSON.stringify(e[c]),d.indexOf(a)&gt;-1&amp;&amp;g.insert(e[c]);return g.find({},b)}<span class="cstat-no" title="statement not covered" >return this.find(a,b)}</span>,n.prototype.explain=function(a,b){var c=this.find(a,b);return c.__fdbOp._data},n.prototype.options=function(a){return a=a||{},a.$decouple=void 0!==a.$decouple?a.$decouple:!0,a.$explain=void 0!==a.$explain?a.$explain:!1,a},n.prototype.find=function(a,b,c){return c?(<span class="branch-0 cbranch-no" title="branch not covered" >c("Callbacks for the find() operation are not yet implemented!",[]),[])</span>:this._find.apply(this,arguments)},n.prototype._find=function(a,b){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';a</span>=a||{},b=this.options(b);var c,d,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=this._metrics.create("find"),D=this.primaryKey(),E=this,F=!0,G={},H=[],I=[],J=[],K={},L={},M=function(b){return E._match(b,a,"and",K)};<span class="missing-if-branch" title="else path not taken" >E</span>if(C.start(),a){if(C.time("analyseQuery"),c=this._analyseQuery(E.decouple(a),b,C),C.time("analyseQuery"),C.data("analysis",c),c.hasJoin&amp;&amp;c.queriesJoin){for(C.time("joinReferences"),g=0;g&lt;c.joinsOn.length;g++)k=c.joinsOn[g],j=new h(c.joinQueries[k]),i=j.value(a)[0],G[c.joinsOn[g]]=this._db.collection(c.joinsOn[g]).subset(i),delete a[c.joinQueries[k]];C.time("joinReferences")}if(c.indexMatch.length&amp;&amp;(!b||b&amp;&amp;!b.$skipIndex)?(C.data("index.potential",c.indexMatch),C.data("index.used",c.indexMatch[0].index),C.time("indexLookup"),e=c.indexMatch[0].lookup||<span class="branch-1 cbranch-no" title="branch not covered" >[],</span>C.time("indexLookup"),c.indexMatch[0].keyData.totalKeyCount===c.indexMatch[0].keyData.score&amp;&amp;(F=!1)):C.flag("usedIndex",!1),F&amp;&amp;(e&amp;&amp;e.length?(d=e.length,C.time("tableScan: "+d),e=e.filter(M)):(d=this._data.length,C.time("tableScan: "+d),e=this._data.filter(M)),b.$orderBy&amp;&amp;(C.time("sort"),e=this.sort(b.$orderBy,e),C.time("sort")),C.time("tableScan: "+d)),void 0!==b.$page&amp;&amp;void 0!==b.$limit&amp;&amp;(L.page=b.$page,L.pages=Math.ceil(e.length/b.$limit),L.records=e.length,b.$page&amp;&amp;b.$limit&gt;0&amp;&amp;(C.data("cursor",L),e.splice(0,b.$page*b.$limit))),b.$skip&amp;&amp;(L.skip=b.$skip,e.splice(0,b.$skip),C.data("skip",b.$skip)),b.$limit&amp;&amp;e&amp;&amp;e.length&gt;b.$limit&amp;&amp;(L.limit=b.$limit,e.length=b.$limit,C.data("limit",b.$limit)),b.$decouple&amp;&amp;(C.time("decouple"),e=this.decouple(e),C.time("decouple"),C.data("flag.decouple",!0)),b.$join){for(f=0;f&lt;b.$join.length;f++)for(k in b.$join[f])<span class="missing-if-branch" title="else path not taken" >E</span>if(b.$join[f].hasOwnProperty(k))for(s=k,l=G[k]?G[k]:this._db.collection(k),m=b.$join[f][k],t=0;t&lt;e.length;t++){o={},p=!1,q=!1;for(n in m)<span class="missing-if-branch" title="else path not taken" >E</span>if(m.hasOwnProperty(n))if("$"===n.substr(0,1))switch(n){case"$as":s=m[n];break;case"$multi":p=m[n];break;case"$require":q=m[n]}else o[n]=new h(m[n]).value(e[t])[0];r=l.find(o),!q||q&amp;&amp;r[0]?e[t][s]=p===!1?r[0]:r:H.push(e[t])}C.data("flag.join",!0)}if(H.length){for(C.time("removalQueue"),v=0;v&lt;H.length;v++)u=e.indexOf(H[v]),u&gt;-1&amp;&amp;e.splice(u,1);C.time("removalQueue")}if(b.$transform){for(C.time("transform"),v=0;v&lt;e.length;v++)e.splice(v,1,b.$transform(e[v]));C.time("transform"),C.data("flag.transform",!0)}this._transformEnabled&amp;&amp;this._transformOut&amp;&amp;(C.time("transformOut"),e=this.transformOut(e),C.time("transformOut")),C.data("results",e.length)}else <span class="cstat-no" title="statement not covered" >e=[];C</span>.time("scanFields");for(v in b)b.hasOwnProperty(v)&amp;&amp;0!==v.indexOf("$")&amp;&amp;(1===b[v]?I.push(v):0===b[v]&amp;&amp;J.push(v));if(C.time("scanFields"),I.length||J.length){for(C.data("flag.limitFields",!0),C.data("limitFields.on",I),C.data("limitFields.off",J),C.time("limitFields"),v=0;v&lt;e.length;v++){B=e[v];for(w in B)B.hasOwnProperty(w)&amp;&amp;(I.length&amp;&amp;w!==D&amp;&amp;-1===I.indexOf(w)&amp;&amp;delete B[w],J.length&amp;&amp;J.indexOf(w)&gt;-1&amp;&amp;delete B[w])}C.time("limitFields")}if(b.$elemMatch){C.data("flag.elemMatch",!0),C.time("projection-elemMatch");for(v in b.$elemMatch)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.$elemMatch.hasOwnProperty(v))for(y=new h(v),w=0;w&lt;e.length;w++)<span class="missing-if-branch" title="else path not taken" >E</span>if(z=y.value(e[w])[0],z&amp;&amp;z.length)for(x=0;x&lt;z.length;x++)if(E._match(z[x],b.$elemMatch[v],"",{})){y.set(e[w],v,[z[x]]);break}C.time("projection-elemMatch")}if(b.$elemsMatch){C.data("flag.elemsMatch",!0),C.time("projection-elemsMatch");for(v in b.$elemsMatch)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.$elemsMatch.hasOwnProperty(v))for(y=new h(v),w=0;w&lt;e.length;w++)<span class="missing-if-branch" title="else path not taken" >E</span>if(z=y.value(e[w])[0],z&amp;&amp;z.length){for(A=[],x=0;x&lt;z.length;x++)E._match(z[x],b.$elemsMatch[v],"",{})&amp;&amp;A.push(z[x]);y.set(e[w],v,A)}C.time("projection-elemsMatch")}return C.stop(),e.__fdbOp=C,e.$cursor=L,e},n.prototype.findOne=function(){return this.find.apply(this,arguments)[0]},n.prototype.indexOf=function(a){var b=this.find(a,{$decouple:!1})[0];return b?this._data.indexOf(b):<span class="branch-1 cbranch-no" title="branch not covered" >-1}</span>,n.prototype.indexOfDocById=function(a){return this._data.indexOf("object"!=typeof a?this._primaryIndex.get(a):this._primaryIndex.get(a[this._primaryKey]))},n.prototype.removeByIndex=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c;<span class="cstat-no" title="statement not covered" >r</span>eturn b=this._data[a],void 0!==b?(b=this.decouple(b),c=b[this.primaryKey()],this.removeById(c)):!1}</span>,n.prototype.transform=function(a){return void 0!==a?("object"==typeof a?(void 0!==a.enabled&amp;&amp;(this._transformEnabled=a.enabled),void 0!==a.dataIn&amp;&amp;(this._transformIn=a.dataIn),void 0!==a.dataOut&amp;&amp;(this._transformOut=a.dataOut)):this._transformEnabled=a!==!1,this):<span class="branch-1 cbranch-no" title="branch not covered" >{enabled:this._transformEnabled,dataIn:this._transformIn,dataOut:this._transformOut}}</span>,n.prototype.transformIn=function(a){if(this._transformEnabled&amp;&amp;this._transformIn){if(a instanceof Array){var b,c=[];for(b=0;b&lt;a.length;b++)c[b]=this._transformIn(a[b]);return c}return this._transformIn(a)}return a},n.prototype.transformOut=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(this._transformEnabled&amp;&amp;this._transformOut){<span class="missing-if-branch" title="else path not taken" >E</span>if(a instanceof Array){var b,c=[];for(b=0;b&lt;a.length;b++)c[b]=this._transformOut(a[b]);return c}<span class="cstat-no" title="statement not covered" >return this._transformOut(a)}<span class="cstat-no" title="statement not covered" ></span>return a}</span>,n.prototype.sort=function(a,b){b=b||<span class="branch-1 cbranch-no" title="branch not covered" >[];</span>var c,d,e=[];for(c in a)a.hasOwnProperty(c)&amp;&amp;(d={},d[c]=a[c],d.___fdbKey=c,e.push(d));return e.length&lt;2?this._sort(a,b):this._bucketSort(e,b)},n.prototype._bucketSort=function(a,b){var c,d,e,f=a.shift(),g=[];if(a.length&gt;0){b=this._sort(f,b),d=this.bucket(f.___fdbKey,b);for(e in d)d.hasOwnProperty(e)&amp;&amp;(c=[].concat(a),g=g.concat(this._bucketSort(c,d[e])));return g}return this._sort(f,b)},n.prototype._sort=function(a,b){var c,d=this,e=new h,f=e.parse(a,!0)[0];if(e.path(f.path),1===f.value)c=function(a,b){var c=e.value(a)[0],f=e.value(b)[0];return d.sortAsc(c,f)};else{<span class="missing-if-branch" title="if path not taken" >I</span>if(-1!==f.value)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": $orderBy clause has invalid direction: '+f.value+", accepted values are 1 or -1 for ascending or descending!";c</span>=function(a,b){var c=e.value(a)[0],f=e.value(b)[0];return d.sortDesc(c,f)}}return b.sort(c)},n.prototype.bucket=function(a,b){var c,d={};for(c=0;c&lt;b.length;c++)d[b[c][a]]=d[b[c][a]]||[],d[b[c][a]].push(b[c]);return d},n.prototype._analyseQuery=function(a,b,c){var d,e,f,g,i,j,k,l,m,n,o,p={queriesOn:[this._name],indexMatch:[],hasJoin:!1,queriesJoin:!1,joinQueries:{},query:a,options:b},q=[],r=[];if(c.time("checkIndexes"),m=new h,n=m.countKeys(a)){void 0!==a[this._primaryKey]&amp;&amp;(c.time("checkIndexMatch: Primary Key"),p.indexMatch.push({lookup:this._primaryIndex.lookup(a,b),keyData:{matchedKeys:[this._primaryKey],totalKeyCount:n,score:1},index:this._primaryIndex}),c.time("checkIndexMatch: Primary Key"));for(o in this._indexById)if(this._indexById.hasOwnProperty(o)&amp;&amp;(j=this._indexById[o],k=j.name(),c.time("checkIndexMatch: "+k),i=j.match(a,b),i.score&gt;0&amp;&amp;(l=j.lookup(a,b),p.indexMatch.push({lookup:l,keyData:i,index:j})),c.time("checkIndexMatch: "+k),i.score===n))break;c.time("checkIndexes"),p.indexMatch.length&gt;1&amp;&amp;(c.time("findOptimalIndex"),p.indexMatch.sort(function(a,b){return a.keyData.score&gt;b.keyData.score?-1:<span class="branch-1 cbranch-no" title="branch not covered" >a.keyData.score&lt;b.keyData.score?1:a.keyData.score===b.keyData.score?a.lookup.length-b.lookup.length:void 0}</span>),c.time("findOptimalIndex"))}if(b.$join){for(p.hasJoin=!0,d=0;d&lt;b.$join.length;d++)for(e in b.$join[d])b.$join[d].hasOwnProperty(e)&amp;&amp;(q.push(e),r.push("$as"in b.$join[d][e]?b.$join[d][e].$as:<span class="branch-1 cbranch-no" title="branch not covered" >e)</span>);for(g=0;g&lt;r.length;g++)f=this._queryReferencesCollection(a,r[g],""),f&amp;&amp;(p.joinQueries[q[g]]=f,p.queriesJoin=!0);p.joinsOn=q,p.queriesOn=p.queriesOn.concat(q)}return p},n.prototype._queryReferencesCollection=function(a,b,c){var d;for(d in a)<span class="missing-if-branch" title="else path not taken" >E</span>if(a.hasOwnProperty(d)){<span class="missing-if-branch" title="else path not taken" >E</span>if(d===b)return c&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >c+=".")</span>,c+d;<span class="cstat-no" title="statement not covered" >if("object"==typeof a[d])<span class="cstat-no" title="statement not covered" >return c&amp;&amp;(c+="."),c+=d,this._queryReferencesCollection(a[d],b,c)}</span></span>return!1},n.prototype.count=function(a,b){return a?this.find(a,b).length:this._data.length},n.prototype.findSub=function(a,b,c,d){var e,f,g,i=new h(b),j=this.find(a),k=j.length,l=this._db.collection("__FDB_temp_"+this.objectId()),m={parents:k,subDocTotal:0,subDocs:[],pathFound:!1,err:""};for(d=d||{},e=0;k&gt;e;e++)<span class="missing-if-branch" title="else path not taken" >E</span>if(f=i.value(j[e])[0]){<span class="missing-if-branch" title="if path not taken" >I</span>if(l.setData(f),g=l.find(c,d),d.returnFirst&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >g.length)<span class="cstat-no" title="statement not covered" ></span>return g[0];d</span>.$split?<span class="branch-0 cbranch-no" title="branch not covered" >m.subDocs.push(g):</span>m.subDocs=m.subDocs.concat(g),m.subDocTotal+=g.length,m.pathFound=!0}return l.drop(),d.$stats?<span class="branch-0 cbranch-no" title="branch not covered" >m:</span>m.subDocs},n.prototype.insertIndexViolation=function(a){var b,c,d,e=this._indexByName;if(this._primaryIndex.get(a[this._primaryKey]))b=this._primaryIndex;else for(c in e)if(e.hasOwnProperty(c)&amp;&amp;(d=e[c],d.unique()&amp;&amp;d.violation(a))){b=d;break}return b?b.name():!1},n.prototype.ensureIndex=function(a,b){<span class="missing-if-branch" title="if path not taken" >I</span>if("dropped"===this._state)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot operate in a dropped state!';t</span>his._indexByName=this._indexByName||{},this._indexById=this._indexById||{};var c,d={start:(new Date).getTime()};if(b)switch(b.type){<span class="branch-0 cbranch-no" title="branch not covered" >case"hashed":<span class="cstat-no" title="statement not covered" >c=new i(a,b,this);<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-1 cbranch-no" title="branch not covered" >c</span></span>ase"btree":<span class="cstat-no" title="statement not covered" >c=new j(a,b,this);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span></span>efault:c=new i(a,b,this)}else c=new i(a,b,this);return this._indexByName[c.name()]?<span class="branch-0 cbranch-no" title="branch not covered" >{err:"Index with that name already exists"}:</span>this._indexById[c.id()]?<span class="branch-0 cbranch-no" title="branch not covered" >{err:"Index with those keys already exists"}:</span>(c.rebuild(),this._indexByName[c.name()]=c,this._indexById[c.id()]=c,d.end=(new Date).getTime(),d.total=d.end-d.start,this._lastOp={type:"ensureIndex",stats:{time:d}},{index:c,id:c.id(),name:c.name(),state:c.state()})},n.prototype.index=function(a){return this._indexByName?this._indexByName[a]:<span class="branch-1 cbranch-no" title="branch not covered" >void 0}</span>,n.prototype.lastOp=function(){return this._metrics.list()},n.prototype.diff=function(a){var b,c,d,e,f={insert:[],update:[],remove:[]},g=this.primaryKey();<span class="missing-if-branch" title="if path not taken" >I</span>if(g!==a.primaryKey())<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Collection diffing requires that both collections have the same primary key!';f</span>or(b=a._data;b&amp;&amp;!(b instanceof Array);)<span class="cstat-no" title="statement not covered" >a=b,b=a._data;f</span>or(e=b.length,c=0;e&gt;c;c++)d=b[c],this._primaryIndex.get(d[g])?this._primaryCrc.get(d[g])!==a._primaryCrc.get(d[g])&amp;&amp;f.update.push(d):f.insert.push(d);for(b=this._data,e=b.length,c=0;e&gt;c;c++)d=b[c],a._primaryIndex.get(d[g])||f.remove.push(d);return f},n.prototype.collateAdd=new l({"object, string":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >c</span>.collateAdd(a,<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>var e,f;<span class="cstat-no" title="statement not covered" >s</span>witch(d.type){case"insert":<span class="cstat-no" title="statement not covered" >b?(e={$push:{}},e.$push[b]=c.decouple(d.data),c.update({},e)):c.insert(d.data);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"update":<span class="cstat-no" title="statement not covered" >b?(e={},f={},e[b]=d.data.query,f[b+".$"]=d.data.update,c.update(e,f)):c.update(d.data.query,d.data.update);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"remove":<span class="cstat-no" title="statement not covered" >b?(e={$pull:{}},e.$pull[b]={},e.$pull[b][c.primaryKey()]=d.data.dataSet[0][a.primaryKey()],c.update({},e)):c.remove(d.data)}</span>}</span>)}</span>,"object, function":function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if("string"==typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >a=this._db.collection(a,{autoCreate:!1,throwError:!1}))</span>,a)return this._collate=this._collate||{},this._collate[a.name()]=new m(a,this,b),this;<span class="cstat-no" title="statement not covered" >throw"Cannot collate from a non-existent collection!"}</span>}),n.prototype.collateRemove=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if("object"==typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >a=a.name())</span>,a)return this._collate[a].drop(),delete this._collate[a],this;<span class="cstat-no" title="statement not covered" >throw"No collection name passed to collateRemove() or collection not found!"}</span>,e.prototype.collection=new l({object:function(a){return a instanceof n?a:<span class="branch-1 cbranch-no" title="branch not covered" >this.$main.call(this,a)}</span>,string:function(a){return this.$main.call(this,{name:a})},"string, string":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return this.$main.call(this,{name:a,primaryKey:b})}</span>,"string, object":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return b.name=a,this.$main.call(this,b)}</span>,"string, string, object":<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return c.name=a,c.primaryKey=b,this.$main.call(this,c)}</span>,$main:function(a){var b=a.name;<span class="missing-if-branch" title="else path not taken" >E</span>if(b){if(!this._collection[b]){<span class="missing-if-branch" title="if path not taken" >I</span>if(a&amp;&amp;a.autoCreate===!1&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >a&amp;</span>&amp;<span class="branch-3 cbranch-no" title="branch not covered" >a.throwError!==!1)<span class="cstat-no" title="statement not covered" ></span>throw'ForerunnerDB.Db "'+this.name()+'": Cannot get collection '+b+" because it does not exist and auto-create has been disabled!";t</span>his.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log("Creating collection "+b)}</span>return this._collection[b]=this._collection[b]||new n(b).db(this),void 0!==a.primaryKey&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this._collection[b].primaryKey(a.primaryKey),</span>this._collection[b]}<span class="cstat-no" title="statement not covered" >if(!a||a&amp;&amp;a.throwError!==!1)<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Db "'+this.name()+'": Cannot get collection with undefined name!'}</span></span>}),e.prototype.collectionExists=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this._collection[a])}</span>,e.prototype.collections=function(a){var b,c=[];a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >a instanceof RegExp|</span>|(<span class="branch-2 cbranch-no" title="branch not covered" >a=new RegExp(a))</span>);for(b in this._collection)this._collection.hasOwnProperty(b)&amp;&amp;(a?<span class="branch-0 cbranch-no" title="branch not covered" >a.exec(b)&amp;&amp;c.push({name:b,count:this._collection[b].count()}):</span>c.push({name:b,count:this._collection[b].count()
}));return c.sort(function(a,b){return a.name.localeCompare(b.name)}),c},d.finishModule("Collection"),b.exports=n},{"./Crc":7,"./IndexBinaryTree":12,"./IndexHashMap":13,"./KeyValueStore":14,"./Metrics":15,"./Overload":27,"./Path":29,"./ReactorIO":31,"./Shared":33}],5:[function(a,b,c){"use strict";var d,e,f,g;d=a("./Shared");var h=function(){this.init.apply(this,arguments)};h.prototype.init=function(a){var b=this;b._name=a,b._data=new g("__FDB__cg_data_"+b._name),b._collections=[],b._view=[]},d.addModule("CollectionGroup",h),d.mixin(h.prototype,"Mixin.Common"),d.mixin(h.prototype,"Mixin.ChainReactor"),d.mixin(h.prototype,"Mixin.Constants"),d.mixin(h.prototype,"Mixin.Triggers"),g=a("./Collection"),e=d.modules.Db,f=d.modules.Db.prototype.init,h.prototype.on=function(){this._data.on.apply(this._data,arguments)},h.prototype.off=function(){this._data.off.apply(this._data,arguments)},h.prototype.emit=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._data.emit.apply(this._data,arguments)}</span>,h.prototype.primaryKey=function(a){return void 0!==a?(this._primaryKey=a,this):this._primaryKey},d.synthesize(h.prototype,"state"),d.synthesize(h.prototype,"db"),h.prototype.addCollection=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(a&amp;&amp;-1===this._collections.indexOf(a)){<span class="missing-if-branch" title="if path not taken" >I</span>if(this._collections.length){<span class="cstat-no" title="statement not covered" >if(this._primaryKey!==a.primaryKey())<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.CollectionGroup "'+this.name()+'": All collections in a collection group must have the same primary key!'}</span></span>else this.primaryKey(a.primaryKey());this._collections.push(a),a._groups=a._groups||[],a._groups.push(this),a.chain(this),a.on("drop",function(){<span class="missing-if-branch" title="else path not taken" >E</span>if(a._groups&amp;&amp;a._groups.length){var b,c=[];for(b=0;b&lt;a._groups.length;b++)c.push(a._groups[b]);for(b=0;b&lt;c.length;b++)a._groups[b].removeCollection(a)}delete a._groups}),this._data.insert(a.find())}return this},h.prototype.removeCollection=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(a){var b,c=this._collections.indexOf(a);-1!==c&amp;&amp;(a.unChain(this),this._collections.splice(c,1),a._groups=a._groups||<span class="branch-1 cbranch-no" title="branch not covered" >[],</span>b=a._groups.indexOf(this),-1!==b&amp;&amp;a._groups.splice(b,1),a.off("drop")),0===this._collections.length&amp;&amp;delete this._primaryKey}return this},h.prototype._chainHandler=function(a){switch(a.type){case"setData":a.data=this.decouple(a.data),this._data.remove(a.options.oldData),this._data.insert(a.data);break;case"insert":a.data=this.decouple(a.data),this._data.insert(a.data);break;case"update":this._data.update(a.data.query,a.data.update,a.options);break;case"remove":this._data.remove(a.data.query,a.options)}},h.prototype.insert=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._collectionsRun("insert",arguments)}</span>,h.prototype.update=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._collectionsRun("update",arguments)}</span>,h.prototype.updateById=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._collectionsRun("updateById",arguments)}</span>,h.prototype.remove=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._collectionsRun("remove",arguments)}</span>,h.prototype._collectionsRun=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>for(var c=0;c&lt;this._collections.length;c++)<span class="cstat-no" title="statement not covered" >this._collections[c][a].apply(this._collections[c],b)}</span></span>,h.prototype.find=function(a,b){return this._data.find(a,b)},h.prototype.removeById=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>for(var b=0;b&lt;this._collections.length;b++)<span class="cstat-no" title="statement not covered" >this._collections[b].removeById(a)}</span></span>,h.prototype.subset=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this.find(a,b);<span class="cstat-no" title="statement not covered" >r</span>eturn(new g).subsetOf(this).primaryKey(this._primaryKey).setData(c)}</span>,h.prototype.drop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if("dropped"!==this._state){<span class="cstat-no" title="statement not covered" >var a,b,c;<span class="cstat-no" title="statement not covered" >i</span>f(this._debug&amp;&amp;console.log("Dropping collection group "+this._name),this._state="dropped",this._collections&amp;&amp;this._collections.length)<span class="cstat-no" title="statement not covered" >for(b=[].concat(this._collections),a=0;a&lt;b.length;a++)<span class="cstat-no" title="statement not covered" >this.removeCollection(b[a]);<span class="cstat-no" title="statement not covered" >i</span></span></span>f(this._view&amp;&amp;this._view.length)<span class="cstat-no" title="statement not covered" >for(c=[].concat(this._view),a=0;a&lt;c.length;a++)<span class="cstat-no" title="statement not covered" >this._removeView(c[a]);<span class="cstat-no" title="statement not covered" >t</span></span></span>his.emit("drop",this)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!0}</span>,e.prototype.init=function(){this._collectionGroup={},f.apply(this,arguments)},e.prototype.collectionGroup=function(a){return a?a instanceof h?<span class="branch-0 cbranch-no" title="branch not covered" >a:</span>(this._collectionGroup[a]=this._collectionGroup[a]||new h(a).db(this),this._collectionGroup[a]):<span class="branch-1 cbranch-no" title="branch not covered" >this._collectionGroup}</span>,e.prototype.collectionGroups=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a,b=[];<span class="cstat-no" title="statement not covered" >f</span>or(a in this._collectionGroup)<span class="cstat-no" title="statement not covered" >this._collectionGroup.hasOwnProperty(a)&amp;&amp;b.push({name:a});<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,b.exports=h},{"./Collection":4,"./Shared":33}],6:[function(a,b,c){"use strict";var d,e,f,g,h=[];d=a("./Shared"),g=a("./Overload");var i=function(a){this.init.apply(this,arguments)};i.prototype.init=function(a){this._db={},this._debug={},this._name=a||"ForerunnerDB",h.push(this)},i.prototype.instantiatedCount=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return h.length}</span>,i.prototype.instances=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a?h[a]:h}</span>,i.prototype.namedInstances=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c;<span class="cstat-no" title="statement not covered" >i</span>f(void 0!==a){<span class="cstat-no" title="statement not covered" >for(b=0;b&lt;h.length;b++)<span class="cstat-no" title="statement not covered" >if(h[b].name===a)<span class="cstat-no" title="statement not covered" >return h[b];<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn void 0}<span class="cstat-no" title="statement not covered" ></span>f</span>or(c=[],b=0;b&lt;h.length;b++)<span class="cstat-no" title="statement not covered" >c.push(h[b].name);<span class="cstat-no" title="statement not covered" >r</span></span>eturn c}</span>,i.prototype.moduleLoaded=new g({string:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >a=a.replace(/ /g,"");<span class="cstat-no" title="statement not covered" >v</span>ar b,c=a.split(",");<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;c.length;b++)<span class="cstat-no" title="statement not covered" >if(!d.modules[c[b]])<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn!0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!1}</span>,"string, function":function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a){a=a.replace(/ /g,"");var c,e=a.split(",");for(c=0;c&lt;e.length;c++)<span class="missing-if-branch" title="if path not taken" >I</span>if(!d.modules[e[c]])<span class="cstat-no" title="statement not covered" >return!1;b</span>()}},"array, function":function(a,b){var c,e;for(e=0;e&lt;a.length;e++)<span class="missing-if-branch" title="else path not taken" >E</span>if(c=a[e],void 0!==c){c=c.replace(/ /g,"");var f,g=c.split(",");for(f=0;f&lt;g.length;f++)<span class="missing-if-branch" title="if path not taken" >I</span>if(!d.modules[g[f]])<span class="cstat-no" title="statement not covered" >return!1}</span>b()},"string, function, function":<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >a=a.replace(/ /g,"");<span class="cstat-no" title="statement not covered" >v</span>ar e,f=a.split(",");<span class="cstat-no" title="statement not covered" >f</span>or(e=0;e&lt;f.length;e++)<span class="cstat-no" title="statement not covered" >if(!d.modules[f[e]])<span class="cstat-no" title="statement not covered" >return c(),!1;<span class="cstat-no" title="statement not covered" >b</span></span></span>()}</span>}</span>}),i.prototype.version=function(a,b){return void 0!==a?0===d.version.indexOf(a)?(<span class="branch-0 cbranch-no" title="branch not covered" >b&amp;&amp;b(),!0)</span>:!1:<span class="branch-1 cbranch-no" title="branch not covered" >d.version}</span>,i.moduleLoaded=i.prototype.moduleLoaded,i.version=i.prototype.version,i.instances=i.prototype.instances,i.instantiatedCount=i.prototype.instantiatedCount,i.shared=d,i.prototype.shared=d,d.addModule("Core",i),d.mixin(i.prototype,"Mixin.Common"),d.mixin(i.prototype,"Mixin.Constants"),e=a("./Db.js"),f=a("./Metrics.js"),d.synthesize(i.prototype,"name"),i.prototype._isServer=!1,i.prototype.isClient=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!this._isServer}</span>,i.prototype.isServer=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._isServer}</span>,i.prototype.isClient=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!this._isServer}</span>,i.prototype.isServer=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._isServer}</span>,i.prototype.collection=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw"ForerunnerDB's instantiation has changed since version 1.3.36 to support multiple database instances. Please see the readme.md file for the minor change you have to make to get your project back up and running, or see the issue related to this change at https://github.com/Irrelon/ForerunnerDB/issues/44"}</span>,b.exports=i},{"./Db.js":8,"./Metrics.js":15,"./Overload":27,"./Shared":33}],7:[function(a,b,c){"use strict";var d=function(){var a,b,c,d=[];for(b=0;256&gt;b;b++){for(a=b,c=0;8&gt;c;c++)a=1&amp;a?3988292384^a&gt;&gt;&gt;1:a&gt;&gt;&gt;1;d[b]=a}return d}();b.exports=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c=-1;<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;a.length;b++)<span class="cstat-no" title="statement not covered" >c=c&gt;&gt;&gt;8^d[255&amp;(c^a.charCodeAt(b))];<span class="cstat-no" title="statement not covered" >r</span></span>eturn(-1^c)&gt;&gt;&gt;0}</span>},{}],8:[function(a,b,c){"use strict";var d,e,f,g,h,i;d=a("./Shared"),i=a("./Overload");var j=function(a,b){this.init.apply(this,arguments)};j.prototype.init=function(a,b){this.core(b),this._primaryKey="_id",this._name=a,this._collection={},this._debug={}},j.prototype.moduleLoaded=new i({string:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >a=a.replace(/ /g,"");<span class="cstat-no" title="statement not covered" >v</span>ar b,c=a.split(",");<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;c.length;b++)<span class="cstat-no" title="statement not covered" >if(!d.modules[c[b]])<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn!0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!1}</span>,"string, function":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >a=a.replace(/ /g,"");<span class="cstat-no" title="statement not covered" >v</span>ar c,e=a.split(",");<span class="cstat-no" title="statement not covered" >f</span>or(c=0;c&lt;e.length;c++)<span class="cstat-no" title="statement not covered" >if(!d.modules[e[c]])<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >b</span></span></span>()}</span>}</span>,"string, function, function":<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >a=a.replace(/ /g,"");<span class="cstat-no" title="statement not covered" >v</span>ar e,f=a.split(",");<span class="cstat-no" title="statement not covered" >f</span>or(e=0;e&lt;f.length;e++)<span class="cstat-no" title="statement not covered" >if(!d.modules[f[e]])<span class="cstat-no" title="statement not covered" >return c(),!1;<span class="cstat-no" title="statement not covered" >b</span></span></span>()}</span>}</span>}),j.prototype.version=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a?0===d.version.indexOf(a)?(b&amp;&amp;b(),!0):!1:d.version}</span>,j.moduleLoaded=j.prototype.moduleLoaded,j.version=j.prototype.version,j.shared=d,j.prototype.shared=d,d.addModule("Db",j),d.mixin(j.prototype,"Mixin.Common"),d.mixin(j.prototype,"Mixin.ChainReactor"),d.mixin(j.prototype,"Mixin.Constants"),e=d.modules.Core,f=a("./Collection.js"),g=a("./Metrics.js"),h=a("./Crc.js"),j.prototype._isServer=!1,d.synthesize(j.prototype,"core"),d.synthesize(j.prototype,"primaryKey"),d.synthesize(j.prototype,"state"),d.synthesize(j.prototype,"name"),j.prototype.isClient=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return!this._isServer}</span>,j.prototype.isServer=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._isServer}</span>,j.prototype.crc=h,j.prototype.isClient=function(){return!this._isServer},j.prototype.isServer=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._isServer}</span>,j.prototype.arrayToCollection=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return(new f).setData(a)}</span>,j.prototype.on=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return this._listeners=this._listeners||{},this._listeners[a]=this._listeners[a]||[],this._listeners[a].push(b),this}</span>,j.prototype.off=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if(a in this._listeners){<span class="cstat-no" title="statement not covered" >var c=this._listeners[a],d=c.indexOf(b);<span class="cstat-no" title="statement not covered" >d</span>&gt;-1&amp;&amp;c.splice(d,1)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>,j.prototype.emit=function(a,b){<span class="missing-if-branch" title="if path not taken" >I</span>if(this._listeners=this._listeners||{},a in this._listeners){<span class="cstat-no" title="statement not covered" >var c,d=this._listeners[a],e=d.length;<span class="cstat-no" title="statement not covered" >f</span>or(c=0;e&gt;c;c++)<span class="cstat-no" title="statement not covered" >d[c].apply(this,Array.prototype.slice.call(arguments,1))}</span></span>return this},j.prototype.peek=function(a){var b,c,d=[],e=typeof a;for(b in this._collection)this._collection.hasOwnProperty(b)&amp;&amp;(c=this._collection[b],d=d.concat("string"===e?c.peek(a):<span class="branch-1 cbranch-no" title="branch not covered" >c.find(a))</span>);return d},j.prototype.peekCat=function(a){var b,c,d,e={},f=typeof a;for(b in this._collection)this._collection.hasOwnProperty(b)&amp;&amp;(c=this._collection[b],"string"===f?(d=c.peek(a),d&amp;&amp;d.length&amp;&amp;(e[c.name()]=d)):(<span class="branch-1 cbranch-no" title="branch not covered" >d=c.find(a),d&amp;&amp;d.length&amp;&amp;(e[c.name()]=d))</span>);return e},j.prototype.drop=new i({"":function(){if("dropped"!==this._state){var a,b=this.collections(),c=b.length;for(this._state="dropped",a=0;c&gt;a;a++)this.collection(b[a].name).drop(),delete this._collection[b[a].name];this.emit("drop",this),delete this._core._db[this._name]}return!0},"function":<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if("dropped"!==this._state){<span class="cstat-no" title="statement not covered" >var b,c=this.collections(),d=c.length,e=0,f=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e++,e===d&amp;&amp;a&amp;&amp;a()}</span>;<span class="cstat-no" title="statement not covered" >f</span>or(this._state="dropped",b=0;d&gt;b;b++)<span class="cstat-no" title="statement not covered" >this.collection(c[b].name).drop(f),delete this._collection[c[b].name];<span class="cstat-no" title="statement not covered" >t</span></span>his.emit("drop",this),delete this._core._db[this._name]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!0}</span>,"boolean":function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if("dropped"!==this._state){var b,c=this.collections(),d=c.length;for(this._state="dropped",b=0;d&gt;b;b++)this.collection(c[b].name).drop(a),delete this._collection[c[b].name];this.emit("drop",this),delete this._core._db[this._name]}return!0},"boolean, function":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if("dropped"!==this._state){<span class="cstat-no" title="statement not covered" >var c,d=this.collections(),e=d.length,f=0,g=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>f++,f===e&amp;&amp;b&amp;&amp;b()}</span>;<span class="cstat-no" title="statement not covered" >f</span>or(this._state="dropped",c=0;e&gt;c;c++)<span class="cstat-no" title="statement not covered" >this.collection(d[c].name).drop(a,g),delete this._collection[d[c].name];<span class="cstat-no" title="statement not covered" >t</span></span>his.emit("drop",this),delete this._core._db[this._name]}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!0}</span>}),e.prototype.db=function(a){return a instanceof j?<span class="branch-0 cbranch-no" title="branch not covered" >a:</span>(a||(<span class="branch-1 cbranch-no" title="branch not covered" >a=this.objectId())</span>,this._db[a]=this._db[a]||new j(a,this),this._db[a])},e.prototype.databases=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d,e=[];<span class="cstat-no" title="statement not covered" >a</span>&amp;&amp;(a instanceof RegExp||(a=new RegExp(a)));<span class="cstat-no" title="statement not covered" >f</span>or(d in this._db)<span class="cstat-no" title="statement not covered" >this._db.hasOwnProperty(d)&amp;&amp;(c=!0,a&amp;&amp;(a.exec(d)||(c=!1)),c&amp;&amp;(b={name:d,children:[]},this.shared.moduleExists("Collection")&amp;&amp;b.children.push({module:"collection",moduleName:"Collections",count:this._db[d].collections().length}),this.shared.moduleExists("CollectionGroup")&amp;&amp;b.children.push({module:"collectionGroup",moduleName:"Collection Groups",count:this._db[d].collectionGroups().length}),this.shared.moduleExists("Document")&amp;&amp;b.children.push({module:"document",moduleName:"Documents",count:this._db[d].documents().length}),this.shared.moduleExists("Grid")&amp;&amp;b.children.push({module:"grid",moduleName:"Grids",count:this._db[d].grids().length}),this.shared.moduleExists("Overview")&amp;&amp;b.children.push({module:"overview",moduleName:"Overviews",count:this._db[d].overviews().length}),this.shared.moduleExists("View")&amp;&amp;b.children.push({module:"view",moduleName:"Views",count:this._db[d].views().length}),e.push(b)));<span class="cstat-no" title="statement not covered" >r</span></span>eturn e.sort(<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return a.name.localeCompare(b.name)}</span>),e}</span>,b.exports=j},{"./Collection.js":4,"./Crc.js":7,"./Metrics.js":15,"./Overload":27,"./Shared":33}],9:[function(a,b,c){"use strict";var d,e,f;d=a("./Shared");var g=function(){this.init.apply(this,arguments)};g.prototype.init=function(a){this._name=a,this._data={}},d.addModule("Document",g),d.mixin(g.prototype,"Mixin.Common"),d.mixin(g.prototype,"Mixin.Events"),d.mixin(g.prototype,"Mixin.ChainReactor"),d.mixin(g.prototype,"Mixin.Constants"),d.mixin(g.prototype,"Mixin.Triggers"),e=a("./Collection"),f=d.modules.Db,d.synthesize(g.prototype,"state"),d.synthesize(g.prototype,"db"),d.synthesize(g.prototype,"name"),g.prototype.setData=function(a,b){var c,d;<span class="missing-if-branch" title="else path not taken" >E</span>if(a)if(b=b||{$decouple:!0},b&amp;&amp;b.$decouple===!0&amp;&amp;(a=this.decouple(a)),this._linked){d={};for(c in this._data)"jQuery"!==c.substr(0,6)&amp;&amp;this._data.hasOwnProperty(c)&amp;&amp;void 0===a[c]&amp;&amp;(d[c]=1);a.$unset=d,this.updateObject(this._data,a,{})}else this._data=a;return this},g.prototype.find=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c;<span class="cstat-no" title="statement not covered" >r</span>eturn c=b&amp;&amp;b.$decouple===!1?this._data:this.decouple(this._data)}</span>,g.prototype.update=function(a,b,c){this.updateObject(this._data,b,a,c)},g.prototype.updateObject=e.prototype.updateObject,g.prototype._isPositionalKey=function(a){return".$"===a.substr(a.length-2,2)},g.prototype._updateProperty=function(a,b,c){this._linked?(window.jQuery.observable(a).setProperty(b,c),this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.Document: Setting data-bound document property "'+b+'" for collection "'+this.name()+'"'))</span>:(<span class="branch-1 cbranch-no" title="branch not covered" >a[b]=c,this.debug()&amp;&amp;console.log('ForerunnerDB.Document: Setting non-data-bound document property "'+b+'" for collection "'+this.name()+'"'))</span>},g.prototype._updateIncrement=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._linked?window.jQuery.observable(a).setProperty(b,a[b]+c):a[b]+=c}</span>,g.prototype._updateSpliceMove=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._linked?(window.jQuery.observable(a).move(b,c),this.debug()&amp;&amp;console.log('ForerunnerDB.Document: Moving data-bound document array index from "'+b+'" to "'+c+'" for collection "'+this.name()+'"')):(a.splice(c,0,a.splice(b,1)[0]),this.debug()&amp;&amp;console.log('ForerunnerDB.Document: Moving non-data-bound document array index from "'+b+'" to "'+c+'" for collection "'+this.name()+'"'))}</span>,g.prototype._updateSplicePush=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>a.length&gt;b?this._linked?window.jQuery.observable(a).insert(b,c):a.splice(b,0,c):this._linked?window.jQuery.observable(a).insert(c):a.push(c)}</span>,g.prototype._updatePush=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>this._linked?window.jQuery.observable(a).insert(b):a.push(b)}</span>,g.prototype._updatePull=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>this._linked?window.jQuery.observable(a).remove(b):a.splice(b,1)}</span>,g.prototype._updateMultiply=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._linked?window.jQuery.observable(a).setProperty(b,a[b]*c):a[b]*=c}</span>,g.prototype._updateRename=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=a[b];<span class="cstat-no" title="statement not covered" >t</span>his._linked?(window.jQuery.observable(a).setProperty(c,d),window.jQuery.observable(a).removeProperty(b)):(a[c]=d,delete a[b])}</span>,g.prototype._updateUnset=function(a,b){this._linked?window.jQuery.observable(a).removeProperty(b):<span class="branch-1 cbranch-no" title="branch not covered" >delete a[b]}</span>,g.prototype._updatePop=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d=!1;<span class="cstat-no" title="statement not covered" >r</span>eturn a.length&gt;0&amp;&amp;(this._linked?(1===b?c=a.length-1:-1===b&amp;&amp;(c=0),c&gt;-1&amp;&amp;(window.jQuery.observable(a).remove(c),d=!0)):1===b?(a.pop(),d=!0):-1===b&amp;&amp;(a.shift(),d=!0)),d}</span>,g.prototype.drop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"dropped"===this._state?!0:this._db&amp;&amp;this._name&amp;&amp;this._db&amp;&amp;this._db._document&amp;&amp;this._db._document[this._name]?(this._state="dropped",delete this._db._document[this._name],delete this._data,this.emit("drop",this),!0):!1}</span>,f.prototype.document=function(a){return a?a instanceof g?<span class="branch-0 cbranch-no" title="branch not covered" >a:</span>(this._document=this._document||{},this._document[a]=this._document[a]||new g(a).db(this),this._document[a]):<span class="branch-1 cbranch-no" title="branch not covered" >this._document}</span>,f.prototype.documents=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a,b=[];<span class="cstat-no" title="statement not covered" >f</span>or(a in this._document)<span class="cstat-no" title="statement not covered" >this._document.hasOwnProperty(a)&amp;&amp;b.push({name:a});<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,d.finishModule("Document"),b.exports=g},{"./Collection":4,"./Shared":33}],10:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;d=a("./Shared");var l=function(a,b,c){this.init.apply(this,arguments)};l.prototype.init=function(a,b,c){var d=this;this._selector=a,this._template=b,this._options=c||{},this._debug={},this._id=this.objectId(),this._collectionDroppedWrap=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d._collectionDropped.apply(d,arguments)}</span>},d.addModule("Grid",l),d.mixin(l.prototype,"Mixin.Common"),d.mixin(l.prototype,"Mixin.ChainReactor"),d.mixin(l.prototype,"Mixin.Constants"),d.mixin(l.prototype,"Mixin.Triggers"),d.mixin(l.prototype,"Mixin.Events"),f=a("./Collection"),g=a("./CollectionGroup"),h=a("./View"),k=a("./ReactorIO"),i=f.prototype.init,e=d.modules.Db,j=e.prototype.init,d.synthesize(l.prototype,"state"),d.synthesize(l.prototype,"name"),l.prototype.insert=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.insert.apply(this._from,arguments)}</span>,l.prototype.update=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.update.apply(this._from,arguments)}</span>,l.prototype.updateById=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.updateById.apply(this._from,arguments)}</span>,l.prototype.remove=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.remove.apply(this._from,arguments)}</span>,l.prototype.from=function(a){return void 0!==a&amp;&amp;(this._from&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >this._from.off("drop",this._collectionDroppedWrap),this._from._removeGrid(this))</span>,"string"==typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >a=this._db.collection(a))</span>,this._from=a,this._from.on("drop",this._collectionDroppedWrap),this.refresh()),this},l.prototype.db=function(a){return void 0!==a?(this._db=a,this):<span class="branch-1 cbranch-no" title="branch not covered" >this._db}</span>,l.prototype._collectionDropped=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a&amp;&amp;delete this._from}</span>,l.prototype.drop=function(){return"dropped"===this._state?<span class="branch-0 cbranch-no" title="branch not covered" >!0:</span>this._from?(this._from.unlink(this._selector,this.template()),this._from.off("drop",this._collectionDroppedWrap),this._from._removeGrid(this),(this.debug()||this._db&amp;&amp;this._db.debug())&amp;&amp;<span class="branch-3 cbranch-no" title="branch not covered" >console.log("ForerunnerDB.Grid: Dropping grid "+this._selector),</span>this._state="dropped",this._db&amp;&amp;this._selector&amp;&amp;delete this._db._grid[this._selector],this.emit("drop",this),delete this._selector,delete this._template,delete this._from,delete this._db,!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>,l.prototype.template=function(a){return void 0!==a?(<span class="branch-0 cbranch-no" title="branch not covered" >this._template=a,this)</span>:this._template},l.prototype._sortGridClick=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c=window.jQuery(a.currentTarget).attr("data-grid-sort")||"",d=c.split(","),e={};<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;d.length;b++)<span class="cstat-no" title="statement not covered" >e[d]=1;<span class="cstat-no" title="statement not covered" >t</span></span>his._from.orderBy(e),this.emit("sort",e)}</span>,l.prototype.refresh=function(){<span class="missing-if-branch" title="else path not taken" >E</span>if(this._from){<span class="missing-if-branch" title="if path not taken" >I</span>if(!this._from.link)<span class="cstat-no" title="statement not covered" >throw"Grid requires the AutoBind module in order to operate!";v</span>ar a=this,b=window.jQuery(this._selector),c=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a._sortGridClick.apply(a,arguments)}</span>;<span class="missing-if-branch" title="else path not taken" >E</span>if(b.html(""),a._from.orderBy&amp;&amp;b.off("click","[data-grid-sort]",c),a._from.query&amp;&amp;b.off("click","[data-grid-filter]",c),a._options.$wrap=a._options.$wrap||"gridRow",a._from.link(a._selector,a.template(),a._options),a._from.orderBy&amp;&amp;b.on("click","[data-grid-sort]",c),a._from.query){var d={};b.find("[data-grid-filter]").each(function(c,e){e=window.jQuery(e);var f,g,h,i,j=e.attr("data-grid-filter"),k=e.attr("data-grid-vartype"),l={},m=e.html(),n=a._db.view("tmpGridFilter_"+a._id+"_"+j);l[j]=1,i={$distinct:l},n.query(i).orderBy(l).from(a._from._from),h=['&lt;div class="dropdown" id="'+a._id+"_"+j+'"&gt;','&lt;button class="btn btn-default dropdown-toggle" type="button" id="'+a._id+"_"+j+'_dropdownButton" data-toggle="dropdown" aria-expanded="true"&gt;',m+' &lt;span class="caret"&gt;&lt;/span&gt;',"&lt;/button&gt;","&lt;/div&gt;"],f=window.jQuery(h.join("")),g=window.jQuery('&lt;ul class="dropdown-menu" role="menu" id="'+a._id+"_"+j+'_dropdownMenu"&gt;&lt;/ul&gt;'),f.append(g),e.html(f),n.link(g,{template:['&lt;li role="presentation" class="input-group" style="width: 240px; padding-left: 10px; padding-right: 10px; padding-top: 5px;"&gt;','&lt;input type="search" class="form-control gridFilterSearch" placeholder="Search..."&gt;','&lt;span class="input-group-btn"&gt;','&lt;button class="btn btn-default gridFilterClearSearch" type="button"&gt;&lt;span class="glyphicon glyphicon-remove-circle glyphicons glyphicons-remove"&gt;&lt;/span&gt;&lt;/button&gt;',"&lt;/span&gt;","&lt;/li&gt;",'&lt;li role="presentation" class="divider"&gt;&lt;/li&gt;','&lt;li role="presentation" data-val="$all"&gt;','&lt;a role="menuitem" tabindex="-1"&gt;','&lt;input type="checkbox" checked&gt;&amp;nbsp;All',"&lt;/a&gt;","&lt;/li&gt;",'&lt;li role="presentation" class="divider"&gt;&lt;/li&gt;',"{^{for options}}",'&lt;li role="presentation" data-link="data-val{:'+j+'}"&gt;','&lt;a role="menuitem" tabindex="-1"&gt;','&lt;input type="checkbox"&gt;&amp;nbsp;{^{:'+j+"}}","&lt;/a&gt;","&lt;/li&gt;","{{/for}}"].join("")},{$wrap:"options"}),b.on("keyup","#"+a._id+"_"+j+"_dropdownMenu .gridFilterSearch",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=window.jQuery(this),c=n.query(),d=b.val();<span class="cstat-no" title="statement not covered" >d</span>?c[j]=new RegExp(d,"gi"):delete c[j],n.query(c)}</span>),b.on("click","#"+a._id+"_"+j+"_dropdownMenu .gridFilterClearSearch",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>window.jQuery(this).parents("li").find(".gridFilterSearch").val("");<span class="cstat-no" title="statement not covered" >v</span>ar b=n.query();<span class="cstat-no" title="statement not covered" >d</span>elete b[j],n.query(b)}</span>),b.on("click","#"+a._id+"_"+j+"_dropdownMenu li",<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b.stopPropagation();<span class="cstat-no" title="statement not covered" >v</span>ar c,e,f,g,h,i=$(this),l=i.find('input[type="checkbox"]'),m=!0;<span class="cstat-no" title="statement not covered" >i</span>f(window.jQuery(b.target).is("input")?(l.prop("checked",l.prop("checked")),e=l.is(":checked")):(l.prop("checked",!l.prop("checked")),e=l.is(":checked")),g=window.jQuery(this),c=g.attr("data-val"),"$all"===c)<span class="cstat-no" title="statement not covered" >delete d[j],g.parent().find('li[data-val!="$all"]').find('input[type="checkbox"]').prop("checked",!1);e</span>lse{<span class="cstat-no" title="statement not covered" >switch(g.parent().find('[data-val="$all"]').find('input[type="checkbox"]').prop("checked",!1),k){case"integer":<span class="cstat-no" title="statement not covered" >c=parseInt(c,10);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"float":<span class="cstat-no" title="statement not covered" >c=parseFloat(c)}<span class="cstat-no" title="statement not covered" ></span>f</span>or(d[j]=d[j]||{$in:[]},f=d[j].$in,h=0;h&lt;f.length;h++)<span class="cstat-no" title="statement not covered" >if(f[h]===c){<span class="cstat-no" title="statement not covered" >e===!1&amp;&amp;f.splice(h,1),m=!1;<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>m</span></span>&amp;&amp;e&amp;&amp;f.push(c),f.length||delete d[j]}<span class="cstat-no" title="statement not covered" ></span>a</span>._from.queryData(d),a._from.pageFirst&amp;&amp;a._from.pageFirst()}</span>)})}a.emit("refresh")}return this},l.prototype.count=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._from.count()}</span>,f.prototype.grid=h.prototype.grid=function(a,b,c){<span class="missing-if-branch" title="else path not taken" >E</span>if(this._db&amp;&amp;this._db._grid){<span class="missing-if-branch" title="if path not taken" >I</span>if(this._db._grid[a])<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection/View "'+this.name()+'": Cannot create a grid using this collection/view because a grid with this name already exists: '+name;v</span>ar d=new l(a,b,c).db(this._db).from(this);return this._grid=this._grid||[],this._grid.push(d),this._db._grid[a]=d,d}},f.prototype.unGrid=h.prototype.unGrid=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d,e;<span class="cstat-no" title="statement not covered" >i</span>f(this._db&amp;&amp;this._db._grid){<span class="cstat-no" title="statement not covered" >if(a&amp;&amp;b){<span class="cstat-no" title="statement not covered" >if(this._db._grid[a])<span class="cstat-no" title="statement not covered" >return e=this._db._grid[a],delete this._db._grid[a],e.drop();<span class="cstat-no" title="statement not covered" >t</span></span>hrow'ForerunnerDB.Collection/View "'+this.name()+'": Cannot remove a grid using this collection/view because a grid with this name does not exist: '+name}<span class="cstat-no" title="statement not covered" ></span>f</span>or(d in this._db._grid)<span class="cstat-no" title="statement not covered" >this._db._grid.hasOwnProperty(d)&amp;&amp;(e=this._db._grid[d],delete this._db._grid[d],e.drop(),this.debug()&amp;&amp;console.log('ForerunnerDB.Collection/View "'+this.name()+'": Removed grid binding "'+d+'"'));<span class="cstat-no" title="statement not covered" >t</span></span>his._db._grid={}}</span>}</span>,f.prototype._addGrid=g.prototype._addGrid=h.prototype._addGrid=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a&amp;&amp;(this._grid=this._grid||[],this._grid.push(a)),this}</span>,f.prototype._removeGrid=g.prototype._removeGrid=h.prototype._removeGrid=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a&amp;&amp;this._grid){var b=this._grid.indexOf(a);b&gt;-1&amp;&amp;this._grid.splice(b,1)}return this},e.prototype.init=function(){this._grid={},j.apply(this,arguments)},e.prototype.gridExists=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this._grid[a])}</span>,e.prototype.grid=function(a,b,c){return this._grid[a]||(this.debug()||this._db&amp;&amp;<span class="branch-3 cbranch-no" title="branch not covered" >this._db.debug())</span>&amp;&amp;<span class="branch-4 cbranch-no" title="branch not covered" >console.log("Db.Grid: Creating grid "+a),</span>this._grid[a]=this._grid[a]||new l(a,b,c).db(this),this._grid[a]},e.prototype.unGrid=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return this._grid[a]||(this.debug()||this._db&amp;&amp;this._db.debug())&amp;&amp;console.log("Db.Grid: Creating grid "+a),this._grid[a]=this._grid[a]||new l(a,b,c).db(this),this._grid[a]}</span>,e.prototype.grids=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a,b=[];<span class="cstat-no" title="statement not covered" >f</span>or(a in this._grid)<span class="cstat-no" title="statement not covered" >this._grid.hasOwnProperty(a)&amp;&amp;b.push({name:a,count:this._grid[a].count()});<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,d.finishModule("Grid"),b.exports=l},{"./Collection":4,"./CollectionGroup":5,"./ReactorIO":31,"./Shared":33,"./View":35}],11:[function(a,b,c){"use strict";var d,e,f,g;d=a("./Shared"),g=a("./Overload");var h=function(a,b){this.init.apply(this,arguments)};h.prototype.init=function(a,b){<span class="missing-if-branch" title="if path not taken" >I</span>if(this._options=b,this._selector=window.jQuery(this._options.selector),!this._selector[0])<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Highchart "'+a.name()+'": Chart target element does not exist via selector: '+this._options.selector;t</span>his._listeners={},this._collection=a,this._options.series=[],b.chartOptions=b.chartOptions||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>b.chartOptions.credits=!1;var c,d,e;switch(this._options.type){<span class="branch-0 cbranch-no" title="branch not covered" >case"pie":<span class="cstat-no" title="statement not covered" >this._selector.highcharts(this._options.chartOptions),this._chart=this._selector.highcharts(),c=this._collection.find(),d={allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"&lt;b&gt;{point.name}&lt;/b&gt;: {y} ({point.percentage:.0f}%)",style:{color:window.Highcharts.theme&amp;&amp;window.Highcharts.theme.contrastTextColor||"black"}}},e=this.pieDataFromCollectionData(c,this._options.keyField,this._options.valField),window.jQuery.extend(d,this._options.seriesOptions),window.jQuery.extend(d,{name:this._options.seriesName,data:e}),this._chart.addSeries(d,!0,!0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span></span>ase"line":case"area":case"column":case"bar":e=this.seriesDataFromCollectionData(this._options.seriesField,this._options.keyField,this._options.valField,this._options.orderBy),this._options.chartOptions.xAxis=e.xAxis,this._options.chartOptions.series=e.series,this._selector.highcharts(this._options.chartOptions),this._chart=this._selector.highcharts();break;<span class="branch-5 cbranch-no" title="branch not covered" >default:<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Highchart "'+a.name()+'": Chart type specified is not currently supported by ForerunnerDB: '+this._options.type}</span></span>this._hookEvents()},d.addModule("Highchart",h),e=d.modules.Collection,f=e.prototype.init,d.mixin(h.prototype,"Mixin.Events"),d.synthesize(h.prototype,"state"),h.prototype.pieDataFromCollectionData=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d,e=[];<span class="cstat-no" title="statement not covered" >f</span>or(d=0;d&lt;a.length;d++)<span class="cstat-no" title="statement not covered" >e.push([a[d][b],a[d][c]]);<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>,h.prototype.seriesDataFromCollectionData=function(a,b,c,d){var e,f,g,h,i,j,k=this._collection.distinct(a),l=[],m={categories:[]};for(i=0;i&lt;k.length;i++){for(e=k[i],f={},f[a]=e,h=[],g=this._collection.find(f,{orderBy:d}),j=0;j&lt;g.length;j++)m.categories.push(g[j][b]),h.push(g[j][c]);l.push({name:e,data:h})}return{xAxis:m,series:l}},h.prototype._hookEvents=function(){var a=this;a._collection.on("change",function(){a._changeListener.apply(a,arguments)}),a._collection.on("drop",function(){a.drop.apply(a,arguments)})},h.prototype._changeListener=function(){var a=this;<span class="missing-if-branch" title="if path not taken" >I</span>if("undefined"!=typeof a._collection&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >a._chart)</span>{<span class="cstat-no" title="statement not covered" >var b,c=a._collection.find();<span class="cstat-no" title="statement not covered" >s</span>witch(a._options.type){case"pie":<span class="cstat-no" title="statement not covered" >a._chart.series[0].setData(a.pieDataFromCollectionData(c,a._options.keyField,a._options.valField),!0,!0);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"bar":case"line":case"area":case"column":<span class="cstat-no" title="statement not covered" >var d=a.seriesDataFromCollectionData(a._options.seriesField,a._options.keyField,a._options.valField,a._options.orderBy);<span class="cstat-no" title="statement not covered" >f</span>or(a._chart.xAxis[0].setCategories(d.xAxis.categories),b=0;b&lt;d.series.length;b++)<span class="cstat-no" title="statement not covered" >a._chart.series[b]?a._chart.series[b].setData(d.series[b].data,!0,!0):a._chart.addSeries(d.series[b],!0,!0)}</span></span>}</span>},h.prototype.drop=function(){return"dropped"!==this._state?(this._state="dropped",this._chart&amp;&amp;this._chart.destroy(),this._collection&amp;&amp;(this._collection.off("change",this._changeListener),this._collection.off("drop",this.drop),this._collection._highcharts&amp;&amp;delete this._collection._highcharts[this._options.selector]),delete this._chart,delete this._options,delete this._collection,this.emit("drop",this),!0):<span class="branch-1 cbranch-no" title="branch not covered" >!0}</span>,e.prototype.init=function(){this._highcharts={},f.apply(this,arguments)},e.prototype.pieChart=new g({object:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.type="pie",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="pie",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]}</span>,"*, string, string, string, ...":<span class="fstat-no" title="function not covered" >function(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>e=e||{},e.selector=a,e.keyField=b,e.valField=c,e.seriesName=d,this.pieChart(e)}</span>}),e.prototype.lineChart=new g({object:function(a){return a.type="line",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="line",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]},"*, string, string, string, ...":function(a,b,c,d,e){e=e||{},e.seriesField=b,e.selector=a,e.keyField=c,e.valField=d,this.lineChart(e)}}),e.prototype.areaChart=new g({object:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.type="area",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="area",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]}</span>,"*, string, string, string, ...":<span class="fstat-no" title="function not covered" >function(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>e=e||{},e.seriesField=b,e.selector=a,e.keyField=c,e.valField=d,this.areaChart(e)}</span>}),e.prototype.columnChart=new g({object:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.type="column",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="column",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]}</span>,"*, string, string, string, ...":<span class="fstat-no" title="function not covered" >function(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>e=e||{},e.seriesField=b,e.selector=a,e.keyField=c,e.valField=d,this.columnChart(e)}</span>}),e.prototype.barChart=new g({object:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.type="bar",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="bar",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]}</span>,"*, string, string, string, ...":<span class="fstat-no" title="function not covered" >function(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>e=e||{},e.seriesField=b,e.selector=a,e.keyField=c,e.valField=d,this.barChart(e)}</span>}),e.prototype.stackedBarChart=new g({object:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.type="bar",a.chartOptions=a.chartOptions||{},a.chartOptions.chart=a.chartOptions.chart||{},a.chartOptions.chart.type="bar",a.plotOptions=a.plotOptions||{},a.plotOptions.series=a.plotOptions.series||{},a.plotOptions.series.stacking=a.plotOptions.series.stacking||"normal",this._highcharts[a.selector]||(this._highcharts[a.selector]=new h(this,a)),this._highcharts[a.selector]}</span>,"*, string, string, string, ...":<span class="fstat-no" title="function not covered" >function(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>e=e||{},e.seriesField=b,e.selector=a,e.keyField=c,e.valField=d,this.stackedBarChart(e)}</span>}),e.prototype.dropChart=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this._highcharts&amp;&amp;this._highcharts[a]&amp;&amp;this._highcharts[a].drop()}</span>,d.finishModule("Highchart"),b.exports=h},{"./Overload":27,"./Shared":33}],12:[function(a,b,c){"use strict";var d=a("./Shared"),e=a("./Path"),f=<span class="fstat-no" title="function not covered" >function(){</span>},g=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.init.apply(this,arguments)}</span>;g.prototype.init=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._btree=new(f.create(2,this.sortAsc)),this._size=0,this._id=this._itemKeyHash(a,a),this.unique(b&amp;&amp;b.unique?b.unique:!1),void 0!==a&amp;&amp;this.keys(a),void 0!==c&amp;&amp;this.collection(c),this.name(b&amp;&amp;b.name?b.name:this._id)}</span>,d.addModule("IndexBinaryTree",g),d.mixin(g.prototype,"Mixin.ChainReactor"),d.mixin(g.prototype,"Mixin.Sorting"),g.prototype.id=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._id}</span>,g.prototype.state=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._state}</span>,g.prototype.size=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._size}</span>,d.synthesize(g.prototype,"data"),d.synthesize(g.prototype,"name"),d.synthesize(g.prototype,"collection"),d.synthesize(g.prototype,"type"),d.synthesize(g.prototype,"unique"),g.prototype.keys=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a?(this._keys=a,this._keyCount=(new e).parse(this._keys).length,this):this._keys}</span>,g.prototype.rebuild=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(this._collection){<span class="cstat-no" title="statement not covered" >var a,b=this._collection.subset({},{$decouple:!1,$orderBy:this._keys}),c=b.find(),d=c.length;<span class="cstat-no" title="statement not covered" >f</span>or(this._btree=new(f.create(2,this.sortAsc)),this._unique&amp;&amp;(this._uniqueLookup={}),a=0;d&gt;a;a++)<span class="cstat-no" title="statement not covered" >this.insert(c[a])}<span class="cstat-no" title="statement not covered" ></span></span>t</span>his._state={name:this._name,keys:this._keys,indexSize:this._size,built:new Date,updated:new Date,ok:!0}}</span>,g.prototype.insert=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e=this._unique,f=this._itemKeyHash(a,this._keys);<span class="cstat-no" title="statement not covered" >e</span>&amp;&amp;(c=this._itemHash(a,this._keys),this._uniqueLookup[c]=a),d=this._btree.get(f),void 0===d&amp;&amp;(d=[],this._btree.put(f,d)),d.push(a),this._size++}</span>,g.prototype.remove=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e,f=this._unique,g=this._itemKeyHash(a,this._keys);<span class="cstat-no" title="statement not covered" >f</span>&amp;&amp;(c=this._itemHash(a,this._keys),delete this._uniqueLookup[c]),d=this._btree.get(g),void 0!==d&amp;&amp;(e=d.indexOf(a),e&gt;-1&amp;&amp;(1===d.length?this._btree.del(g):d.splice(e,1),this._size--))}</span>,g.prototype.violation=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this._itemHash(a,this._keys);<span class="cstat-no" title="statement not covered" >r</span>eturn Boolean(this._uniqueLookup[b])}</span>,g.prototype.hashViolation=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this._uniqueLookup[a])}</span>,g.prototype.lookup=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this._data[this._itemHash(a,this._keys)]||[]}</span>,g.prototype.match=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d=new e,f=d.parseArr(this._keys),g=d.parseArr(a),h=[],i=0;<span class="cstat-no" title="statement not covered" >f</span>or(c=0;c&lt;f.length;c++){<span class="cstat-no" title="statement not covered" >if(g[c]!==f[c])<span class="cstat-no" title="statement not covered" >return{matchedKeys:[],totalKeyCount:g.length,score:0};<span class="cstat-no" title="statement not covered" >i</span></span>++,h.push(g[c])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn{matchedKeys:h,totalKeyCount:g.length,score:i}}</span>,g.prototype._itemHash=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,f=new e,g="";<span class="cstat-no" title="statement not covered" >f</span>or(c=f.parse(b),d=0;d&lt;c.length;d++)<span class="cstat-no" title="statement not covered" >g&amp;&amp;(g+="_"),g+=f.value(a,c[d].path).join(":");<span class="cstat-no" title="statement not covered" >r</span></span>eturn g}</span>,g.prototype._itemKeyHash=<span class="fstat-no" title="function not covered" >function(a,b){</span>
<span class="cstat-no" title="statement not covered" >var c,d,f=new e,g="";<span class="cstat-no" title="statement not covered" >f</span>or(c=f.parse(b),d=0;d&lt;c.length;d++)<span class="cstat-no" title="statement not covered" >g&amp;&amp;(g+="_"),g+=f.keyValue(a,c[d].path);<span class="cstat-no" title="statement not covered" >r</span></span>eturn g}</span>,g.prototype._itemHashArr=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,f,g,h,i=new e,j=[];<span class="cstat-no" title="statement not covered" >f</span>or(c=i.parse(b),g=0;g&lt;c.length;g++)<span class="cstat-no" title="statement not covered" >for(d=i.value(a,c[g].path),f=0;f&lt;d.length;f++)<span class="cstat-no" title="statement not covered" >if(0===g)<span class="cstat-no" title="statement not covered" >j.push(d[f]);e</span>lse <span class="cstat-no" title="statement not covered" >for(h=0;h&lt;j.length;h++)<span class="cstat-no" title="statement not covered" >j[h]=j[h]+"_"+d[f];<span class="cstat-no" title="statement not covered" >r</span></span></span></span></span>eturn j}</span>,d.finishModule("IndexBinaryTree"),b.exports=g},{"./Path":29,"./Shared":33}],13:[function(a,b,c){"use strict";var d=a("./Shared"),e=a("./Path"),f=function(){this.init.apply(this,arguments)};f.prototype.init=function(a,b,c){this._crossRef={},this._size=0,this._id=this._itemKeyHash(a,a),this.data({}),this.unique(b&amp;&amp;b.unique?b.unique:!1),void 0!==a&amp;&amp;this.keys(a),void 0!==c&amp;&amp;this.collection(c),this.name(b&amp;&amp;b.name?b.name:this._id)},d.addModule("IndexHashMap",f),d.mixin(f.prototype,"Mixin.ChainReactor"),f.prototype.id=function(){return this._id},f.prototype.state=function(){return this._state},f.prototype.size=function(){return this._size},d.synthesize(f.prototype,"data"),d.synthesize(f.prototype,"name"),d.synthesize(f.prototype,"collection"),d.synthesize(f.prototype,"type"),d.synthesize(f.prototype,"unique"),f.prototype.keys=function(a){return void 0!==a?(this._keys=a,this._keyCount=(new e).parse(this._keys).length,this):<span class="branch-1 cbranch-no" title="branch not covered" >this._keys}</span>,f.prototype.rebuild=function(){<span class="missing-if-branch" title="else path not taken" >E</span>if(this._collection){var a,b=this._collection.subset({},{$decouple:!1,$orderBy:this._keys}),c=b.find(),d=c.length;for(this._data={},this._unique&amp;&amp;(this._uniqueLookup={}),a=0;d&gt;a;a++)this.insert(c[a])}this._state={name:this._name,keys:this._keys,indexSize:this._size,built:new Date,updated:new Date,ok:!0}},f.prototype.insert=function(a,b){var c,d,e,f=this._unique;for(f&amp;&amp;(c=this._itemHash(a,this._keys),this._uniqueLookup[c]=a),d=this._itemHashArr(a,this._keys),e=0;e&lt;d.length;e++)this.pushToPathValue(d[e],a)},f.prototype.update=<span class="fstat-no" title="function not covered" >function(a,b){</span>},f.prototype.remove=function(a,b){var c,d,e,f=this._unique;for(f&amp;&amp;(c=this._itemHash(a,this._keys),delete this._uniqueLookup[c]),d=this._itemHashArr(a,this._keys),e=0;e&lt;d.length;e++)this.pullFromPathValue(d[e],a)},f.prototype.violation=function(a){var b=this._itemHash(a,this._keys);return Boolean(this._uniqueLookup[b])},f.prototype.hashViolation=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this._uniqueLookup[a])}</span>,f.prototype.pushToPathValue=function(a,b){var c=this._data[a]=this._data[a]||[];-1===c.indexOf(b)&amp;&amp;(c.push(b),this._size++,this.pushToCrossRef(b,c))},f.prototype.pullFromPathValue=function(a,b){var c,d=this._data[a];c=d.indexOf(b),c&gt;-1&amp;&amp;(d.splice(c,1),this._size--,this.pullFromCrossRef(b,d)),d.length||delete this._data[a]},f.prototype.pull=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d=a[this._collection.primaryKey()],e=this._crossRef[d],f=e.length;<span class="cstat-no" title="statement not covered" >f</span>or(b=0;f&gt;b;b++)<span class="cstat-no" title="statement not covered" >c=e[b],this._pullFromArray(c,a);<span class="cstat-no" title="statement not covered" >t</span></span>his._size--,delete this._crossRef[d]}</span>,f.prototype._pullFromArray=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>for(var c=a.length;c--;)<span class="cstat-no" title="statement not covered" >a[c]===b&amp;&amp;a.splice(c,1)}</span></span>,f.prototype.pushToCrossRef=function(a,b){var c,d=a[this._collection.primaryKey()];this._crossRef[d]=this._crossRef[d]||[],c=this._crossRef[d],-1===c.indexOf(b)&amp;&amp;c.push(b)},f.prototype.pullFromCrossRef=function(a,b){var c=a[this._collection.primaryKey()];delete this._crossRef[c]},f.prototype.lookup=function(a){return this._data[this._itemHash(a,this._keys)]||<span class="branch-1 cbranch-no" title="branch not covered" >[]}</span>,f.prototype.match=function(a,b){var c,d=new e,f=d.parseArr(this._keys),g=d.parseArr(a),h=[],i=0;for(c=0;c&lt;f.length;c++){if(g[c]!==f[c])return{matchedKeys:[],totalKeyCount:g.length,score:0};i++,h.push(g[c])}return{matchedKeys:h,totalKeyCount:g.length,score:i}},f.prototype._itemHash=function(a,b){var c,d,f=new e,g="";for(c=f.parse(b),d=0;d&lt;c.length;d++)g&amp;&amp;(g+="_"),g+=f.value(a,c[d].path).join(":");return g},f.prototype._itemKeyHash=function(a,b){var c,d,f=new e,g="";for(c=f.parse(b),d=0;d&lt;c.length;d++)g&amp;&amp;(g+="_"),g+=f.keyValue(a,c[d].path);return g},f.prototype._itemHashArr=function(a,b){var c,d,f,g,h,i=new e,j=[];for(c=i.parse(b),g=0;g&lt;c.length;g++)for(d=i.value(a,c[g].path),f=0;f&lt;d.length;f++)if(0===g)j.push(d[f]);else for(h=0;h&lt;j.length;h++)j[h]=j[h]+"_"+d[f];return j},d.finishModule("IndexHashMap"),b.exports=f},{"./Path":29,"./Shared":33}],14:[function(a,b,c){"use strict";var d=a("./Shared"),e=function(a){this.init.apply(this,arguments)};e.prototype.init=function(a){this._name=a,this._data={},this._primaryKey="_id"},d.addModule("KeyValueStore",e),d.mixin(e.prototype,"Mixin.ChainReactor"),d.synthesize(e.prototype,"name"),e.prototype.primaryKey=function(a){return void 0!==a?(this._primaryKey=a,this):<span class="branch-1 cbranch-no" title="branch not covered" >this._primaryKey}</span>,e.prototype.truncate=function(){return this._data={},this},e.prototype.set=function(a,b){return this._data[a]=b?b:<span class="branch-1 cbranch-no" title="branch not covered" >!0,</span>this},e.prototype.get=function(a){return this._data[a]},e.prototype.lookup=function(a){var b,c,d,e,f=a[this._primaryKey];if(f instanceof Array){for(c=f.length,e=[],b=0;c&gt;b;b++)d=this._data[f[b]],d&amp;&amp;e.push(d);return e}<span class="missing-if-branch" title="if path not taken" >I</span>if(f instanceof RegExp){<span class="cstat-no" title="statement not covered" >e=[];<span class="cstat-no" title="statement not covered" >f</span>or(b in this._data)<span class="cstat-no" title="statement not covered" >this._data.hasOwnProperty(b)&amp;&amp;f.test(b)&amp;&amp;e.push(this._data[b]);<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>if("object"!=typeof f)return d=this._data[f],void 0!==d?[d]:[];if(f.$ne){e=[];for(b in this._data)this._data.hasOwnProperty(b)&amp;&amp;b!==f.$ne&amp;&amp;e.push(this._data[b]);return e}if(f.$in&amp;&amp;f.$in instanceof Array){e=[];for(b in this._data)this._data.hasOwnProperty(b)&amp;&amp;f.$in.indexOf(b)&gt;-1&amp;&amp;e.push(this._data[b]);return e}<span class="missing-if-branch" title="else path not taken" >E</span>if(f.$nin&amp;&amp;f.$nin instanceof Array){e=[];for(b in this._data)this._data.hasOwnProperty(b)&amp;&amp;-1===f.$nin.indexOf(b)&amp;&amp;e.push(this._data[b]);return e}<span class="cstat-no" title="statement not covered" >if(f.$or&amp;&amp;f.$or instanceof Array){<span class="cstat-no" title="statement not covered" >for(e=[],b=0;b&lt;f.$or.length;b++)<span class="cstat-no" title="statement not covered" >e=e.concat(this.lookup(f.$or[b]));<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>}</span>,e.prototype.unSet=function(a){return delete this._data[a],this},e.prototype.uniqueSet=function(a,b){return void 0===this._data[a]?(this._data[a]=b,!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>,d.finishModule("KeyValueStore"),b.exports=e},{"./Shared":33}],15:[function(a,b,c){"use strict";var d=a("./Shared"),e=a("./Operation"),f=function(){this.init.apply(this,arguments)};f.prototype.init=function(){this._data=[]},d.addModule("Metrics",f),d.mixin(f.prototype,"Mixin.ChainReactor"),f.prototype.create=function(a){var b=new e(a);return this._enabled&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this._data.push(b),</span>b},f.prototype.start=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._enabled=!0,this}</span>,f.prototype.stop=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._enabled=!1,this}</span>,f.prototype.clear=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._data=[],this}</span>,f.prototype.list=function(){return this._data},d.finishModule("Metrics"),b.exports=f},{"./Operation":26,"./Shared":33}],16:[function(a,b,c){"use strict";var d={preSetData:function(){},postSetData:<span class="fstat-no" title="function not covered" >function(){</span>}};b.exports=d},{}],17:[function(a,b,c){"use strict";var d={chain:function(a){this._chain=this._chain||[];var b=this._chain.indexOf(a);-1===b&amp;&amp;this._chain.push(a)},unChain:function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(this._chain){var b=this._chain.indexOf(a);b&gt;-1&amp;&amp;this._chain.splice(b,1)}},chainSend:function(a,b,c){if(this._chain){var d,e,f=this._chain,g=f.length;for(e=0;g&gt;e;e++){<span class="missing-if-branch" title="if path not taken" >I</span>if(d=f[e],d._state&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >!d._state|</span>|<span class="branch-2 cbranch-no" title="branch not covered" >"dropped"===d._state)</span>)<span class="cstat-no" title="statement not covered" >throw console.log("Reactor Data:",a,b,c),console.log("Reactor Node:",d),"Chain reactor attempting to send data to target reactor node that is in a dropped state!";d</span>.chainReceive(this,a,b,c)}}},chainReceive:function(a,b,c,d){var e={sender:a,type:b,data:c,options:d};(!this._chainHandler||this._chainHandler&amp;&amp;!this._chainHandler(e))&amp;&amp;this.chainSend(e.type,e.data,e.options)}};b.exports=d},{}],18:[function(a,b,c){"use strict";var d,e=0,f=a("./Overload");d={store:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >if(void 0!==b)<span class="cstat-no" title="statement not covered" >return this._store=this._store||{},this._store[a]=b,this;<span class="cstat-no" title="statement not covered" >i</span></span>f(this._store)<span class="cstat-no" title="statement not covered" >return this._store[a]}<span class="cstat-no" title="statement not covered" ></span></span>r</span>eturn void 0}</span>,unStore:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a&amp;&amp;delete this._store[a],this}</span>,decouple:function(a,b){if(void 0!==a){<span class="missing-if-branch" title="if path not taken" >I</span>if(b){<span class="cstat-no" title="statement not covered" >var c,d=JSON.stringify(a),e=[];<span class="cstat-no" title="statement not covered" >f</span>or(c=0;b&gt;c;c++)<span class="cstat-no" title="statement not covered" >e.push(JSON.parse(d));<span class="cstat-no" title="statement not covered" >r</span></span>eturn e}</span>return JSON.parse(JSON.stringify(a))}return void 0},objectId:function(a){var b,c=Math.pow(10,17);if(a){var d,f=0,g=a.length;for(d=0;g&gt;d;d++)f+=a.charCodeAt(d)*c;b=f.toString(16)}else e++,b=(e+(Math.random()*c+Math.random()*c+Math.random()*c+Math.random()*c)).toString(16);return b},debug:new f([function(){return this._debug&amp;&amp;this._debug.all},<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a?"boolean"==typeof a?(this._debug=this._debug||{},this._debug.all=a,this.chainSend("debug",this._debug),this):this._debug&amp;&amp;this._debug[a]||this._db&amp;&amp;this._db._debug&amp;&amp;this._db._debug[a]||this._debug&amp;&amp;this._debug.all:this._debug&amp;&amp;this._debug.all}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a?void 0!==b?(this._debug=this._debug||{},this._debug[a]=b,this.chainSend("debug",this._debug),this):this._debug&amp;&amp;this._debug[b]||this._db&amp;&amp;this._db._debug&amp;&amp;this._db._debug[a]:this._debug&amp;&amp;this._debug.all}</span>])},b.exports=d},{"./Overload":27}],19:[function(a,b,c){"use strict";var d={TYPE_INSERT:0,TYPE_UPDATE:1,TYPE_REMOVE:2,PHASE_BEFORE:0,PHASE_AFTER:1};b.exports=d},{}],20:[function(a,b,c){"use strict";var d=a("./Overload"),e={on:new d({"string, function":function(a,b){return this._listeners=this._listeners||{},this._listeners[a]=this._listeners[a]||{},this._listeners[a]["*"]=this._listeners[a]["*"]||[],this._listeners[a]["*"].push(b),this},"string, *, function":function(a,b,c){return this._listeners=this._listeners||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>this._listeners[a]=this._listeners[a]||{},this._listeners[a][b]=this._listeners[a][b]||[],this._listeners[a][b].push(c),this}}),off:new d({string:function(a){return this._listeners&amp;&amp;this._listeners[a]&amp;&amp;a in this._listeners&amp;&amp;delete this._listeners[a],this},"string, function":function(a,b){var c,d;return"string"==typeof b?<span class="branch-0 cbranch-no" title="branch not covered" >this._listeners&amp;&amp;this._listeners[a]&amp;&amp;this._listeners[a][b]&amp;&amp;delete this._listeners[a][b]:</span>this._listeners&amp;&amp;a in this._listeners&amp;&amp;(c=this._listeners[a]["*"],d=c.indexOf(b),d&gt;-1&amp;&amp;c.splice(d,1)),this},"string, *, function":<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(this._listeners&amp;&amp;a in this._listeners&amp;&amp;b in this.listeners[a]){<span class="cstat-no" title="statement not covered" >var d=this._listeners[a][b],e=d.indexOf(c);<span class="cstat-no" title="statement not covered" >e</span>&gt;-1&amp;&amp;d.splice(e,1)}</span>}</span>,"string, *":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>this._listeners&amp;&amp;a in this._listeners&amp;&amp;b in this._listeners[a]&amp;&amp;delete this._listeners[a][b]}</span>}),emit:function(a,b){if(this._listeners=this._listeners||{},a in this._listeners){var c,d;if(this._listeners[a]["*"]){var e=this._listeners[a]["*"];for(d=e.length,c=0;d&gt;c;c++)e[c].apply(this,Array.prototype.slice.call(arguments,1))}if(b instanceof Array&amp;&amp;b[0]&amp;&amp;b[0][this._primaryKey]){var f,g,h=this._listeners[a];for(d=b.length,c=0;d&gt;c;c++)if(h[b[c][this._primaryKey]])for(f=h[b[c][this._primaryKey]].length,g=0;f&gt;g;g++)h[b[c][this._primaryKey]][g].apply(this,Array.prototype.slice.call(arguments,1))}}return this}};b.exports=e},{"./Overload":27}],21:[function(a,b,c){"use strict";var d={_match:function(a,b,c,d){var e,f,g,h,i,j,k,l=typeof a,m=typeof b,n=!0;if(d=d||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>d.$rootQuery||(d.$rootQuery=b),d.$rootData=d.$rootData||{},"string"!==l&amp;&amp;"number"!==l||"string"!==m&amp;&amp;"number"!==m){for(k in b)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.hasOwnProperty(k)){if(e=!1,j=k.substr(0,2),"//"===j)continue;if(0===j.indexOf("$")&amp;&amp;(i=this._matchOp(k,a,b[k],d),i&gt;-1)){if(i){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=i;e=!0}if(!e&amp;&amp;b[k]instanceof RegExp)if(e=!0,"object"==typeof a&amp;&amp;void 0!==a[k]&amp;&amp;b[k].test(a[k])){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=!1;if(!e)if("object"==typeof b[k])if(void 0!==a[k])if(a[k]instanceof Array&amp;&amp;!(b[k]instanceof Array)){for(g=!1,h=0;h&lt;a[k].length&amp;&amp;!(g=this._match(a[k][h],b[k],f,d));h++);if(g){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=!1}else if(!(a[k]instanceof Array)&amp;&amp;b[k]instanceof Array){for(g=!1,h=0;h&lt;b[k].length&amp;&amp;!(g=this._match(a[k],b[k][h],f,d));h++);<span class="missing-if-branch" title="else path not taken" >E</span>if(g){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else <span class="cstat-no" title="statement not covered" >n=!1}</span>else <span class="missing-if-branch" title="else path not taken" >E</span>if("object"==typeof a)if(g=this._match(a[k],b[k],f,d)){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=!1;else <span class="cstat-no" title="statement not covered" >if(g=this._match(void 0,b[k],f,d)){<span class="cstat-no" title="statement not covered" >if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span></span>else <span class="cstat-no" title="statement not covered" >n=!1;e</span></span>lse <span class="missing-if-branch" title="else path not taken" >E</span>if(b[k]&amp;&amp;void 0!==b[k].$exists)if(g=this._match(void 0,b[k],f,d)){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=!1;else <span class="cstat-no" title="statement not covered" >n=!1;e</span>lse if(a&amp;&amp;a[k]===b[k]){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else if(a&amp;&amp;a[k]&amp;&amp;a[k]instanceof Array&amp;&amp;b[k]&amp;&amp;"object"!=typeof b[k]){for(g=!1,h=0;h&lt;a[k].length&amp;&amp;!(g=this._match(a[k][h],b[k],f,d));h++);if(g){<span class="missing-if-branch" title="if path not taken" >I</span>if("or"===c)<span class="cstat-no" title="statement not covered" >return!0}</span>else n=!1}else n=!1;if("and"===c&amp;&amp;!n)return!1}}else"number"===l?<span class="branch-0 cbranch-no" title="branch not covered" >a!==b&amp;&amp;(n=!1):</span>a.localeCompare(b)&amp;&amp;(n=!1);return n},_matchOp:function(a,b,c,d){switch(a){case"$gt":return b&gt;c;case"$gte":return b&gt;=c;case"$lt":return c&gt;b;case"$lte":return c&gt;=b;case"$exists":return void 0===b!==c;case"$ne":return b!=c;case"$or":for(var e=0;e&lt;c.length;e++)if(this._match(b,c[e],"and",d))return!0;return!1;case"$and":for(var f=0;f&lt;c.length;f++)if(!this._match(b,c[f],"and",d))return!1;return!0;case"$in":<span class="missing-if-branch" title="else path not taken" >E</span>if(c instanceof Array){var g,h=c,i=h.length;for(g=0;i&gt;g;g++)if(h[g]===b)return!0;return!1}<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Mixin.Matching "'+this.name()+'": Cannot use an $in operator on a non-array key: '+a;c</span>ase"$nin":<span class="missing-if-branch" title="else path not taken" >E</span>if(c instanceof Array){var j,k=c,l=k.length;for(j=0;l&gt;j;j++)if(k[j]===b)return!1;return!0}<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Mixin.Matching "'+this.name()+'": Cannot use a $nin operator on a non-array key: '+a;c</span>ase"$distinct":d.$rootData["//distinctLookup"]=d.$rootData["//distinctLookup"]||{};for(var m in c)<span class="missing-if-branch" title="else path not taken" >E</span>if(c.hasOwnProperty(m))return d.$rootData["//distinctLookup"][m]=d.$rootData["//distinctLookup"][m]||{},d.$rootData["//distinctLookup"][m][b[m]]?!1:(d.$rootData["//distinctLookup"][m][b[m]]=!0,!0)}<span class="cstat-no" title="statement not covered" >return-1}</span>};b.exports=d},{}],22:[function(a,b,c){"use strict";var d={sortAsc:function(a,b){return"string"==typeof a&amp;&amp;"string"==typeof b?a.localeCompare(b):a&gt;b?1:b&gt;a?-1:0},sortDesc:function(a,b){return"string"==typeof a&amp;&amp;"string"==typeof b?b.localeCompare(a):a&gt;b?-1:b&gt;a?1:0}};b.exports=d},{}],23:[function(a,b,c){"use strict";var d=a("./Overload"),e={addTrigger:function(a,b,c,d){var e,f=this;return e=f._triggerIndexOf(a,b,c),-1===e?(f._trigger=f._trigger||{},f._trigger[b]=f._trigger[b]||{},f._trigger[b][c]=f._trigger[b][c]||[],f._trigger[b][c].push({id:a,method:d,enabled:!0}),!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>,removeTrigger:<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d,e=this;<span class="cstat-no" title="statement not covered" >r</span>eturn d=e._triggerIndexOf(a,b,c),d&gt;-1&amp;&amp;e._trigger[b][c].splice(d,1),!1}</span>,enableTrigger:new d({string:function(a){var b,c,d,e,f,g=this,h=g._trigger,i=!1;<span class="missing-if-branch" title="else path not taken" >E</span>if(h)for(f in h)<span class="missing-if-branch" title="else path not taken" >E</span>if(h.hasOwnProperty(f)&amp;&amp;(b=h[f]))for(d in b)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.hasOwnProperty(d))for(c=b[d],e=0;e&lt;c.length;e++)c[e].id===a&amp;&amp;(c[e].enabled=!0,i=!0);return i},number:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d,e=this,f=e._trigger[a],g=!1;<span class="cstat-no" title="statement not covered" >i</span>f(f)<span class="cstat-no" title="statement not covered" >for(c in f)<span class="cstat-no" title="statement not covered" >if(f.hasOwnProperty(c))<span class="cstat-no" title="statement not covered" >for(b=f[c],d=0;d&lt;b.length;d++)<span class="cstat-no" title="statement not covered" >b[d].enabled=!0,g=!0;<span class="cstat-no" title="statement not covered" >r</span></span></span></span></span>eturn g}</span>,"number, number":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e=this,f=e._trigger[a],g=!1;<span class="cstat-no" title="statement not covered" >i</span>f(f&amp;&amp;(c=f[b]))<span class="cstat-no" title="statement not covered" >for(d=0;d&lt;c.length;d++)<span class="cstat-no" title="statement not covered" >c[d].enabled=!0,g=!0;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn g}</span>,"string, number, number":<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=this,e=d._triggerIndexOf(a,b,c);<span class="cstat-no" title="statement not covered" >r</span>eturn e&gt;-1?(d._trigger[b][c][e].enabled=!0,!0):!1}</span>}),disableTrigger:new d({string:function(a){var b,c,d,e,f,g=this,h=g._trigger,i=!1;<span class="missing-if-branch" title="else path not taken" >E</span>if(h)for(f in h)<span class="missing-if-branch" title="else path not taken" >E</span>if(h.hasOwnProperty(f)&amp;&amp;(b=h[f]))for(d in b)<span class="missing-if-branch" title="else path not taken" >E</span>if(b.hasOwnProperty(d))for(c=b[d],e=0;e&lt;c.length;e++)c[e].id===a&amp;&amp;(c[e].enabled=!1,i=!0);return i},number:function(a){var b,c,d,e=this,f=e._trigger[a],g=!1;<span class="missing-if-branch" title="else path not taken" >E</span>if(f)for(c in f)<span class="missing-if-branch" title="else path not taken" >E</span>if(f.hasOwnProperty(c))for(b=f[c],d=0;d&lt;b.length;d++)b[d].enabled=!1,g=!0;return g},"number, number":function(a,b){var c,d,e=this,f=e._trigger[a],g=!1;<span class="missing-if-branch" title="else path not taken" >E</span>if(f&amp;&amp;(c=f[b]))for(d=0;d&lt;c.length;d++)c[d].enabled=!1,g=!0;return g},"string, number, number":function(a,b,c){var d=this,e=d._triggerIndexOf(a,b,c);return e&gt;-1?(d._trigger[b][c][e].enabled=!1,!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>}),willTrigger:function(a,b){if(this._trigger&amp;&amp;this._trigger[a]&amp;&amp;this._trigger[a][b]&amp;&amp;this._trigger[a][b].length){var c,d=this._trigger[a][b];for(c=0;c&lt;d.length;c++)if(d[c].enabled)return!0}return!1},processTrigger:function(a,b,c,d,e){var f,g,h,i,j,k=this;if(k._trigger&amp;&amp;k._trigger[b]&amp;&amp;k._trigger[b][c]){for(f=k._trigger[b][c],h=f.length,g=0;h&gt;g;g++)<span class="missing-if-branch" title="else path not taken" >E</span>if(i=f[g],i.enabled){<span class="missing-if-branch" title="if path not taken" >I</span>if(this.debug()){<span class="cstat-no" title="statement not covered" >var l,m;<span class="cstat-no" title="statement not covered" >s</span>witch(b){case this.TYPE_INSERT:<span class="cstat-no" title="statement not covered" >l="insert";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase this.TYPE_UPDATE:<span class="cstat-no" title="statement not covered" >l="update";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase this.TYPE_REMOVE:<span class="cstat-no" title="statement not covered" >l="remove";<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >l=""}<span class="cstat-no" title="statement not covered" ></span>s</span>witch(c){case this.PHASE_BEFORE:<span class="cstat-no" title="statement not covered" >m="before";<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase this.PHASE_AFTER:<span class="cstat-no" title="statement not covered" >m="after";<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >m=""}</span>}</span>if(j=i.method.call(k,a,d,e),j===!1)return!1;<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0!==j&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >j!==!0&amp;</span>&amp;<span class="branch-2 cbranch-no" title="branch not covered" >j!==!1)<span class="cstat-no" title="statement not covered" ></span>throw"ForerunnerDB.Mixin.Triggers: Trigger error: "+j}</span>return!0}},_triggerIndexOf:function(a,b,c){var d,e,f,g=this;if(g._trigger&amp;&amp;g._trigger[b]&amp;&amp;g._trigger[b][c])for(d=g._trigger[b][c],e=d.length,f=0;e&gt;f;f++)<span class="missing-if-branch" title="else path not taken" >E</span>if(d[f].id===a)return f;return-1}};b.exports=e},{"./Overload":27}],24:[function(a,b,c){"use strict";var d={_updateProperty:function(a,b,c){a[b]=c,this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.Mixin.Updating: Setting non-data-bound document property "'+b+'" for "'+this.name()+'"')}</span>,_updateIncrement:function(a,b,c){a[b]+=c},_updateSpliceMove:function(a,b,c){a.splice(c,0,a.splice(b,1)[0]),this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.Mixin.Updating: Moving non-data-bound document array index from "'+b+'" to "'+c+'" for "'+this.name()+'"')}</span>,_updateSplicePush:function(a,b,c){a.length&gt;b?a.splice(b,0,c):<span class="branch-1 cbranch-no" title="branch not covered" >a.push(c)}</span>,_updatePush:function(a,b){a.push(b)},_updatePull:function(a,b){a.splice(b,1)},_updateMultiply:function(a,b,c){a[b]*=c},_updateRename:function(a,b,c){a[c]=a[b],delete a[b]},_updateOverwrite:function(a,b,c){a[b]=c},_updateUnset:function(a,b){delete a[b]},_updateClear:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d=a[b];<span class="cstat-no" title="statement not covered" >i</span>f(d&amp;&amp;"object"==typeof d)<span class="cstat-no" title="statement not covered" >for(c in d)<span class="cstat-no" title="statement not covered" >d.hasOwnProperty(c)&amp;&amp;this._updateUnset(d,c)}</span></span></span>,_updatePop:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=!1;<span class="cstat-no" title="statement not covered" >r</span>eturn a.length&gt;0&amp;&amp;(1===b?(a.pop(),c=!0):-1===b&amp;&amp;(a.shift(),c=!0)),c}</span>};b.exports=d},{}],25:[function(a,b,c){"use strict";var d,e;d=a("./Shared");var f=function(){this.init.apply(this,arguments)};f.prototype.init=function(a){var b=this;b._collectionDroppedWrap=function(){b._collectionDropped.apply(b,arguments)},b.from(a)},d.addModule("Odm",f),d.mixin(f.prototype,"Mixin.Common"),d.mixin(f.prototype,"Mixin.ChainReactor"),d.mixin(f.prototype,"Mixin.Constants"),d.mixin(f.prototype,"Mixin.Events"),e=a("./Collection"),d.synthesize(f.prototype,"state"),d.synthesize(f.prototype,"parent"),d.synthesize(f.prototype,"query"),d.synthesize(f.prototype,"from",function(a){return void 0!==a&amp;&amp;(a.chain(this),a.on("drop",this._collectionDroppedWrap)),this.$super(a)}),f.prototype._collectionDropped=function(a){this.drop()},f.prototype._chainHandler=function(a){switch(a.type){<span class="branch-0 cbranch-no" title="branch not covered" >case"setData":<span class="branch-1 cbranch-no" title="branch not covered" >c</span>ase"insert":c</span>ase"update":case"remove":}},f.prototype.drop=function(){return"dropped"!==this.state()&amp;&amp;(this.state("dropped"),this.emit("drop",this),this._from&amp;&amp;delete this._from._odm,delete this._name),!0},f.prototype.$=function(a,b){var c,d,g,h;return a===this._from.primaryKey()?(d={},d[a]=b,c=this._from.find(d,{$decouple:!1}),g=new e,g.setData(c,{$decouple:!1}),g._linked=this._from._linked):(g=new e,c=this._from.find({},{$decouple:!1}),c[0]&amp;&amp;c[0][a]&amp;&amp;(g.setData(c[0][a],{$decouple:!1}),b&amp;&amp;(c=g.find(b,{$decouple:!1}),g.setData(c,{$decouple:!1}))),g._linked=this._from._linked),h=new f(g),h.parent(this),h.query(b),h},f.prototype.prop=function(a,b){var c;<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==b)return c={},c[a]=b,this._from.update({},c);<span class="cstat-no" title="statement not covered" >if(this._from._data[0])<span class="cstat-no" title="statement not covered" >return this._from._data[0][a]}<span class="cstat-no" title="statement not covered" ></span></span>return void 0}</span>,e.prototype.odm=function(){return this._odm||(this._odm=new f(this)),this._odm},d.finishModule("Odm"),b.exports=f},{"./Collection":4,"./Shared":33}],26:[function(a,b,c){"use strict";var d=a("./Shared"),e=a("./Path"),f=function(a){this.pathSolver=new e,this.counter=0,this.init.apply(this,arguments)};f.prototype.init=function(a){this._data={operation:a,index:{potential:[],used:!1},steps:[],time:{startMs:0,stopMs:0,totalMs:0,process:{}},flag:{},log:[]}},d.addModule("Operation",f),d.mixin(f.prototype,"Mixin.ChainReactor"),f.prototype.start=function(){this._data.time.startMs=(new Date).getTime()},f.prototype.log=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a){<span class="cstat-no" title="statement not covered" >var b=this._log.length&gt;0?this._data.log[this._data.log.length-1].time:0,c={event:a,time:(new Date).getTime(),delta:0};<span class="cstat-no" title="statement not covered" >r</span>eturn this._data.log.push(c),b&amp;&amp;(c.delta=c.time-b),this}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this._data.log}</span>,f.prototype.time=function(a){if(void 0!==a){var b=this._data.time.process,c=b[a]=b[a]||{};return c.startMs?(c.stopMs=(new Date).getTime(),c.totalMs=c.stopMs-c.startMs,c.stepObj.totalMs=c.totalMs,delete c.stepObj):(c.startMs=(new Date).getTime(),c.stepObj={name:a},this._data.steps.push(c.stepObj)),this}return this._data.time},f.prototype.flag=function(a,b){return void 0===a||void 0===b?<span class="branch-0 cbranch-no" title="branch not covered" >void 0!==a?this._data.flag[a]:this._data.flag:</span>void(this._data.flag[a]=b)},f.prototype.data=function(a,b,c){return void 0!==b?(this.pathSolver.set(this._data,a,b),this):this.pathSolver.get(this._data,a)},f.prototype.pushData=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this.pathSolver.push(this._data,a,b)}</span>,f.prototype.stop=function(){this._data.time.stopMs=(new Date).getTime(),this._data.time.totalMs=this._data.time.stopMs-this._data.time.startMs},d.finishModule("Operation"),b.exports=f},{"./Path":29,"./Shared":33}],27:[function(a,b,c){"use strict";var d=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(a){var b,c,d,e,f,g,h=this;if(!(a instanceof Array)){d={};for(b in a)<span class="missing-if-branch" title="else path not taken" >E</span>if(a.hasOwnProperty(b))if(e=b.replace(/ /g,""),-1===e.indexOf("*"))d[e]=a[b];else for(g=this.generateSignaturePermutations(e),f=0;f&lt;g.length;f++)d[g[f]]||(d[g[f]]=a[b]);a=d}return function(){var d,e,f,g=[];if(a instanceof Array){for(c=a.length,b=0;c&gt;b;b++)<span class="missing-if-branch" title="else path not taken" >E</span>if(a[b].length===arguments.length)return h.callExtend(this,"$main",a,a[b],arguments)}else{for(b=0;b&lt;arguments.length&amp;&amp;(e=typeof arguments[b],"object"===e&amp;&amp;arguments[b]instanceof Array&amp;&amp;(e="array"),1!==arguments.length||"undefined"!==e);b++)g.push(e);if(d=g.join(","),a[d])return h.callExtend(this,"$main",a,a[d],arguments);for(b=g.length;b&gt;=0;b--)if(d=g.slice(0,b).join(","),a[d+",..."])return h.callExtend(this,"$main",a,a[d+",..."],arguments)}<span class="cstat-no" title="statement not covered" >throw f="function"==typeof this.name?this.name():"Unknown",'ForerunnerDB.Overload "'+f+'": Overloaded method does not have a matching signature for the passed arguments: '+JSON.stringify(g)}</span>}<span class="cstat-no" title="statement not covered" >return <span class="fstat-no" title="function not covered" >function(){</span>}}</span>;d.prototype.generateSignaturePermutations=function(a){var b,c,d=[],e=["string","object","number","function","undefined"];if(a.indexOf("*")&gt;-1)for(c=0;c&lt;e.length;c++)b=a.replace("*",e[c]),d=d.concat(this.generateSignaturePermutations(b));else d.push(a);return d},d.prototype.callExtend=function(a,b,c,d,e){var f,g;return a&amp;&amp;c[b]?(f=a[b],a[b]=c[b],g=d.apply(a,e),a[b]=f,g):d.apply(a,e)},b.exports=d},{}],28:[function(a,b,c){"use strict";var d,e,f,g;d=a("./Shared");var h=function(){this.init.apply(this,arguments)};h.prototype.init=function(a){var b=this;this._name=a,this._data=new g("__FDB__dc_data_"+this._name),this._collData=new f,this._collections=[],this._collectionDroppedWrap=function(){b._collectionDropped.apply(b,arguments)}},d.addModule("Overview",h),d.mixin(h.prototype,"Mixin.Common"),d.mixin(h.prototype,"Mixin.ChainReactor"),d.mixin(h.prototype,"Mixin.Constants"),d.mixin(h.prototype,"Mixin.Triggers"),d.mixin(h.prototype,"Mixin.Events"),f=a("./Collection"),g=a("./Document"),e=d.modules.Db,d.synthesize(h.prototype,"state"),d.synthesize(h.prototype,"db"),d.synthesize(h.prototype,"name"),d.synthesize(h.prototype,"query",function(a){var b=this.$super(a);return void 0!==a&amp;&amp;this._refresh(),b}),d.synthesize(h.prototype,"queryOptions",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this.$super(a);<span class="cstat-no" title="statement not covered" >r</span>eturn void 0!==a&amp;&amp;this._refresh(),b}</span>),d.synthesize(h.prototype,"reduce",function(a){var b=this.$super(a);return void 0!==a&amp;&amp;this._refresh(),b}),h.prototype.from=function(a){return void 0!==a?("string"==typeof a&amp;&amp;(a=this._db.collection(a)),this._setFrom(a),this):this._collections},h.prototype.find=function(){return this._collData.find.apply(this._collData,arguments)},h.prototype.exec=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this.reduce();<span class="cstat-no" title="statement not covered" >r</span>eturn a?a.apply(this):void 0}</span>,h.prototype.count=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._collData.count.apply(this._collData,arguments)}</span>,h.prototype._setFrom=function(a){for(;this._collections.length;)<span class="cstat-no" title="statement not covered" >this._removeCollection(this._collections[0]);r</span>eturn this._addCollection(a),this},h.prototype._addCollection=function(a){return-1===this._collections.indexOf(a)&amp;&amp;(this._collections.push(a),a.chain(this),a.on("drop",this._collectionDroppedWrap),this._refresh()),this},h.prototype._removeCollection=function(a){var b=this._collections.indexOf(a);return b&gt;-1&amp;&amp;(this._collections.splice(a,1),a.unChain(this),a.off("drop",this._collectionDroppedWrap),this._refresh()),this},h.prototype._collectionDropped=function(a){a&amp;&amp;this._removeCollection(a)},h.prototype._refresh=function(){if("dropped"!==this._state){if(this._collections&amp;&amp;this._collections[0]){this._collData.primaryKey(this._collections[0].primaryKey());var a,b=[];for(a=0;a&lt;this._collections.length;a++)b=b.concat(this._collections[a].find(this._query,this._queryOptions));this._collData.setData(b)}if(this._reduce){var c=this._reduce.apply(this);this._data.setData(c)}}},h.prototype._chainHandler=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>switch(a.type){case"setData":case"insert":case"update":case"remove":<span class="cstat-no" title="statement not covered" >this._refresh()}</span>}</span>,h.prototype.data=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._data}</span>,h.prototype.drop=function(){<span class="missing-if-branch" title="else path not taken" >E</span>if("dropped"!==this._state){for(this._state="dropped",delete this._data,delete this._collData;this._collections.length;)this._removeCollection(this._collections[0]);delete this._collections,this._db&amp;&amp;this._name&amp;&amp;delete this._db._overview[this._name],delete this._name,this.emit("drop",this)}return!0},e.prototype.overview=function(a){return a?a instanceof h?<span class="branch-0 cbranch-no" title="branch not covered" >a:</span>(this._overview=this._overview||{},this._overview[a]=this._overview[a]||new h(a).db(this),this._overview[a]):<span class="branch-1 cbranch-no" title="branch not covered" >this._overview||{}}</span>,e.prototype.overviews=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a,b=[];<span class="cstat-no" title="statement not covered" >f</span>or(a in this._overview)<span class="cstat-no" title="statement not covered" >this._overview.hasOwnProperty(a)&amp;&amp;b.push({name:a,count:this._overview[a].count()});<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,d.finishModule("Overview"),b.exports=h},{"./Collection":4,"./Document":9,"./Shared":33}],29:[function(a,b,c){"use strict";var d=a("./Shared"),e=function(a){this.init.apply(this,arguments)};e.prototype.init=function(a){a&amp;&amp;this.path(a)},d.addModule("Path",e),d.mixin(e.prototype,"Mixin.ChainReactor"),e.prototype.path=function(a){return void 0!==a?(this._path=this.clean(a),this._pathParts=this._path.split("."),this):<span class="branch-1 cbranch-no" title="branch not covered" >this._path}</span>,e.prototype.hasObjectPaths=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d=!0;<span class="cstat-no" title="statement not covered" >f</span>or(c in a)<span class="cstat-no" title="statement not covered" >if(a.hasOwnProperty(c)){<span class="cstat-no" title="statement not covered" >if(void 0===b[c])<span class="cstat-no" title="statement not covered" >return!1;<span class="cstat-no" title="statement not covered" >i</span></span>f("object"==typeof a[c]&amp;&amp;(d=this.hasObjectPaths(a[c],b[c]),!d))<span class="cstat-no" title="statement not covered" >return!1}<span class="cstat-no" title="statement not covered" ></span></span>r</span></span>eturn d}</span>,e.prototype.countKeys=function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&amp;&amp;void 0!==a[b]&amp;&amp;("object"!=typeof a[b]?c++:c+=this.countKeys(a[b]));return c},e.prototype.countObjectPaths=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d,e={},f=0,g=0;<span class="cstat-no" title="statement not covered" >f</span>or(d in b)<span class="cstat-no" title="statement not covered" >b.hasOwnProperty(d)&amp;&amp;("object"==typeof b[d]?(c=this.countObjectPaths(a[d],b[d]),e[d]=c.matchedKeys,g+=c.totalKeyCount,f+=c.matchedKeyCount):(g++,a&amp;&amp;a[d]&amp;&amp;"object"!=typeof a[d]?(e[d]=!0,f++):e[d]=!1));<span class="cstat-no" title="statement not covered" >r</span></span>eturn{matchedKeys:e,matchedKeyCount:f,totalKeyCount:g}}</span>,e.prototype.parse=function(a,b){var c,d,e,f=[],g="";for(d in a)<span class="missing-if-branch" title="else path not taken" >E</span>if(a.hasOwnProperty(d))if(g=d,"object"==typeof a[d])if(b)for(c=this.parse(a[d],b),e=0;e&lt;c.length;e++)f.push({path:g+"."+c[e].path,value:c[e].value});else for(c=this.parse(a[d]),e=0;e&lt;c.length;e++)f.push({path:g+"."+c[e].path});else f.push(b?{path:g,value:a[d]}:{path:g});return f},e.prototype.parseArr=function(a,b){return b=b||{},this._parseArr(a,"",[],b)},e.prototype._parseArr=function(a,b,c,d){var e,f="";b=b||"",c=c||<span class="branch-1 cbranch-no" title="branch not covered" >[];</span>for(e in a)a.hasOwnProperty(e)&amp;&amp;(!d.ignore||<span class="branch-2 cbranch-no" title="branch not covered" >d.ignore&amp;</span>&amp;<span class="branch-3 cbranch-no" title="branch not covered" >!d.ignore.test(e))</span>&amp;&amp;(f=b?b+"."+e:e,"object"==typeof a[e]?this._parseArr(a[e],f,c,d):c.push(f));return c},e.prototype.value=function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a&amp;&amp;"object"==typeof a){var c,d,e,f,g,h,i,j=[];for(void 0!==b&amp;&amp;(b=this.clean(b),c=b.split(".")),d=c||this._pathParts,e=d.length,f=a,h=0;e&gt;h;h++){if(f=f[d[h]],g instanceof Array){for(i=0;i&lt;g.length;i++)j=j.concat(this.value(g,i+"."+d[h]));return j}if(!f||"object"!=typeof f)break;g=f}return[f]}<span class="cstat-no" title="statement not covered" >return[]}</span>,e.prototype.set=function(a,b,c){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a&amp;&amp;void 0!==b){var d,e;b=this.clean(b),d=b.split("."),e=d.shift(),d.length?(a[e]=a[e]||{},this.set(a[e],d.join("."),c)):a[e]=c}return a},e.prototype.get=function(a,b){return this.value(a,b)[0]},e.prototype.push=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a&amp;&amp;void 0!==b){<span class="cstat-no" title="statement not covered" >var d,e;<span class="cstat-no" title="statement not covered" >i</span>f(b=this.clean(b),d=b.split("."),e=d.shift(),d.length)<span class="cstat-no" title="statement not covered" >a[e]=a[e]||{},this.set(a[e],d.join("."),c);e</span>lse{<span class="cstat-no" title="statement not covered" >if(a[e]=a[e]||[],!(a[e]instanceof Array))<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Path: Cannot push to a path whose endpoint is not an array!";<span class="cstat-no" title="statement not covered" >a</span></span>[e].push(c)}</span>}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn a}</span>,e.prototype.keyValue=function(a,b){var c,d,e,f,g,h,i;for(void 0!==b&amp;&amp;(b=this.clean(b),c=b.split(".")),d=c||this._pathParts,e=d.length,f=a,i=0;e&gt;i;i++){if(f=f[d[i]],!f||"object"!=typeof f){h=d[i]+":"+f;break}g=f}return h},e.prototype.clean=function(a){return"."===a.substr(0,1)&amp;&amp;(a=a.substr(1,a.length-1)),a},d.finishModule("Path"),b.exports=e},{"./Shared":33}],30:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m=a("./Shared"),n=a("localforage");k=function(){this.init.apply(this,arguments)},k.prototype.init=function(a){a.isClient()&amp;&amp;void 0!==window.Storage&amp;&amp;(this.mode("localforage"),n.config({driver:[n.INDEXEDDB,n.WEBSQL,n.LOCALSTORAGE],name:String(a.core().name()),storeName:"FDB"}))},m.addModule("Persist",k),m.mixin(k.prototype,"Mixin.ChainReactor"),d=m.modules.Db,e=a("./Collection"),f=e.prototype.drop,g=a("./CollectionGroup"),h=e.prototype.init,i=d.prototype.init,j=d.prototype.drop,l=m.overload,k.prototype.mode=function(a){return void 0!==a?(this._mode=a,this):this._mode},k.prototype.driver=function(a){<span class="missing-if-branch" title="if path not taken" >I</span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >switch(a.toUpperCase()){case"LOCALSTORAGE":<span class="cstat-no" title="statement not covered" >n.setDriver(n.LOCALSTORAGE);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"WEBSQL":<span class="cstat-no" title="statement not covered" >n.setDriver(n.WEBSQL);<span class="cstat-no" title="statement not covered" >b</span>reak;c</span>ase"INDEXEDDB":<span class="cstat-no" title="statement not covered" >n.setDriver(n.INDEXEDDB);<span class="cstat-no" title="statement not covered" >b</span>reak;d</span>efault:<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Persist: The persistence driver you have specified is not found. Please use either IndexedDB, WebSQL or LocalStorage!"}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn this}</span>return n.driver()},k.prototype.save=function(a,b,c){var d;switch(d=function(a,b){a="object"==typeof a?"json::fdb::"+JSON.stringify(a):<span class="branch-1 cbranch-no" title="branch not covered" >"raw::fdb::"+a,</span>b&amp;&amp;b(!1,a)},this.mode()){case"localforage":d(b,function(b,d){n.setItem(a,d).then(function(a){c&amp;&amp;c(!1,a)},<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c&amp;&amp;c(a)}</span>)});break;<span class="branch-1 cbranch-no" title="branch not covered" >default:<span class="cstat-no" title="statement not covered" >c&amp;&amp;c("No data handler.")}</span></span>},k.prototype.load=function(a,b){var c,d,e;switch(e=function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if(a){switch(c=a.split("::fdb::"),c[0]){case"json":d=JSON.parse(c[1]);break;<span class="branch-1 cbranch-no" title="branch not covered" >case"raw":<span class="cstat-no" title="statement not covered" >d=c[1]}</span></span>b&amp;&amp;b(!1,d,{foundData:!0,rowCount:d.length})}else <span class="cstat-no" title="statement not covered" >b&amp;&amp;b(!1,a,{foundData:!1,rowCount:0})}</span>,this.mode()){case"localforage":n.getItem(a).then(function(a){e(a,b)},<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b&amp;&amp;b(a)}</span>);break;<span class="branch-1 cbranch-no" title="branch not covered" >default:<span class="cstat-no" title="statement not covered" >b&amp;&amp;b("No data handler or unrecognised data type.")}</span></span>},k.prototype.drop=function(a,b){switch(this.mode()){case"localforage":n.removeItem(a).then(function(){b&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >b(!1)}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b&amp;&amp;b(a)}</span>);break;<span class="branch-1 cbranch-no" title="branch not covered" >default:<span class="cstat-no" title="statement not covered" >b&amp;&amp;b("No data handler or unrecognised data type.")}</span></span>},e.prototype.drop=new l({"":function(){"dropped"!==this._state&amp;&amp;this.drop(!0)},"function":<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>"dropped"!==this._state&amp;&amp;this.drop(!0,a)}</span>,"boolean":function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if("dropped"!==this._state){if(a){<span class="missing-if-branch" title="if path not taken" >I</span>if(!this._name)<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Persist: Cannot drop a collection's persistent storage when no name assigned to collection!";<span class="missing-if-branch" title="if path not taken" >I</span>i</span>f(!this._db)<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Persist: Cannot drop a collection's persistent storage when the collection is not attached to a database!";t</span>his._db.persist.drop(this._db._name+"::"+this._name)}f.apply(this)}},"boolean, function":<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>"dropped"!==this._state&amp;&amp;(a&amp;&amp;(this._name?this._db?this._db.persist.drop(this._db._name+"::"+this._name,b):b&amp;&amp;b("Cannot drop a collection's persistent storage when the collection is not attached to a database!"):b&amp;&amp;b("Cannot drop a collection's persistent storage when no name assigned to collection!")),f.apply(this,b))}</span>}),e.prototype.save=function(a){this._name?this._db?this._db.persist.save(this._db._name+"::"+this._name,this._data,a):<span class="branch-1 cbranch-no" title="branch not covered" >a&amp;&amp;a("Cannot save a collection that is not attached to a database!"):<span class="branch-1 cbranch-no" title="branch not covered" ></span>a&amp;&amp;a("Cannot save a collection with no assigned name!")}</span>,e.prototype.load=function(a){var b=this;this._name?this._db?this._db.persist.load(this._db._name+"::"+this._name,function(c,d){c?<span class="branch-0 cbranch-no" title="branch not covered" >a&amp;&amp;a(c):</span>(d&amp;&amp;b.setData(d),a&amp;&amp;a(!1))}):<span class="branch-1 cbranch-no" title="branch not covered" >a&amp;&amp;a("Cannot load a collection that is not attached to a database!"):<span class="branch-1 cbranch-no" title="branch not covered" ></span>a&amp;&amp;a("Cannot load a collection with no assigned name!")}</span>,d.prototype.init=function(){i.apply(this,arguments),this.persist=new k(this)},d.prototype.load=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d=this._collection,e=d.keys(),f=e.length;<span class="cstat-no" title="statement not covered" >b</span>=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b?a&amp;&amp;a(b):(f--,0===f&amp;&amp;a&amp;&amp;a(!1))}</span>;<span class="cstat-no" title="statement not covered" >f</span>or(c in d)<span class="cstat-no" title="statement not covered" >d.hasOwnProperty(c)&amp;&amp;d[c].load(b)}</span></span>,d.prototype.save=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d=this._collection,e=d.keys(),f=e.length;<span class="cstat-no" title="statement not covered" >b</span>=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b?a&amp;&amp;a(b):(f--,0===f&amp;&amp;a&amp;&amp;a(!1))}</span>;<span class="cstat-no" title="statement not covered" >f</span>or(c in d)<span class="cstat-no" title="statement not covered" >d.hasOwnProperty(c)&amp;&amp;d[c].save(b)}</span></span>,m.finishModule("Persist"),b.exports=k},{"./Collection":4,"./CollectionGroup":5,"./Shared":33,localforage:43}],31:[function(a,b,c){"use strict";var d=a("./Shared"),e=function(a,b,c){<span class="missing-if-branch" title="if path not taken" >I</span>if(!(a&amp;&amp;b&amp;&amp;c))<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.ReactorIO: ReactorIO requires in, out and process arguments to instantiate!";</span>
&nbsp;
<span class="missing-if-branch" title="if path not taken" >I</span>if(this._reactorIn=a,this._reactorOut=b,this._chainHandler=c,!a.chain||!b.chainReceive)<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.ReactorIO: ReactorIO requires passed in and out objects to implement the ChainReactor mixin!";a</span>.chain(this),this.chain(b)};d.addModule("ReactorIO",e),e.prototype.drop=function(){return"dropped"!==this._state&amp;&amp;(this._state="dropped",this._reactorIn&amp;&amp;this._reactorIn.unChain(this),this._reactorOut&amp;&amp;this.unChain(this._reactorOut),delete this._reactorIn,delete this._reactorOut,delete this._chainHandler,this.emit("drop",this)),!0},d.synthesize(e.prototype,"state"),d.mixin(e.prototype,"Mixin.ChainReactor"),d.mixin(e.prototype,"Mixin.Events"),d.finishModule("ReactorIO"),b.exports=e},{"./Shared":33}],32:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=a("./Shared"),l=a("rest"),m=a("rest/interceptor/mime"),n=function(){this.init.apply(this,arguments)};n.prototype.init=function(a){this._endPoint="",this._client=l.wrap(m)},n.prototype._params=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=[];<span class="cstat-no" title="statement not covered" >f</span>or(var c in a)<span class="cstat-no" title="statement not covered" >a.hasOwnProperty(c)&amp;&amp;b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));<span class="cstat-no" title="statement not covered" >r</span></span>eturn b.join("&amp;")}</span>,n.prototype.get=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d,e=this;<span class="cstat-no" title="statement not covered" >a</span>=void 0!==a?a:"",this._client({method:"get",path:this.endPoint()+a,params:b}).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a.entity&amp;&amp;a.entity.error?c&amp;&amp;c(a.entity.error,a.entity,a):(d=e.collection(),d&amp;&amp;d.upsert(a.entity),c&amp;&amp;c(!1,a.entity,a))}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c&amp;&amp;c(!0,a.entity,a)}</span>)}</span>,n.prototype.post=function(a,b,c){this._client({method:"post",path:this.endPoint()+a,entity:b,headers:{"Content-Type":"application/json"}}).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a.entity&amp;&amp;a.entity.error?c&amp;&amp;c(a.entity.error,a.entity,a):c&amp;&amp;c(!1,a.entity,a)}</span>,function(a){c&amp;&amp;c(!0,a)})},k.synthesize(n.prototype,"sessionData"),k.synthesize(n.prototype,"endPoint"),k.synthesize(n.prototype,"collection"),k.addModule("Rest",n),k.mixin(n.prototype,"Mixin.ChainReactor"),d=k.modules.Db,e=a("./Collection"),f=e.prototype.drop,g=a("./CollectionGroup"),h=e.prototype.init,i=d.prototype.init,j=k.overload,e.prototype.init=function(){this.rest=new n,this.rest.collection(this),h.apply(this,arguments)},d.prototype.init=function(){this.rest=new n,i.apply(this,arguments)},k.finishModule("Rest"),b.exports=n},{"./Collection":4,"./CollectionGroup":5,"./Shared":33,rest:46,"rest/interceptor/mime":51}],33:[function(a,b,c){"use strict";var d={version:"1.3.85",modules:{},_synth:{},addModule:function(a,b){this.modules[a]=b,this.emit("moduleLoad",[a,b])},finishModule:function(a){<span class="missing-if-branch" title="if path not taken" >I</span>if(!this.modules[a])<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Shared: finishModule called on a module that has not been registered with addModule(): "+a;t</span>his.modules[a]._fdbFinished=!0,this.emit("moduleFinished",[a,this.modules[a]])},moduleFinished:function(a,b){this.modules[a]&amp;&amp;this.modules[a]._fdbFinished?b&amp;&amp;b(a,this.modules[a]):<span class="branch-1 cbranch-no" title="branch not covered" >this.on("moduleFinished",b)}</span>,moduleExists:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this.modules[a])}</span>,mixin:function(a,b){var c=this.mixins[b];<span class="missing-if-branch" title="if path not taken" >I</span>if(!c)<span class="cstat-no" title="statement not covered" >throw"ForerunnerDB.Shared: Cannot find mixin named: "+b;f</span>or(var d in c)c.hasOwnProperty(d)&amp;&amp;(a[d]=c[d])},synthesize:function(a,b,c){if(this._synth[b]=this._synth[b]||function(a){return void 0!==a?(this["_"+b]=a,this):this["_"+b]},c){var d=this;a[b]=function(){var a,e=this.$super;return this.$super=d._synth[b],a=c.apply(this,arguments),this.$super=e,a}}else a[b]=this._synth[b]},overload:a("./Overload"),mixins:{"Mixin.Common":a("./Mixin.Common"),"Mixin.Events":a("./Mixin.Events"),"Mixin.ChainReactor":a("./Mixin.ChainReactor"),"Mixin.CRUD":a("./Mixin.CRUD"),"Mixin.Constants":a("./Mixin.Constants"),"Mixin.Triggers":a("./Mixin.Triggers"),"Mixin.Sorting":a("./Mixin.Sorting"),"Mixin.Matching":a("./Mixin.Matching"),"Mixin.Updating":a("./Mixin.Updating")}};d.mixin(d,"Mixin.Events"),b.exports=d},{"./Mixin.CRUD":16,"./Mixin.ChainReactor":17,"./Mixin.Common":18,"./Mixin.Constants":19,"./Mixin.Events":20,"./Mixin.Matching":21,"./Mixin.Sorting":22,"./Mixin.Triggers":23,"./Mixin.Updating":24,"./Overload":27}],34:[function(a,b,c){Array.prototype.filter||(<span class="branch-1 cbranch-no" title="branch not covered" >Array.prototype.filter=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(void 0===this||null===this)<span class="cstat-no" title="statement not covered" >throw new TypeError;<span class="cstat-no" title="statement not covered" >v</span></span>ar b=Object(this),c=b.length&gt;&gt;&gt;0;<span class="cstat-no" title="statement not covered" >i</span>f("function"!=typeof a)<span class="cstat-no" title="statement not covered" >throw new TypeError;<span class="cstat-no" title="statement not covered" >f</span></span>or(var d=[],e=arguments.length&gt;=2?arguments[1]:void 0,f=0;c&gt;f;f++)<span class="cstat-no" title="statement not covered" >if(f in b){<span class="cstat-no" title="statement not covered" >var g=b[f];<span class="cstat-no" title="statement not covered" >a</span>.call(e,g,f,b)&amp;&amp;d.push(g)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn d}</span>)</span>,"function"!=typeof Object.create&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >Object.create=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=<span class="fstat-no" title="function not covered" >function(){</span>};<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>if(arguments.length&gt;1)<span class="cstat-no" title="statement not covered" >throw Error("Second argument not supported");<span class="cstat-no" title="statement not covered" >i</span></span>f("object"!=typeof b)<span class="cstat-no" title="statement not covered" >throw TypeError("Argument must be an object");<span class="cstat-no" title="statement not covered" >a</span></span>.prototype=b;<span class="cstat-no" title="statement not covered" >v</span>ar c=new a;<span class="cstat-no" title="statement not covered" >r</span>eturn a.prototype=null,c}</span>}</span>())</span>,Array.prototype.indexOf||(<span class="branch-1 cbranch-no" title="branch not covered" >Array.prototype.indexOf=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c;<span class="cstat-no" title="statement not covered" >i</span>f(null===this)<span class="cstat-no" title="statement not covered" >throw new TypeError('"this" is null or not defined');<span class="cstat-no" title="statement not covered" >v</span></span>ar d=Object(this),e=d.length&gt;&gt;&gt;0;<span class="cstat-no" title="statement not covered" >i</span>f(0===e)<span class="cstat-no" title="statement not covered" >return-1;<span class="cstat-no" title="statement not covered" >v</span></span>ar f=+b||0;<span class="cstat-no" title="statement not covered" >i</span>f(Math.abs(f)===1/0&amp;&amp;(f=0),f&gt;=e)<span class="cstat-no" title="statement not covered" >return-1;<span class="cstat-no" title="statement not covered" >f</span></span>or(c=Math.max(f&gt;=0?f:e-Math.abs(f),0);e&gt;c;){<span class="cstat-no" title="statement not covered" >if(c in d&amp;&amp;d[c]===a)<span class="cstat-no" title="statement not covered" >return c;<span class="cstat-no" title="statement not covered" >c</span></span>++}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn-1}</span>)</span>,b.exports={}},{}],35:[function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;d=a("./Shared");var l=function(a,b,c){this.init.apply(this,arguments)};l.prototype.init=function(a,b,c){var d=this;this._name=a,this._listeners={},this._querySettings={},this._debug={},this.query(b,!1),this.queryOptions(c,!1),this._collectionDroppedWrap=function(){d._collectionDropped.apply(d,arguments)},this._privateData=new f("__FDB__view_privateData_"+this._name)},d.addModule("View",l),d.mixin(l.prototype,"Mixin.Common"),d.mixin(l.prototype,"Mixin.ChainReactor"),d.mixin(l.prototype,"Mixin.Constants"),d.mixin(l.prototype,"Mixin.Triggers"),f=a("./Collection"),g=a("./CollectionGroup"),k=a("./ActiveBucket"),j=a("./ReactorIO"),h=f.prototype.init,e=d.modules.Db,i=e.prototype.init,d.synthesize(l.prototype,"state"),d.synthesize(l.prototype,"name"),d.synthesize(l.prototype,"cursor",<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0===a?this._cursor||{}:void this.$super.apply(this,arguments)}</span>),l.prototype.insert=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.insert.apply(this._from,arguments)}</span>,l.prototype.update=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.update.apply(this._from,arguments)}</span>,l.prototype.updateById=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.updateById.apply(this._from,arguments)}</span>,l.prototype.remove=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this._from.remove.apply(this._from,arguments)}</span>,l.prototype.find=function(a,b){return this.publicData().find(a,b)},l.prototype.data=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._privateData}</span>,l.prototype.from=function(a){var b=this;if(void 0!==a){this._from&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >this._from.off("drop",this._collectionDroppedWrap),delete this._from)</span>,"string"==typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >a=this._db.collection(a))</span>,this._from=a,this._from.on("drop",this._collectionDroppedWrap),this._io=new j(a,this,function(a){var c,d,e,f,g,h,i;if(b._querySettings.query){<span class="missing-if-branch" title="if path not taken" >I</span>if("insert"===a.type){<span class="cstat-no" title="statement not covered" >if(c=a.data,c instanceof Array)<span class="cstat-no" title="statement not covered" >for(f=[],i=0;i&lt;c.length;i++)<span class="cstat-no" title="statement not covered" >b._privateData._match(c[i],b._querySettings.query,"and",{})&amp;&amp;(f.push(c[i]),g=!0);e</span></span>lse <span class="cstat-no" title="statement not covered" >b._privateData._match(c,b._querySettings.query,"and",{})&amp;&amp;(f=c,g=!0);<span class="cstat-no" title="statement not covered" >r</span></span>eturn g&amp;&amp;this.chainSend("insert",f),!0}<span class="missing-if-branch" title="if path not taken" >I</span></span>if("update"===a.type){<span class="cstat-no" title="statement not covered" >if(d=b._privateData.diff(b._from.subset(b._querySettings.query,b._querySettings.options)),d.insert.length||d.remove.length){<span class="cstat-no" title="statement not covered" >if(d.insert.length&amp;&amp;this.chainSend("insert",d.insert),d.update.length)<span class="cstat-no" title="statement not covered" >for(h=b._privateData.primaryKey(),i=0;i&lt;d.update.length;i++)<span class="cstat-no" title="statement not covered" >e={},e[h]=d.update[i][h],this.chainSend("update",{query:e,update:d.update[i]});<span class="cstat-no" title="statement not covered" >i</span></span></span>f(d.remove.length){<span class="cstat-no" title="statement not covered" >h=b._privateData.primaryKey();<span class="cstat-no" title="statement not covered" >v</span>ar j=[],k={query:{$or:j}};<span class="cstat-no" title="statement not covered" >f</span>or(i=0;i&lt;d.remove.length;i++)<span class="cstat-no" title="statement not covered" >j.push({_id:d.remove[i][h]});<span class="cstat-no" title="statement not covered" >t</span></span>his.chainSend("remove",k)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!0}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn!1}</span>}return!1});var c=a.find(this._querySettings.query,this._querySettings.options);return this._transformPrimaryKey(a.primaryKey()),this._transformSetData(c),this._privateData.primaryKey(a.primaryKey()),this._privateData.setData(c),this._querySettings.options&amp;&amp;this._querySettings.options.$orderBy?this.rebuildActiveBucket(this._querySettings.options.$orderBy):this.rebuildActiveBucket(),this}return this._from},l.prototype._collectionDropped=function(a){a&amp;&amp;delete this._from},l.prototype.ensureIndex=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._privateData.ensureIndex.apply(this._privateData,arguments)}</span>,l.prototype._chainHandler=function(a){var b,c,d,e,f,g,h,i,j,k;switch(a.type){case"setData":this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.View: Setting data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"');</span>var l=this._from.find(this._querySettings.query,this._querySettings.options);this._transformSetData(l),this._privateData.setData(l);break;case"insert":if(this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.View: Inserting some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"'),</span>a.data=this.decouple(a.data),a.data instanceof Array||(a.data=[a.data]),this._querySettings.options&amp;&amp;this._querySettings.options.$orderBy)for(b=a.data,c=b.length,d=0;c&gt;d;d++)e=this._activeBucket.insert(b[d]),this._transformInsert(a.data,e),this._privateData._insertHandle(a.data,e);else e=this._privateData._data.length,this._transformInsert(a.data,e),this._privateData._insertHandle(a.data,e);break;case"update":if(this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.View: Updating some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"'),</span>g=this._privateData.primaryKey(),f=this._privateData.update(a.data.query,a.data.update,a.data.options),this._querySettings.options&amp;&amp;this._querySettings.options.$orderBy)for(c=f.length,d=0;c&gt;d;d++)i=f[d],this._activeBucket.remove(i),j=this._privateData._data.indexOf(i),e=this._activeBucket.insert(i),j!==e&amp;&amp;this._privateData._updateSpliceMove(this._privateData._data,j,e);if(this._transformEnabled&amp;&amp;this._transformIn)for(g=this._publicData.primaryKey(),k=0;k&lt;f.length;k++)h={},i=f[k],h[g]=i[g],this._transformUpdate(h,i);break;case"remove":this.debug()&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >console.log('ForerunnerDB.View: Removing some data on view "'+this.name()+'" in underlying (internal) view collection "'+this._privateData.name()+'"'),</span>this._transformRemove(a.data.query,a.options),this._privateData.remove(a.data.query,a.options)}},l.prototype.on=function(){return this._privateData.on.apply(this._privateData,arguments)},l.prototype.off=function(){return this._privateData.off.apply(this._privateData,arguments)},l.prototype.emit=function(){return this._privateData.emit.apply(this._privateData,arguments)},l.prototype.distinct=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return this._privateData.distinct.apply(this._privateData,arguments)}</span>,l.prototype.primaryKey=function(){return this._privateData.primaryKey()},l.prototype.drop=function(){return"dropped"===this._state?<span class="branch-0 cbranch-no" title="branch not covered" >!0:</span>this._from?(this._from.off("drop",this._collectionDroppedWrap),this._from._removeView(this),(this.debug()||this._db&amp;&amp;this._db.debug())&amp;&amp;<span class="branch-3 cbranch-no" title="branch not covered" >console.log("ForerunnerDB.View: Dropping view "+this._name),</span>this._state="dropped",this._io&amp;&amp;this._io.drop(),this._privateData&amp;&amp;this._privateData.drop(),this._db&amp;&amp;this._name&amp;&amp;delete this._db._view[this._name],this.emit("drop",this),delete this._chain,delete this._from,delete this._privateData,delete this._io,delete this._listeners,delete this._querySettings,delete this._db,!0):<span class="branch-1 cbranch-no" title="branch not covered" >!1}</span>,l.prototype.db=function(a){return void 0!==a?(this._db=a,this.privateData().db(a),this.publicData().db(a),this):<span class="branch-1 cbranch-no" title="branch not covered" >this._db}</span>,l.prototype.queryData=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a&amp;&amp;(this._querySettings.query=a),void 0!==b&amp;&amp;(this._querySettings.options=b),void 0!==a||void 0!==b?((void 0===c||c===!0)&amp;&amp;this.refresh(),this):this._querySettings}</span>,l.prototype.queryAdd=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._querySettings.query=this._querySettings.query||{};<span class="cstat-no" title="statement not covered" >v</span>ar d,e=this._querySettings.query;<span class="cstat-no" title="statement not covered" >i</span>f(void 0!==a)<span class="cstat-no" title="statement not covered" >for(d in a)<span class="cstat-no" title="statement not covered" >a.hasOwnProperty(d)&amp;&amp;(void 0===e[d]||void 0!==e[d]&amp;&amp;b!==!1)&amp;&amp;(e[d]=a[d]);<span class="cstat-no" title="statement not covered" >(</span></span></span>void 0===c||c===!0)&amp;&amp;this.refresh()}</span>,l.prototype.queryRemove=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,d=this._querySettings.query;<span class="cstat-no" title="statement not covered" >i</span>f(d){<span class="cstat-no" title="statement not covered" >if(void 0!==a)<span class="cstat-no" title="statement not covered" >for(c in a)<span class="cstat-no" title="statement not covered" >a.hasOwnProperty(c)&amp;&amp;delete d[c];<span class="cstat-no" title="statement not covered" >(</span></span></span>void 0===b||b===!0)&amp;&amp;this.refresh()}</span>}</span>,l.prototype.query=function(a,b){return void 0!==a?(this._querySettings.query=a,(void 0===b||<span class="branch-1 cbranch-no" title="branch not covered" >b===!0)</span>&amp;&amp;this.refresh(),this):this._querySettings.query},l.prototype.orderBy=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a){var b=this.queryOptions()||{};return b.$orderBy=a,this.queryOptions(b),this}<span class="cstat-no" title="statement not covered" >return(this.queryOptions()||{}).$orderBy}</span>,l.prototype.page=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >var b=this.queryOptions()||{};<span class="cstat-no" title="statement not covered" >r</span>eturn a!==b.$page&amp;&amp;(b.$page=a,this.queryOptions(b)),this}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn(this.queryOptions()||{}).$page}</span>,l.prototype.pageFirst=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this.page(0)}</span>,l.prototype.pageLast=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this.cursor().pages,b=void 0!==a?a:0;<span class="cstat-no" title="statement not covered" >r</span>eturn this.page(b-1)}</span>,l.prototype.pageScan=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(void 0!==a){<span class="cstat-no" title="statement not covered" >var b=this.cursor().pages,c=this.queryOptions()||{},d=void 0!==c.$page?c.$page:0;<span class="cstat-no" title="statement not covered" >r</span>eturn d+=a,0&gt;d&amp;&amp;(d=0),d&gt;=b&amp;&amp;(d=b-1),this.page(d)}</span>}</span>,l.prototype.queryOptions=function(a,b){return void 0!==a?(this._querySettings.options=a,void 0===a.$decouple&amp;&amp;(a.$decouple=!0),void 0===b||<span class="branch-1 cbranch-no" title="branch not covered" >b===!0?</span>this.refresh():<span class="branch-1 cbranch-no" title="branch not covered" >this.rebuildActiveBucket(a.$orderBy),</span>this):this._querySettings.options},l.prototype.rebuildActiveBucket=function(a){if(a){var b=this._privateData._data,c=b.length;this._activeBucket=new k(a),this._activeBucket.primaryKey(this._privateData.primaryKey());for(var d=0;c&gt;d;d++)<span class="cstat-no" title="statement not covered" >this._activeBucket.insert(b[d])}</span>else delete this._activeBucket},l.prototype.refresh=function(){<span class="missing-if-branch" title="if path not taken" >I</span>if(this._from){<span class="cstat-no" title="statement not covered" >var a,b=this.publicData();<span class="cstat-no" title="statement not covered" >t</span>his._privateData.remove(),b.remove(),a=this._from.find(this._querySettings.query,this._querySettings.options),this.cursor(a.$cursor),this._privateData.insert(a),this._privateData._data.$cursor=a.$cursor,b._data.$cursor=a.$cursor}</span>return this._querySettings.options&amp;&amp;this._querySettings.options.$orderBy?this.rebuildActiveBucket(this._querySettings.options.$orderBy):this.rebuildActiveBucket(),this},l.prototype.count=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this._privateData&amp;&amp;this._privateData._data?this._privateData._data.length:0}</span>,l.prototype.subset=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this.publicData().subset.apply(this._privateData,arguments)}</span>,l.prototype.transform=function(a){return void 0!==a?("object"==typeof a?(void 0!==a.enabled&amp;&amp;(this._transformEnabled=a.enabled),void 0!==a.dataIn&amp;&amp;(this._transformIn=a.dataIn),void 0!==a.dataOut&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >this._transformOut=a.dataOut)</span>):<span class="branch-1 cbranch-no" title="branch not covered" >this._transformEnabled=a!==!1,</span>this._transformPrimaryKey(this.privateData().primaryKey()),this._transformSetData(this.privateData().find()),this):<span class="branch-1 cbranch-no" title="branch not covered" >{enabled:this._transformEnabled,dataIn:this._transformIn,dataOut:this._transformOut}}</span>,l.prototype.filter=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return this.publicData().filter(a,b,c)}</span>,l.prototype.privateData=function(){return this._privateData},l.prototype.publicData=function(){return this._transformEnabled?this._publicData:this._privateData},l.prototype._transformSetData=function(a){this._transformEnabled&amp;&amp;(this._publicData=new f("__FDB__view_publicData_"+this._name),this._publicData.db(this._privateData._db),this._publicData.transform({enabled:!0,dataIn:this._transformIn,dataOut:this._transformOut}),this._publicData.setData(a))},l.prototype._transformInsert=function(a,b){this._transformEnabled&amp;&amp;this._publicData&amp;&amp;this._publicData.insert(a,b)},l.prototype._transformUpdate=function(a,b,c){this._transformEnabled&amp;&amp;this._publicData&amp;&amp;this._publicData.update(a,b,c)},l.prototype._transformRemove=function(a,b){this._transformEnabled&amp;&amp;this._publicData&amp;&amp;this._publicData.remove(a,b)},l.prototype._transformPrimaryKey=function(a){this._transformEnabled&amp;&amp;this._publicData&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >this._publicData.primaryKey(a)}</span>,f.prototype.init=function(){this._view=[],h.apply(this,arguments)},f.prototype.view=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>if(this._db&amp;&amp;this._db._view){<span class="cstat-no" title="statement not covered" >if(this._db._view[a])<span class="cstat-no" title="statement not covered" >throw'ForerunnerDB.Collection "'+this.name()+'": Cannot create a view using this collection because a view with this name already exists: '+a;<span class="cstat-no" title="statement not covered" >v</span></span>ar d=new l(a,b,c).db(this._db).from(this);<span class="cstat-no" title="statement not covered" >r</span>eturn this._view=this._view||[],this._view.push(d),d}</span>}</span>,f.prototype._addView=g.prototype._addView=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return void 0!==a&amp;&amp;this._view.push(a),this}</span>,f.prototype._removeView=g.prototype._removeView=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(void 0!==a){var b=this._view.indexOf(a);b&gt;-1&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >this._view.splice(b,1)}</span>return this},e.prototype.init=function(){this._view={},i.apply(this,arguments)},e.prototype.view=function(a){return a instanceof l?<span class="branch-0 cbranch-no" title="branch not covered" >a:</span>(this._view[a]||(this.debug()||this._db&amp;&amp;<span class="branch-3 cbranch-no" title="branch not covered" >this._db.debug())</span>&amp;&amp;<span class="branch-4 cbranch-no" title="branch not covered" >console.log("Db.View: Creating view "+a),</span>this._view[a]=this._view[a]||new l(a).db(this),this._view[a])},e.prototype.viewExists=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return Boolean(this._view[a])}</span>,e.prototype.views=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a,b=[];<span class="cstat-no" title="statement not covered" >f</span>or(a in this._view)<span class="cstat-no" title="statement not covered" >this._view.hasOwnProperty(a)&amp;&amp;b.push({name:a,count:this._view[a].count()});<span class="cstat-no" title="statement not covered" >r</span></span>eturn b}</span>,d.finishModule("View"),b.exports=l},{"./ActiveBucket":3,"./Collection":4,"./CollectionGroup":5,"./ReactorIO":31,"./Shared":33}],36:[function(a,b,c){function d(){<span class="missing-if-branch" title="else path not taken" >E</span>if(!h){h=!0;for(var a,b=g.length;b;){a=g,g=[];for(var c=-1;++c&lt;b;)a[c]();b=g.length}h=!1}}<span class="fstat-no" title="function not covered" >function e(){</span>}var f=b.exports={},g=[],h=!1;f.nextTick=function(a){g.push(a),h||setTimeout(d,0)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=e,f.addListener=e,f.once=e,f.off=e,f.removeListener=e,f.removeAllListeners=e,f.emit=e,f.binding=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.binding is not supported")}</span>,f.cwd=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"/"}</span>,f.chdir=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>throw new Error("process.chdir is not supported")}</span>,f.umask=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return 0}</span>},{}],37:[function(a,b,c){"use strict";function d(a){function b(a){return null===j?void l.push(a):void g(function(){var b=j?a.onFulfilled:<span class="branch-1 cbranch-no" title="branch not covered" >a.onRejected;</span>if(null===b)return void(j?a.resolve:<span class="branch-1 cbranch-no" title="branch not covered" >a.reject)</span>(k);var c;try{c=b(k)}catch(d){<span class="cstat-no" title="statement not covered" >return void a.reject(d)}</span>a.resolve(c)})}function c(a){try{<span class="missing-if-branch" title="if path not taken" >I</span>if(a===m)<span class="cstat-no" title="statement not covered" >throw new TypeError("A promise cannot be resolved with itself.");i</span>f(a&amp;&amp;("object"==typeof a||"function"==typeof a)){var b=a.then;if("function"==typeof b)return void f(b.bind(a),c,h)}j=!0,k=a,i()}catch(d){<span class="cstat-no" title="statement not covered" >h(d)}</span>}<span class="fstat-no" title="function not covered" >function h(a){<span class="cstat-no" title="statement not covered" ></span>j=!1,k=a,i()}</span>function i(){for(var a=0,c=l.length;c&gt;a;a++)b(l[a]);l=null}<span class="missing-if-branch" title="if path not taken" >I</span>if("object"!=typeof this)<span class="cstat-no" title="statement not covered" >throw new TypeError("Promises must be constructed via new");<span class="missing-if-branch" title="if path not taken" >I</span>i</span>f("function"!=typeof a)<span class="cstat-no" title="statement not covered" >throw new TypeError("not a function");v</span>ar j=null,k=null,l=[],m=this;this.then=function(a,c){return new d(function(d,f){b(new e(a,c,d,f))})},f(a,c,h)}function e(a,b,c,d){this.onFulfilled="function"==typeof a?a:null,this.onRejected="function"==typeof b?b:null,this.resolve=c,this.reject=d}function f(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>d||(d=!0,c(a))}</span>)}catch(e){<span class="cstat-no" title="statement not covered" >if(d)<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >d</span></span>=!0,c(e)}</span>}var g=a("asap");b.exports=d},{asap:39}],38:[function(a,b,c){"use strict";function d(a){this.then=<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof b?this:new e(<span class="fstat-no" title="function not covered" >function(c,d){<span class="cstat-no" title="statement not covered" ></span>f(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >c(b(a))}</span>catch(e){<span class="cstat-no" title="statement not covered" >d(e)}</span>}</span>)}</span>)}</span>}var e=a("./core.js"),f=a("asap");b.exports=e,d.prototype=Object.create(e.prototype);var g=new d(!0),h=new d(!1),i=new d(null),j=new d(void 0),k=new d(0),l=new d("");e.resolve=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(a instanceof e)<span class="cstat-no" title="statement not covered" >return a;<span class="cstat-no" title="statement not covered" >i</span></span>f(null===a)<span class="cstat-no" title="statement not covered" >return i;<span class="cstat-no" title="statement not covered" >i</span></span>f(void 0===a)<span class="cstat-no" title="statement not covered" >return j;<span class="cstat-no" title="statement not covered" >i</span></span>f(a===!0)<span class="cstat-no" title="statement not covered" >return g;<span class="cstat-no" title="statement not covered" >i</span></span>f(a===!1)<span class="cstat-no" title="statement not covered" >return h;<span class="cstat-no" title="statement not covered" >i</span></span>f(0===a)<span class="cstat-no" title="statement not covered" >return k;<span class="cstat-no" title="statement not covered" >i</span></span>f(""===a)<span class="cstat-no" title="statement not covered" >return l;<span class="cstat-no" title="statement not covered" >i</span></span>f("object"==typeof a||"function"==typeof a)<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var b=a.then;<span class="cstat-no" title="statement not covered" >i</span>f("function"==typeof b)<span class="cstat-no" title="statement not covered" >return new e(b.bind(a))}</span></span>catch(c){<span class="cstat-no" title="statement not covered" >return new e(<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>b(c)}</span>)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn new d(a)}</span>,e.from=e.cast=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=new Error("Promise.from and Promise.cast are deprecated, use Promise.resolve instead");<span class="cstat-no" title="statement not covered" >r</span>eturn b.name="Warning",console.warn(b.stack),e.resolve(a)}</span>,e.denodeify=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return b=b||1/0,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=Array.prototype.slice.call(arguments);<span class="cstat-no" title="statement not covered" >r</span>eturn new e(<span class="fstat-no" title="function not covered" >function(e,f){<span class="cstat-no" title="statement not covered" ></span>for(;d.length&amp;&amp;d.length&gt;b;)<span class="cstat-no" title="statement not covered" >d.pop();<span class="cstat-no" title="statement not covered" >d</span></span>.push(<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>a?f(a):e(b)}</span>),a.apply(c,d)}</span>)}</span>}</span>,e.nodeify=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=Array.prototype.slice.call(arguments),c="function"==typeof b[b.length-1]?b.pop():null;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >return a.apply(this,arguments).nodeify(c)}</span>catch(d){<span class="cstat-no" title="statement not covered" >if(null===c||"undefined"==typeof c)<span class="cstat-no" title="statement not covered" >return new e(<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>b(d)}</span>);<span class="cstat-no" title="statement not covered" >f</span></span>(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>c(d)}</span>)}</span>}</span>}</span>,e.all=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=1===arguments.length&amp;&amp;Array.isArray(arguments[0]),b=Array.prototype.slice.call(a?arguments[0]:arguments);<span class="cstat-no" title="statement not covered" >i</span>f(!a){<span class="cstat-no" title="statement not covered" >var c=new Error("Promise.all should be called with a single array, calling it with multiple arguments is deprecated");<span class="cstat-no" title="statement not covered" >c</span>.name="Warning",console.warn(c.stack)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn new e(<span class="fstat-no" title="function not covered" >function(a,c){<span class="fstat-no" title="function not covered" ></span>function d(f,g){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >if(g&amp;&amp;("object"==typeof g||"function"==typeof g)){<span class="cstat-no" title="statement not covered" >var h=g.then;<span class="cstat-no" title="statement not covered" >i</span>f("function"==typeof h)<span class="cstat-no" title="statement not covered" >return void h.call(g,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>d(f,a)}</span>,c)}<span class="cstat-no" title="statement not covered" ></span></span>b</span>[f]=g,0===--e&amp;&amp;a(b)}</span>catch(i){<span class="cstat-no" title="statement not covered" >c(i)}</span>}<span class="cstat-no" title="statement not covered" ></span>if(0===b.length)<span class="cstat-no" title="statement not covered" >return a([]);<span class="cstat-no" title="statement not covered" >f</span></span>or(var e=b.length,f=0;f&lt;b.length;f++)<span class="cstat-no" title="statement not covered" >d(f,b[f])}</span></span>)}</span>,e.reject=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new e(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>c(a)}</span>)}</span>,e.race=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new e(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>a.forEach(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>e.resolve(a).then(b,c)}</span>)}</span>)}</span>,e.prototype.done=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=arguments.length?this.then.apply(this,arguments):this;<span class="cstat-no" title="statement not covered" >c</span>.then(null,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>f(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw a}</span>)}</span>)}</span>,e.prototype.nodeify=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof a?this:void this.then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>f(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a(null,b)}</span>)}</span>,<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>f(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a(b)}</span>)}</span>)}</span>,e.prototype["catch"]=function(a){return this.then(null,a)}},{"./core.js":37,asap:39}],39:[function(a,b,c){(function(a){function c(){for(;e.next;){e=e.next;var a=e.task;e.task=void 0;var b=e.domain;b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >e.domain=void 0,b.enter())</span>;try{a()}catch(d){<span class="cstat-no" title="statement not covered" >if(i)<span class="cstat-no" title="statement not covered" >throw b&amp;&amp;b.exit(),setTimeout(c,0),b&amp;&amp;b.enter(),d;<span class="cstat-no" title="statement not covered" >s</span></span>etTimeout(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw d}</span>,0)}</span>b&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >b.exit()}</span>g=!1}function d(b){f=f.next={task:b,domain:i&amp;&amp;a.domain,next:null},g||(g=!0,h())}var e={task:void 0,next:null},f=e,g=!1,h=void 0,i=!1;<span class="missing-if-branch" title="else path not taken" >E</span>if("undefined"!=typeof a&amp;&amp;a.nextTick)i=!0,h=function(){a.nextTick(c)};else <span class="cstat-no" title="statement not covered" >if("function"==typeof setImmediate)<span class="cstat-no" title="statement not covered" >h="undefined"!=typeof window?setImmediate.bind(window,c):<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>setImmediate(c)}</span>;e</span>lse <span class="cstat-no" title="statement not covered" >if("undefined"!=typeof MessageChannel){<span class="cstat-no" title="statement not covered" >var j=new MessageChannel;<span class="cstat-no" title="statement not covered" >j</span>.port1.onmessage=c,h=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>j.port2.postMessage(0)}</span>}</span>else <span class="cstat-no" title="statement not covered" >h=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>setTimeout(c,0)}</span>;b</span></span></span>.exports=d}).call(this,a("_process"))},{_process:36}],40:[<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(){</span>"use strict";<span class="fstat-no" title="function not covered" >function c(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c={db:null};<span class="cstat-no" title="statement not covered" >i</span>f(a)<span class="cstat-no" title="statement not covered" >for(var d in a)<span class="cstat-no" title="statement not covered" >c[d]=a[d];<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn new m(<span class="fstat-no" title="function not covered" >function(a,d){<span class="cstat-no" title="statement not covered" ></span>var e=n.open(c.name,c.version);<span class="cstat-no" title="statement not covered" >e</span>.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d(e.error)}</span>,e.onupgradeneeded=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e.result.createObjectStore(c.storeName)}</span>,e.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>c.db=e.result,b._dbInfo=c,a()}</span>}</span>)}<span class="fstat-no" title="function not covered" ></span>function d(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.get(a);<span class="cstat-no" title="statement not covered" >g</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=g.result;<span class="cstat-no" title="statement not covered" >v</span>oid 0===a&amp;&amp;(a=null),b(a)}</span>,g.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d(g.error)}</span>}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function e(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=f.openCursor(),h=1;<span class="cstat-no" title="statement not covered" >g</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var c=g.result;<span class="cstat-no" title="statement not covered" >i</span>f(c){<span class="cstat-no" title="statement not covered" >var d=a(c.value,c.key,h++);<span class="cstat-no" title="statement not covered" >v</span>oid 0!==d?b(d):c["continue"]()}</span>else <span class="cstat-no" title="statement not covered" >b()}</span></span>,g.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d(g.error)}</span>}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function f(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar e=new m(<span class="fstat-no" title="function not covered" >function(c,e){<span class="cstat-no" title="statement not covered" ></span>d.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var f=d._dbInfo,g=f.db.transaction(f.storeName,"readwrite"),h=g.objectStore(f.storeName);<span class="cstat-no" title="statement not covered" >n</span>ull===b&amp;&amp;(b=void 0);<span class="cstat-no" title="statement not covered" >v</span>ar i=h.put(b,a);<span class="cstat-no" title="statement not covered" >g</span>.oncomplete=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>void 0===b&amp;&amp;(b=null),c(b)}</span>,g.onabort=g.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=i.error?i.error:i.transaction.error;<span class="cstat-no" title="statement not covered" >e</span>(a)}</span>}</span>)["catch"](e)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(e,c),e}<span class="fstat-no" title="function not covered" ></span>function g(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo,f=e.db.transaction(e.storeName,"readwrite"),g=f.objectStore(e.storeName),h=g["delete"](a);<span class="cstat-no" title="statement not covered" >f</span>.oncomplete=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>b()}</span>,f.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d(h.error)}</span>,f.onabort=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=h.error?h.error:h.transaction.error;<span class="cstat-no" title="statement not covered" >d</span>(a)}</span>}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function h(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo,e=d.db.transaction(d.storeName,"readwrite"),f=e.objectStore(d.storeName),g=f.clear();<span class="cstat-no" title="statement not covered" >e</span>.oncomplete=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a()}</span>,e.onabort=e.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=g.error?g.error:g.transaction.error;<span class="cstat-no" title="statement not covered" >c</span>(a)}</span>}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function i(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.count();<span class="cstat-no" title="statement not covered" >f</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a(f.result)}</span>,f.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>c(f.error)}</span>}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function j(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>return 0&gt;a?void b(null):void c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo,f=e.db.transaction(e.storeName,"readonly").objectStore(e.storeName),g=!1,h=f.openCursor();<span class="cstat-no" title="statement not covered" >h</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var c=h.result;<span class="cstat-no" title="statement not covered" >r</span>eturn c?void(0===a?b(c.key):g?b(c.key):(g=!0,c.advance(a))):void b(null)}</span>,h.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>d(h.error)}</span>}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function k(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo,e=d.db.transaction(d.storeName,"readonly").objectStore(d.storeName),f=e.openCursor(),g=[];<span class="cstat-no" title="statement not covered" >f</span>.onsuccess=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=f.result;<span class="cstat-no" title="statement not covered" >r</span>eturn b?(g.push(b.key),void b["continue"]()):void a(g)}</span>,f.onerror=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>c(f.error)}</span>}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function l(a,b){<span class="cstat-no" title="statement not covered" ></span>b&amp;&amp;a.then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(null,a)}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(a)}</span>)}<span class="cstat-no" title="statement not covered" ></span>var m="undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?a("promise"):this.Promise,n=n||this.indexedDB||this.webkitIndexedDB||this.mozIndexedDB||this.OIndexedDB||this.msIndexedDB;<span class="cstat-no" title="statement not covered" >i</span>f(n){<span class="cstat-no" title="statement not covered" >var o={_driver:"asyncStorage",_initStorage:c,iterate:e,getItem:d,setItem:f,removeItem:g,clear:h,length:i,key:j,keys:k};<span class="cstat-no" title="statement not covered" >"</span>undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?b.exports=o:"function"==typeof define&amp;&amp;define.amd?define("asyncStorage",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return o}</span>):this.asyncStorage=o}</span>}</span>).call(window)}</span>,{promise:38}],41:[<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>(<span class="fstat-no" title="function not covered" >function(){</span>"use strict";<span class="fstat-no" title="function not covered" >function c(b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d={};<span class="cstat-no" title="statement not covered" >i</span>f(b)<span class="cstat-no" title="statement not covered" >for(var e in b)<span class="cstat-no" title="statement not covered" >d[e]=b[e];<span class="cstat-no" title="statement not covered" >d</span></span></span>.keyPrefix=d.name+"/",c._dbInfo=d;<span class="cstat-no" title="statement not covered" >v</span>ar f=new m(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>s===r.DEFINE?a(["localforageSerializer"],b):b(s===r.EXPORT?a("./../utils/serializer"):n.localforageSerializer)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn f.then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return o=a,m.resolve()}</span>)}<span class="fstat-no" title="function not covered" ></span>function d(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var a=b._dbInfo.keyPrefix,c=p.length-1;c&gt;=0;c--){<span class="cstat-no" title="statement not covered" >var d=p.key(c);<span class="cstat-no" title="statement not covered" >0</span>===d.indexOf(a)&amp;&amp;p.removeItem(d)}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function e(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar d=c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=c._dbInfo,d=p.getItem(b.keyPrefix+a);<span class="cstat-no" title="statement not covered" >r</span>eturn d&amp;&amp;(d=o.deserialize(d)),d}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function f(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var b=c._dbInfo.keyPrefix,d=b.length,e=p.length,f=0;e&gt;f;f++){<span class="cstat-no" title="statement not covered" >var g=p.key(f),h=p.getItem(g);<span class="cstat-no" title="statement not covered" >i</span>f(h&amp;&amp;(h=o.deserialize(h)),h=a(h,g.substring(d),f+1),void 0!==h)<span class="cstat-no" title="statement not covered" >return h}</span></span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function g(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b,d=c._dbInfo;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >b=p.key(a)}</span>catch(e){<span class="cstat-no" title="statement not covered" >b=null}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn b&amp;&amp;(b=b.substring(d.keyPrefix.length)),b}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function h(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var a=b._dbInfo,c=p.length,d=[],e=0;c&gt;e;e++)<span class="cstat-no" title="statement not covered" >0===p.key(e).indexOf(a.keyPrefix)&amp;&amp;d.push(p.key(e).substring(a.keyPrefix.length));<span class="cstat-no" title="statement not covered" >r</span></span>eturn d}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function i(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=b.keys().then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.length}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function j(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar d=c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=c._dbInfo;<span class="cstat-no" title="statement not covered" >p</span>.removeItem(b.keyPrefix+a)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function k(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=this;<span class="cstat-no" title="statement not covered" >"</span>string"!=typeof a&amp;&amp;(window.console.warn(a+" used as a key, but it is not a string."),a=String(a));<span class="cstat-no" title="statement not covered" >v</span>ar e=d.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>void 0===b&amp;&amp;(b=null);<span class="cstat-no" title="statement not covered" >v</span>ar c=b;<span class="cstat-no" title="statement not covered" >r</span>eturn new m(<span class="fstat-no" title="function not covered" >function(e,f){<span class="cstat-no" title="statement not covered" ></span>o.serialize(b,<span class="fstat-no" title="function not covered" >function(b,g){<span class="cstat-no" title="statement not covered" ></span>if(g)<span class="cstat-no" title="statement not covered" >f(g);e</span>lse <span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >var h=d._dbInfo;<span class="cstat-no" title="statement not covered" >p</span>.setItem(h.keyPrefix+a,b),e(c)}</span>catch(i){<span class="cstat-no" title="statement not covered" >("QuotaExceededError"===i.name||"NS_ERROR_DOM_QUOTA_REACHED"===i.name)&amp;&amp;f(i),f(i)}</span>}</span></span>)}</span>)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(e,c),e}<span class="fstat-no" title="function not covered" ></span>function l(a,b){<span class="cstat-no" title="statement not covered" ></span>b&amp;&amp;a.then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(null,a)}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(a)}</span>)}<span class="cstat-no" title="statement not covered" ></span>var m="undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?a("promise"):this.Promise,n=this,o=null,p=null;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >if(!(this.localStorage&amp;&amp;"setItem"in this.localStorage))<span class="cstat-no" title="statement not covered" >return;<span class="cstat-no" title="statement not covered" >p</span></span>=this.localStorage}</span>catch(q){<span class="cstat-no" title="statement not covered" >return}<span class="cstat-no" title="statement not covered" ></span>v</span>ar r={DEFINE:1,EXPORT:2,WINDOW:3},s=r.WINDOW;<span class="cstat-no" title="statement not covered" >"</span>undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?s=r.EXPORT:"function"==typeof define&amp;&amp;define.amd&amp;&amp;(s=r.DEFINE);<span class="cstat-no" title="statement not covered" >v</span>ar t={_driver:"localStorageWrapper",_initStorage:c,iterate:f,getItem:e,setItem:k,removeItem:j,clear:d,length:i,key:g,keys:h};<span class="cstat-no" title="statement not covered" >s</span>===r.EXPORT?b.exports=t:s===r.DEFINE?define("localStorageWrapper",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return t}</span>):this.localStorageWrapper=t}</span>).call(window)}</span>,{"./../utils/serializer":44,promise:38}],42:[function(a,b,c){(function(){"use strict";function c(b){var c=this,d={db:null};<span class="missing-if-branch" title="else path not taken" >E</span>if(b)for(var e in b)d[e]="string"!=typeof b[e]?b[e].toString():b[e];var f=new m(function(b){r===q.DEFINE?<span class="branch-0 cbranch-no" title="branch not covered" >a(["localforageSerializer"],b):</span>b(r===q.EXPORT?a("./../utils/serializer"):<span class="branch-1 cbranch-no" title="branch not covered" >n.localforageSerializer)</span>}),g=new m(function(a,e){try{d.db=p(d.name,String(d.version),d.description,d.size)}catch(f){<span class="cstat-no" title="statement not covered" >return c.setDriver(c.LOCALSTORAGE).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return c._initStorage(b)}</span>).then(a)["catch"](e)}</span>d.db.transaction(function(b){b.executeSql("CREATE TABLE IF NOT EXISTS "+d.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){c._dbInfo=d,a()},<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>e(b)}</span>)})});return f.then(function(a){return o=a,g})}function d(a,b){var c=this;"string"!=typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >window.console.warn(a+" used as a key, but it is not a string."),a=String(a))</span>;var d=new m(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:<span class="branch-1 cbranch-no" title="branch not covered" >null;</span>d&amp;&amp;(d=o.deserialize(d)),b(d)},<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>d(b)}</span>)})})["catch"](d)});return l(d,b),d}<span class="fstat-no" title="function not covered" >function e(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo;<span class="cstat-no" title="statement not covered" >e</span>.db.transaction(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>c.executeSql("SELECT * FROM "+e.storeName,[],<span class="fstat-no" title="function not covered" >function(c,d){<span class="cstat-no" title="statement not covered" ></span>for(var e=d.rows,f=e.length,g=0;f&gt;g;g++){<span class="cstat-no" title="statement not covered" >var h=e.item(g),i=h.value;<span class="cstat-no" title="statement not covered" >i</span>f(i&amp;&amp;(i=o.deserialize(i)),i=a(i,h.key,g+1),void 0!==i)<span class="cstat-no" title="statement not covered" >return void b(i)}<span class="cstat-no" title="statement not covered" ></span></span>b</span>()}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>d(b)}</span>)}</span>)}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}</span>function f(a,b,c){var d=this;"string"!=typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >window.console.warn(a+" used as a key, but it is not a string."),a=String(a))</span>;var e=new m(function(c,e){d.ready().then(function(){void 0===b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >b=null)</span>;var f=b;o.serialize(b,function(b,g){<span class="missing-if-branch" title="if path not taken" >I</span>if(g)<span class="cstat-no" title="statement not covered" >e(g);e</span>lse{var h=d._dbInfo;h.db.transaction(function(d){d.executeSql("INSERT OR REPLACE INTO "+h.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){c(f)},<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>e(b)}</span>)},<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a.code===a.QUOTA_ERR&amp;&amp;e(a)}</span>)}})})["catch"](e)});return l(e,c),e}function g(a,b){var c=this;"string"!=typeof a&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >window.console.warn(a+" used as a key, but it is not a string."),a=String(a))</span>;var d=new m(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){c.executeSql("DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>d(b)}</span>)})})["catch"](d)});return l(d,b),d}<span class="fstat-no" title="function not covered" >function h(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo;<span class="cstat-no" title="statement not covered" >d</span>.db.transaction(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b.executeSql("DELETE FROM "+d.storeName,[],<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a()}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>c(b)}</span>)}</span>)}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function i(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo;<span class="cstat-no" title="statement not covered" >d</span>.db.transaction(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b.executeSql("SELECT COUNT(key) as c FROM "+d.storeName,[],<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>var d=c.rows.item(0).c;<span class="cstat-no" title="statement not covered" >a</span>(d)}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>c(b)}</span>)}</span>)}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}<span class="fstat-no" title="function not covered" ></span>function j(a,b){<span class="cstat-no" title="statement not covered" ></span>var c=this,d=new m(<span class="fstat-no" title="function not covered" >function(b,d){<span class="cstat-no" title="statement not covered" ></span>c.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var e=c._dbInfo;<span class="cstat-no" title="statement not covered" >e</span>.db.transaction(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>c.executeSql("SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>var d=c.rows.length?c.rows.item(0).key:null;<span class="cstat-no" title="statement not covered" >b</span>(d)}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>d(b)}</span>)}</span>)}</span>)["catch"](d)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(d,b),d}<span class="fstat-no" title="function not covered" ></span>function k(a){<span class="cstat-no" title="statement not covered" ></span>var b=this,c=new m(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>b.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var d=b._dbInfo;<span class="cstat-no" title="statement not covered" >d</span>.db.transaction(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>b.executeSql("SELECT key FROM "+d.storeName,[],<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>for(var d=[],e=0;e&lt;c.rows.length;e++)<span class="cstat-no" title="statement not covered" >d.push(c.rows.item(e).key);<span class="cstat-no" title="statement not covered" >a</span></span>(d)}</span>,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>c(b)}</span>)}</span>)}</span>)["catch"](c)}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn l(c,a),c}</span>function l(a,b){b&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >a.then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(null,a)}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b(a)}</span>)}</span>var m="undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?a("promise"):<span class="branch-1 cbranch-no" title="branch not covered" >this.Promise,</span>n=this,o=null,p=this.openDatabase;<span class="missing-if-branch" title="else path not taken" >E</span>if(p){var q={DEFINE:1,EXPORT:2,WINDOW:3},r=q.WINDOW;"undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?r=q.EXPORT:<span class="branch-1 cbranch-no" title="branch not covered" >"function"==typeof define&amp;&amp;define.amd&amp;&amp;(r=q.DEFINE);</span>
&nbsp;
var s={_driver:"webSQLStorage",_initStorage:c,iterate:e,getItem:d,setItem:f,removeItem:g,clear:h,length:i,key:j,keys:k};r===q.DEFINE?<span class="branch-0 cbranch-no" title="branch not covered" >define("webSQLStorage",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return s}</span>):</span>r===q.EXPORT?b.exports=s:<span class="branch-1 cbranch-no" title="branch not covered" >this.webSQLStorage=s}</span>}).call(window)},{"./../utils/serializer":44,promise:38}],43:[function(a,b,c){(function(){"use strict";function c(a,b){a[b]=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var c=arguments;<span class="cstat-no" title="statement not covered" >r</span>eturn a.ready().then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return a[b].apply(a,c)}</span>)}</span>}function d(){for(var a=1;a&lt;arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&amp;&amp;(p(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}function e(a){for(var b in i)if(i.hasOwnProperty(b)&amp;&amp;i[b]===a)return!0;<span class="cstat-no" title="statement not covered" >return!1}</span>function f(a){this._config=d({},m,a),this._driverSet=null,this._ready=!1,this._dbInfo=null;for(var b=0;b&lt;k.length;b++)c(this,k[b]);this.setDriver(this._config.driver)}var g="undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?a("promise"):<span class="branch-1 cbranch-no" title="branch not covered" >this.Promise,</span>h={},i={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},j=[i.INDEXEDDB,i.WEBSQL,i.LOCALSTORAGE],k=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],l={DEFINE:1,EXPORT:2,WINDOW:3},m={description:"",driver:j.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},n=l.WINDOW;"undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?n=l.EXPORT:<span class="branch-1 cbranch-no" title="branch not covered" >"function"==typeof define&amp;&amp;define.amd&amp;&amp;(n=l.DEFINE);</span>var o=function(a){var b=b||a.indexedDB||a.webkitIndexedDB||a.mozIndexedDB||a.OIndexedDB||a.msIndexedDB,c={};return c[i.WEBSQL]=!!a.openDatabase,c[i.INDEXEDDB]=!!function(){<span class="missing-if-branch" title="else path not taken" >E</span>if("undefined"!=typeof a.openDatabase&amp;&amp;a.navigator&amp;&amp;a.navigator.userAgent&amp;&amp;/Safari/.test(a.navigator.userAgent)&amp;&amp;!/Chrome/.test(a.navigator.userAgent))return!1;<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >return b&amp;&amp;"function"==typeof b.open&amp;&amp;"undefined"!=typeof a.IDBKeyRange}</span>catch(c){<span class="cstat-no" title="statement not covered" >return!1}</span>}</span>(),c[i.LOCALSTORAGE]=!!function(){try{return a.localStorage&amp;&amp;"setItem"in a.localStorage&amp;&amp;a.localStorage.setItem}catch(b){<span class="cstat-no" title="statement not covered" >return!1}</span>}(),c}(this),p=Array.isArray||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return"[object Array]"===Object.prototype.toString.call(a)}</span>,</span>q=this;f.prototype.INDEXEDDB=i.INDEXEDDB,f.prototype.LOCALSTORAGE=i.LOCALSTORAGE,f.prototype.WEBSQL=i.WEBSQL,f.prototype.config=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if("object"==typeof a){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a)"storeName"===b&amp;&amp;(a[b]=a[b].replace(/\W/g,"_")),this._config[b]=a[b];return"driver"in a&amp;&amp;a.driver&amp;&amp;this.setDriver(this._config.driver),!0}<span class="cstat-no" title="statement not covered" >return"string"==typeof a?this._config[a]:this._config}</span>,f.prototype.defineDriver=<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=new g(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >var d=a._driver,f=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),i=new Error("Custom driver name already in use: "+a._driver);<span class="cstat-no" title="statement not covered" >i</span>f(!a._driver)<span class="cstat-no" title="statement not covered" >return void c(f);<span class="cstat-no" title="statement not covered" >i</span></span>f(e(a._driver))<span class="cstat-no" title="statement not covered" >return void c(i);<span class="cstat-no" title="statement not covered" >f</span></span>or(var j=k.concat("_initStorage"),l=0;l&lt;j.length;l++){<span class="cstat-no" title="statement not covered" >var m=j[l];<span class="cstat-no" title="statement not covered" >i</span>f(!m||!a[m]||"function"!=typeof a[m])<span class="cstat-no" title="statement not covered" >return void c(f)}<span class="cstat-no" title="statement not covered" ></span></span>v</span>ar n=g.resolve(!0);<span class="cstat-no" title="statement not covered" >"</span>_support"in a&amp;&amp;(n=a._support&amp;&amp;"function"==typeof a._support?a._support():g.resolve(!!a._support)),n.then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>o[d]=c,h[d]=a,b()}</span>,c)}</span>catch(p){<span class="cstat-no" title="statement not covered" >c(p)}</span>}</span>);<span class="cstat-no" title="statement not covered" >r</span>eturn d.then(b,c),d}</span>,f.prototype.driver=function(){return this._driver||<span class="branch-1 cbranch-no" title="branch not covered" >null}</span>,f.prototype.ready=function(a){var b=this,c=new g(function(a,c){b._driverSet.then(function(){null===b._ready&amp;&amp;(b._ready=b._initStorage(b._config)),b._ready.then(a,c)})["catch"](c)});return c.then(a,a),c},f.prototype.setDriver=function(b,c,d){function f(){i._config.driver=i.driver()}var i=this;return"string"==typeof b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >b=[b])</span>,this._driverSet=new g(function(c,d){var f=i._getFirstSupportedDriver(b),j=new Error("No available storage method found.");<span class="missing-if-branch" title="if path not taken" >I</span>if(!f)<span class="cstat-no" title="statement not covered" >return i._driverSet=g.reject(j),void d(j);<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(i._dbInfo=null,i._ready=null,e(f)){var k=new g(function(b){<span class="missing-if-branch" title="if path not taken" >I</span>if(n===l.DEFINE)<span class="cstat-no" title="statement not covered" >a([f],b);e</span>lse <span class="missing-if-branch" title="else path not taken" >E</span>if(n===l.EXPORT)switch(f){<span class="branch-0 cbranch-no" title="branch not covered" >case i.INDEXEDDB:<span class="cstat-no" title="statement not covered" >b(a("./drivers/indexeddb"));<span class="cstat-no" title="statement not covered" >b</span>reak;<span class="branch-1 cbranch-no" title="branch not covered" >c</span></span>ase i.LOCALSTORAGE:<span class="cstat-no" title="statement not covered" >b(a("./drivers/localstorage"));<span class="cstat-no" title="statement not covered" >b</span>reak;c</span></span>ase i.WEBSQL:b(a("./drivers/websql"))}else <span class="cstat-no" title="statement not covered" >b(q[f])}</span>);k.then(function(a){i._extend(a),c()})}else <span class="cstat-no" title="statement not covered" >h[f]?(i._extend(h[f]),c()):(i._driverSet=g.reject(j),d(j))}</span>),this._driverSet.then(f,f),this._driverSet.then(c,d),this._driverSet},f.prototype.supports=function(a){return!!o[a]},f.prototype._extend=function(a){d(this,a)},f.prototype._getFirstSupportedDriver=function(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(a&amp;&amp;p(a))for(var b=0;b&lt;a.length;b++){var c=a[b];if(this.supports(c))return c}<span class="cstat-no" title="statement not covered" >return null}</span>,f.prototype.createInstance=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return new f(a)}</span>;var r=new f;n===l.DEFINE?<span class="branch-0 cbranch-no" title="branch not covered" >define("localforage",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return r}</span>):</span>n===l.EXPORT?b.exports=r:<span class="branch-1 cbranch-no" title="branch not covered" >this.localforage=r}</span>).call(window)},{"./drivers/indexeddb":40,"./drivers/localstorage":41,"./drivers/websql":42,promise:38}],44:[function(a,b,c){(function(){"use strict";function c(a,b){var c="";<span class="missing-if-branch" title="if path not taken" >I</span>if(a&amp;&amp;(c=a.toString()),a&amp;&amp;("[object ArrayBuffer]"===a.toString()||a.buffer&amp;&amp;<span class="branch-3 cbranch-no" title="branch not covered" >"[object ArrayBuffer]"===a.buffer.toString())</span>){<span class="cstat-no" title="statement not covered" >var d,e=h;<span class="cstat-no" title="statement not covered" >a</span> instanceof ArrayBuffer?(d=a,e+=j):(d=a.buffer,"[object Int8Array]"===c?e+=l:"[object Uint8Array]"===c?e+=m:"[object Uint8ClampedArray]"===c?e+=n:"[object Int16Array]"===c?e+=o:"[object Uint16Array]"===c?e+=q:"[object Int32Array]"===c?e+=p:"[object Uint32Array]"===c?e+=r:"[object Float32Array]"===c?e+=s:"[object Float64Array]"===c?e+=t:b(new Error("Failed to get type for BinaryArray"))),b(e+f(d))}</span>else <span class="missing-if-branch" title="if path not taken" >I</span>if("[object Blob]"===c){<span class="cstat-no" title="statement not covered" >var g=new FileReader;<span class="cstat-no" title="statement not covered" >g</span>.onload=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=f(this.result);<span class="cstat-no" title="statement not covered" >b</span>(h+k+a)}</span>,g.readAsArrayBuffer(a)}</span>else try{b(JSON.stringify(a))}catch(i){<span class="cstat-no" title="statement not covered" >window.console.error("Couldn't convert value into a JSON string: ",a),b(null,i)}</span>}function d(a){<span class="missing-if-branch" title="else path not taken" >E</span>if(a.substring(0,i)!==h)return JSON.parse(a);<span class="cstat-no" title="statement not covered" >var b=a.substring(u),c=a.substring(i,u),d=e(b);<span class="cstat-no" title="statement not covered" >s</span>witch(c){case j:<span class="cstat-no" title="statement not covered" >return d;c</span>ase k:<span class="cstat-no" title="statement not covered" >return new Blob([d]);c</span>ase l:<span class="cstat-no" title="statement not covered" >return new Int8Array(d);c</span>ase m:<span class="cstat-no" title="statement not covered" >return new Uint8Array(d);c</span>ase n:<span class="cstat-no" title="statement not covered" >return new Uint8ClampedArray(d);c</span>ase o:<span class="cstat-no" title="statement not covered" >return new Int16Array(d);c</span>ase q:<span class="cstat-no" title="statement not covered" >return new Uint16Array(d);c</span>ase p:<span class="cstat-no" title="statement not covered" >return new Int32Array(d);c</span>ase r:<span class="cstat-no" title="statement not covered" >return new Uint32Array(d);c</span>ase s:<span class="cstat-no" title="statement not covered" >return new Float32Array(d);c</span>ase t:<span class="cstat-no" title="statement not covered" >return new Float64Array(d);d</span>efault:<span class="cstat-no" title="statement not covered" >throw new Error("Unkown type: "+c)}</span>}<span class="fstat-no" title="function not covered" ></span>function e(a){<span class="cstat-no" title="statement not covered" ></span>var b,c,d,e,f,h=.75*a.length,i=a.length,j=0;<span class="cstat-no" title="statement not covered" >"</span>="===a[a.length-1]&amp;&amp;(h--,"="===a[a.length-2]&amp;&amp;h--);<span class="cstat-no" title="statement not covered" >v</span>ar k=new ArrayBuffer(h),l=new Uint8Array(k);<span class="cstat-no" title="statement not covered" >f</span>or(b=0;i&gt;b;b+=4)<span class="cstat-no" title="statement not covered" >c=g.indexOf(a[b]),d=g.indexOf(a[b+1]),e=g.indexOf(a[b+2]),f=g.indexOf(a[b+3]),l[j++]=c&lt;&lt;2|d&gt;&gt;4,l[j++]=(15&amp;d)&lt;&lt;4|e&gt;&gt;2,l[j++]=(3&amp;e)&lt;&lt;6|63&amp;f;<span class="cstat-no" title="statement not covered" >r</span></span>eturn k}<span class="fstat-no" title="function not covered" ></span>function f(a){<span class="cstat-no" title="statement not covered" ></span>var b,c=new Uint8Array(a),d="";<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;c.length;b+=3)<span class="cstat-no" title="statement not covered" >d+=g[c[b]&gt;&gt;2],d+=g[(3&amp;c[b])&lt;&lt;4|c[b+1]&gt;&gt;4],d+=g[(15&amp;c[b+1])&lt;&lt;2|c[b+2]&gt;&gt;6],d+=g[63&amp;c[b+2]];<span class="cstat-no" title="statement not covered" >r</span></span>eturn c.length%3===2?d=d.substring(0,d.length-1)+"=":c.length%3===1&amp;&amp;(d=d.substring(0,d.length-2)+"=="),d}</span>var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h="__lfsc__:",i=h.length,j="arbf",k="blob",l="si08",m="ui08",n="uic8",o="si16",p="si32",q="ur16",r="ui32",s="fl32",t="fl64",u=i+j.length,v={serialize:c,deserialize:d,stringToBuffer:e,bufferToString:f};"undefined"!=typeof b&amp;&amp;b.exports&amp;&amp;"undefined"!=typeof a?b.exports=v:<span class="branch-1 cbranch-no" title="branch not covered" >"function"==typeof define&amp;&amp;define.amd?define("localforageSerializer",<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return v}</span>):this.localforageSerializer=v}</span>).call(window)},{}],45:[function(a,b,c){!function(a,b){"use strict";var c;a(function(a){function d(a,b){var c,d,e,f;<span class="missing-if-branch" title="else path not taken" >E</span>if(c=a,e={},b){for(d in b)<span class="cstat-no" title="statement not covered" >f=new RegExp("\\{"+d+"\\}"),f.test(c)?c=c.replace(f,encodeURIComponent(b[d]),"g"):e[d]=b[d];f</span>or(d in e)<span class="cstat-no" title="statement not covered" >c+=-1===c.indexOf("?")?"?":"&amp;",c+=encodeURIComponent(d),null!==e[d]&amp;&amp;void 0!==e[d]&amp;&amp;(c+="=",c+=encodeURIComponent(e[d]))}</span>return c}<span class="fstat-no" title="function not covered" >function e(a,b){<span class="cstat-no" title="statement not covered" ></span>return 0===a.indexOf(b)}</span>function f(a,b){return this instanceof f?void(a instanceof f?(<span class="branch-0 cbranch-no" title="branch not covered" >this._template=a.template,this._params=g({},this._params,b))</span>:(this._template=(a||<span class="branch-1 cbranch-no" title="branch not covered" >"")</span>.toString(),this._params=b||{})):<span class="branch-1 cbranch-no" title="branch not covered" >new f(a,b)}</span>var g,h,i,j,k;return g=a("./util/mixin"),i=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?(\/[^?#]*)?(\?[^#]*)?(#\S*)?/i,j=/^([a-z][a-z0-9\-\+\.]*:\/\/|\/)/i,k=/([a-z][a-z0-9\+\-\.]*:)\/\/([^@]+@)?(([^:\/]+)(:([0-9]+))?)?\//i,f.prototype={append:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return new f(this._template+a,g({},this._params,b))}</span>,fullyQualify:function(){<span class="missing-if-branch" title="if path not taken" >I</span>if(!b)<span class="cstat-no" title="statement not covered" >return this;<span class="missing-if-branch" title="else path not taken" >E</span>i</span>f(this.isFullyQualified())return this;<span class="cstat-no" title="statement not covered" >var a=this._template;<span class="cstat-no" title="statement not covered" >r</span>eturn e(a,"//")?a=h.protocol+a:e(a,"/")?a=h.origin+a:this.isAbsolute()||(a=h.origin+h.pathname.substring(0,h.pathname.lastIndexOf("/")+1)),-1===a.indexOf("/",8)&amp;&amp;(a+="/"),new f(a,this._params)}</span>,isAbsolute:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return j.test(this.build())}</span>,isFullyQualified:function(){return k.test(this.build())},isCrossOrigin:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(!h)<span class="cstat-no" title="statement not covered" >return!0;<span class="cstat-no" title="statement not covered" >v</span></span>ar a=this.parts();<span class="cstat-no" title="statement not covered" >r</span>eturn a.protocol!==h.protocol||a.hostname!==h.hostname||a.port!==h.port}</span>,parts:function(){var a,b;return a=this.fullyQualify().build().match(i),b={href:a[0],protocol:a[1],host:a[3]||"",hostname:a[4]||"",port:a[6],pathname:a[7]||<span class="branch-1 cbranch-no" title="branch not covered" >"",</span>search:a[8]||"",hash:a[9]||""},b.origin=b.protocol+"//"+b.host,b.port=b.port||("https:"===b.protocol?<span class="branch-0 cbranch-no" title="branch not covered" >"443":</span>"http:"===b.protocol?<span class="branch-0 cbranch-no" title="branch not covered" >"80":</span>""),b},build:function(a){return d(this._template,g({},this._params,a))},toString:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return this.build()}</span>},h=b?new f(b.href).parts():<span class="branch-1 cbranch-no" title="branch not covered" >c,</span>f})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)},"undefined"!=typeof window?window.location:<span class="branch-1 cbranch-no" title="branch not covered" >void 0)</span>},{"./util/mixin":81}],46:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("./client/default"),c=a("./client/xhr");return b.setPlatformDefaultClient(c),b})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./client/default":48,"./client/xhr":49}],47:[function(a,b,c){!function(a){"use strict";a(function(){return function(a,b){return b&amp;&amp;(a.skip=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return b}</span>),a.wrap=function(b,c){return b(a,c)},a.chain=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return"undefined"!=typeof console&amp;&amp;console.log("rest.js: client.chain() is deprecated, use client.wrap() instead"),a.wrap.apply(this,arguments)}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],48:[function(a,b,c){!function(a){"use strict";var b;a(function(a){function c(){return e.apply(b,arguments)}var d,e,f;return d=a("../client"),c.setDefaultClient=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>e=a}</span>,c.getDefaultClient=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return e}</span>,c.resetDefaultClient=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>e=f}</span>,c.setPlatformDefaultClient=function(a){<span class="missing-if-branch" title="if path not taken" >I</span>if(f)<span class="cstat-no" title="statement not covered" >throw new Error("Unable to redefine platformDefaultClient");e</span>=f=a},d(c)})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../client":47}],49:[function(a,b,c){!function(a,b){"use strict";a(function(a){function c(a){var b={};return a?(<span class="branch-0 cbranch-no" title="branch not covered" >a.trim().split(j).forEach(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var c,d,e;<span class="cstat-no" title="statement not covered" >c</span>=a.indexOf(":"),d=g(a.substring(0,c).trim()),e=a.substring(c+1).trim(),b[d]?Array.isArray(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e}</span>),b)</span>:b}function d(a,b){return Object.keys(b||{}).forEach(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>if(b.hasOwnProperty(c)&amp;&amp;c in a)<span class="cstat-no" title="statement not covered" >try{<span class="cstat-no" title="statement not covered" >a[c]=b[c]}</span>catch(d){}}</span></span>),a}var e,f,g,h,i,j;return e=a("when"),f=a("../UrlBuilder"),g=a("../util/normalizeHeaderName"),h=a("../util/responsePromise"),i=a("../client"),j=/[\r|\n]+/,i(function(a){return h.promise(function(e,g){var h,i,j,k,l,m,n,o;<span class="missing-if-branch" title="if path not taken" >I</span>if(a="string"==typeof a?<span class="branch-0 cbranch-no" title="branch not covered" >{path:a}:</span>a||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>n={request:a},a.canceled)<span class="cstat-no" title="statement not covered" >return n.error="precanceled",void g(n);<span class="missing-if-branch" title="if path not taken" >I</span>i</span>f(o=a.engine||b.XMLHttpRequest,!o)<span class="cstat-no" title="statement not covered" >return void g({request:a,error:"xhr-not-available"});l</span>=a.entity,a.method=a.method||(<span class="branch-1 cbranch-no" title="branch not covered" >l?"POST":"GET")</span>,i=a.method,j=new f(a.path||<span class="branch-1 cbranch-no" title="branch not covered" >"",</span>a.params).build();try{h=n.raw=new o,d(h,a.mixin),h.open(i,j,!0),d(h,a.mixin),k=a.headers;for(m in k)("Content-Type"!==m||"multipart/form-data"!==k[m])&amp;&amp;h.setRequestHeader(m,k[m]);a.canceled=!1,a.cancel=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a.canceled=!0,h.abort(),g(n)}</span>,h.onreadystatechange=function(){a.canceled||h.readyState===(o.DONE||<span class="branch-1 cbranch-no" title="branch not covered" >4)</span>&amp;&amp;(n.status={code:h.status,text:h.statusText},n.headers=c(h.getAllResponseHeaders()),n.entity=h.responseText,n.status.code&gt;0?<span class="branch-0 cbranch-no" title="branch not covered" >e(n):</span>setTimeout(function(){e(n)},0))};try{h.onerror=function(){n.error="loaderror",g(n)}}catch(p){}h.send(l)}catch(p){<span class="cstat-no" title="statement not covered" >n.error="loaderror",g(n)}</span>})})})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)},"undefined"!=typeof window?window:<span class="branch-1 cbranch-no" title="branch not covered" >void 0)</span>},{"../UrlBuilder":45,"../client":47,"../util/normalizeHeaderName":82,"../util/responsePromise":83,when:78}],50:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a){<span class="cstat-no" title="statement not covered" ></span>return a}<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>return a}<span class="fstat-no" title="function not covered" ></span>function d(a){<span class="cstat-no" title="statement not covered" ></span>return a}<span class="fstat-no" title="function not covered" ></span>function e(a){<span class="cstat-no" title="statement not covered" ></span>return l.promise(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>a.forEach(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>l(a,b,c)}</span>)}</span>)}<span class="fstat-no" title="function not covered" ></span>function f(a){<span class="cstat-no" title="statement not covered" ></span>return this instanceof f?void i(this,a):new f(a)}</span>function g(a){var g,i,m,n;return a=a||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>g=a.init||b,i=a.request||<span class="branch-1 cbranch-no" title="branch not covered" >c,</span>m=a.success||a.response||d,n=a.error||function(){return l((a.response||<span class="branch-1 cbranch-no" title="branch not covered" >d)</span>.apply(this,arguments),l.reject,l.reject)},function(b,c){function d(a){var g,h;return g={},h={arguments:Array.prototype.slice.call(arguments),client:d},a="string"==typeof a?<span class="branch-0 cbranch-no" title="branch not covered" >{path:a}:</span>a||<span class="branch-1 cbranch-no" title="branch not covered" >{},</span>a.originator=a.originator||d,j(i.call(g,a,c,h),function(a){var d,i,j;return j=b,a instanceof f&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >i=a.abort,j=a.client||j,d=a.response,a=a.request)</span>,d=d||l(a,function(a){return l(j(a),<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return m.call(g,a,c,h)}</span>,function(a){return n.call(g,a,c,h)})}),i?<span class="branch-0 cbranch-no" title="branch not covered" >e([d,i]):</span>d},<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return l.reject({request:a,error:b})}</span>)}return"object"==typeof b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >c=b)</span>,"function"!=typeof b&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >b=a.client||h)</span>,c=g(c||{}),k(d,b)}}var h,i,j,k,l;return h=a("./client/default"),i=a("./util/mixin"),j=a("./util/responsePromise"),k=a("./client"),l=a("when"),g.ComplexRequest=f,g})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./client":47,"./client/default":48,"./util/mixin":81,"./util/responsePromise":83,when:78}],51:[function(a,b,c){!function(a){"use strict";a(function(a){var b,c,d,e,f;return b=a("../interceptor"),c=a("../mime"),d=a("../mime/registry"),f=a("when"),e={read:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a}</span>,write:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a}</span>},b({init:function(a){return a.registry=a.registry||d,a},request:function(a,b){var d,g;return g=a.headers||(<span class="branch-1 cbranch-no" title="branch not covered" >a.headers={})</span>,d=c.parse(g["Content-Type"]=g["Content-Type"]||<span class="branch-1 cbranch-no" title="branch not covered" >b.mime|</span>|<span class="branch-2 cbranch-no" title="branch not covered" >"text/plain")</span>,g.Accept=g.Accept||b.accept||d.raw+", application/json;q=0.8, text/plain;q=0.5, */*;q=0.2","entity"in a?b.registry.lookup(d).otherwise(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>if(b.permissive)<span class="cstat-no" title="statement not covered" >return e;<span class="cstat-no" title="statement not covered" >t</span></span>hrow"mime-unknown"}</span>).then(function(c){var e=b.client||a.originator;return f.attempt(c.write,a.entity,{client:e,request:a,mime:d,registry:b.registry}).otherwise(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>throw"mime-serialization"}</span>).then(function(b){return a.entity=b,a})}):<span class="branch-1 cbranch-no" title="branch not covered" >a}</span>,response:function(a,b){<span class="missing-if-branch" title="else path not taken" >E</span>if(!(a.headers&amp;&amp;a.headers["Content-Type"]&amp;&amp;<span class="branch-2 cbranch-no" title="branch not covered" >a.entity)</span>)return a;<span class="cstat-no" title="statement not covered" >var d=c.parse(a.headers["Content-Type"]);<span class="cstat-no" title="statement not covered" >r</span>eturn b.registry.lookup(d).otherwise(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return e}</span>).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>var e=b.client||a.request&amp;&amp;a.request.originator;<span class="cstat-no" title="statement not covered" >r</span>eturn f.attempt(c.read,a.entity,{client:e,response:a,mime:d,registry:b.registry}).otherwise(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>throw a.error="mime-deserialization",a.cause=b,a}</span>).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return a.entity=b,a}</span>)}</span>)}</span>})})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../interceptor":50,"../mime":54,"../mime/registry":55,when:78}],52:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a,b){<span class="cstat-no" title="statement not covered" ></span>return 0===a.indexOf(b)}<span class="fstat-no" title="function not covered" ></span>function c(a,b){<span class="cstat-no" title="statement not covered" ></span>return a.lastIndexOf(b)+b.length===a.length}</span>var d,e;return d=a("../interceptor"),e=a("../UrlBuilder"),d({request:<span class="fstat-no" title="function not covered" >function(a,d){<span class="cstat-no" title="statement not covered" ></span>var f;<span class="cstat-no" title="statement not covered" >r</span>eturn d.prefix&amp;&amp;!new e(a.path).isFullyQualified()&amp;&amp;(f=d.prefix,a.path&amp;&amp;(c(f,"/")||b(a.path,"/")||(f+="/"),f+=a.path),a.path=f),a}</span>})})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../UrlBuilder":45,"../interceptor":50}],53:[function(a,b,c){!function(a){"use strict";a(function(a){var b,c,d;return b=a("../interceptor"),c=a("../util/uriTemplate"),d=a("../util/mixin"),b({init:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.params=a.params||{},a.template=a.template||"",a}</span>,request:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>var e,f;<span class="cstat-no" title="statement not covered" >r</span>eturn e=a.path||b.template,f=d({},a.params,b.params),a.path=c.expand(e,f),delete a.params,a}</span>})})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../interceptor":50,"../util/mixin":81,"../util/uriTemplate":85}],54:[function(a,b,c){!function(a){"use strict";var b;a(function(){function a(a){var c,d;return c=a.split(";"),d=c[0].trim().split("+"),{raw:a,type:d[0],suffix:d[1]?<span class="branch-0 cbranch-no" title="branch not covered" >"+"+d[1]:</span>"",params:c.slice(1).reduce(<span class="fstat-no" title="function not covered" >function(a,c){<span class="cstat-no" title="statement not covered" ></span>return c=c.split("="),a[c[0].trim()]=c[1]?c[1].trim():b,a}</span>,{})}}return{parse:a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],55:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a){this.lookup=function(b){var e;return e="string"==typeof b?<span class="branch-0 cbranch-no" title="branch not covered" >c.parse(b):</span>b,a[e.raw]?a[e.raw]:<span class="branch-1 cbranch-no" title="branch not covered" >a[e.type+e.suffix]?a[e.type+e.suffix]:a[e.type]?a[e.type]:a[e.suffix]?a[e.suffix]:d.reject(new Error('Unable to locate converter for mime "'+e.raw+'"'))}</span>,this.delegate=function(a){return{read:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=arguments;<span class="cstat-no" title="statement not covered" >r</span>eturn this.lookup(a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.read.apply(this,b)}</span>.bind(this))}</span>.bind(this),write:<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var b=arguments;<span class="cstat-no" title="statement not covered" >r</span>eturn this.lookup(a).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.write.apply(this,b)}</span>.bind(this))}</span>.bind(this)}},this.register=function(b,c){return a[b]=d(c),a[b]},this.child=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return new b(Object.create(a))}</span>}var c,d,e;return c=a("../mime"),d=a("when"),e=new b({}),e.register("application/hal",a("./type/application/hal")),e.register("application/json",a("./type/application/json")),e.register("application/x-www-form-urlencoded",a("./type/application/x-www-form-urlencoded")),e.register("multipart/form-data",a("./type/multipart/form-data")),e.register("text/plain",a("./type/text/plain")),e.register("+json",e.delegate("application/json")),e})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../mime":54,"./type/application/hal":56,"./type/application/json":57,"./type/application/x-www-form-urlencoded":58,"./type/multipart/form-data":59,"./type/text/plain":60,when:78}],56:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a,b,c){<span class="cstat-no" title="statement not covered" ></span>Object.defineProperty(a,b,{value:c,configurable:!0,enumerable:!1,writeable:!0})}</span>var c,d,e,f,g,h;return c=a("../../../interceptor/pathPrefix"),d=a("../../../interceptor/template"),e=a("../../../util/find"),f=a("../../../util/lazyPromise"),g=a("../../../util/responsePromise"),h=a("when"),{read:<span class="fstat-no" title="function not covered" >function(a,i){<span class="fstat-no" title="function not covered" ></span>function j(a,b){<span class="cstat-no" title="statement not covered" ></span>(b&amp;&amp;l&amp;&amp;l.warn||l.log)&amp;&amp;(l.warn||l.log).call(l,"Relationship '"+a+"' is deprecated, see "+b)}<span class="cstat-no" title="statement not covered" ></span>var k,l;<span class="cstat-no" title="statement not covered" >r</span>eturn i=i||{},k=i.client,l=i.console||l,i.registry.lookup(i.mime.suffix).then(<span class="fstat-no" title="function not covered" >function(l){<span class="cstat-no" title="statement not covered" ></span>return h(l.read(a,i)).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return e.findProperties(a,"_embedded",<span class="fstat-no" title="function not covered" >function(a,c,d){<span class="cstat-no" title="statement not covered" ></span>Object.keys(a).forEach(<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>if(!(d in c)){<span class="cstat-no" title="statement not covered" >var e=g({entity:a[d]});<span class="cstat-no" title="statement not covered" >b</span>(c,d,e)}</span>}</span>),b(c,d,a)}</span>),e.findProperties(a,"_links",<span class="fstat-no" title="function not covered" >function(a,e,h){<span class="cstat-no" title="statement not covered" ></span>Object.keys(a).forEach(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>var h=a[c];<span class="cstat-no" title="statement not covered" >c</span> in e||b(e,c,g.make(f(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return h.deprecation&amp;&amp;j(c,h.deprecation),h.templated===!0?d(k)({path:h.href}):k({path:h.href})}</span>)))}</span>),b(e,h,a),b(e,"clientFor",<span class="fstat-no" title="function not covered" >function(b,e){<span class="cstat-no" title="statement not covered" ></span>var f=a[b];<span class="cstat-no" title="statement not covered" >i</span>f(!f)<span class="cstat-no" title="statement not covered" >throw new Error("Unknown relationship: "+b);<span class="cstat-no" title="statement not covered" >r</span></span>eturn f.deprecation&amp;&amp;j(b,f.deprecation),f.templated===!0?d(e||k,{template:f.href}):c(e||k,{prefix:f.href})}</span>),b(e,"requestFor",<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=this.clientFor(a,c);<span class="cstat-no" title="statement not covered" >r</span>eturn d(b)}</span>)}</span>),a}</span>)}</span>)}</span>,write:<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return b.registry.lookup(b.mime.suffix).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>return c.write(a,b)}</span>)}</span>}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../../../interceptor/pathPrefix":52,"../../../interceptor/template":53,"../../../util/find":79,"../../../util/lazyPromise":80,"../../../util/responsePromise":83,when:78}],57:[function(a,b,c){!function(a){"use strict";a(function(){function a(b,c){return{read:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return JSON.parse(a,b)}</span>,write:function(a){return JSON.stringify(a,c)},extend:a}}return a()})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],58:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(a){<span class="cstat-no" title="statement not covered" ></span>return a=encodeURIComponent(a),a.replace(d,"+")}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>return a=a.replace(e," "),decodeURIComponent(a)}<span class="fstat-no" title="function not covered" ></span>function c(b,d,e){<span class="cstat-no" title="statement not covered" ></span>return Array.isArray(e)?e.forEach(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>b=c(b,d,a)}</span>):(b.length&gt;0&amp;&amp;(b+="&amp;"),b+=a(d),void 0!==e&amp;&amp;null!==e&amp;&amp;(b+="="+a(e))),b}</span>var d,e;return d=/%20/g,e=/\+/g,{read:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var c={};<span class="cstat-no" title="statement not covered" >r</span>eturn a.split("&amp;").forEach(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var d,e,f;<span class="cstat-no" title="statement not covered" >d</span>=a.split("="),e=b(d[0]),f=2===d.length?b(d[1]):null,e in c?(Array.isArray(c[e])||(c[e]=[c[e]]),c[e].push(f)):c[e]=f}</span>),c}</span>,write:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b="";<span class="cstat-no" title="statement not covered" >r</span>eturn Object.keys(a).forEach(<span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>b=c(b,d,a[d])}</span>),b}</span>}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],59:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(a){<span class="cstat-no" title="statement not covered" ></span>return a&amp;&amp;1===a.nodeType&amp;&amp;"FORM"===a.tagName}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>var b,c=new FormData;<span class="cstat-no" title="statement not covered" >f</span>or(var d in a)<span class="cstat-no" title="statement not covered" >a.hasOwnProperty(d)&amp;&amp;(b=a[d],b instanceof File?c.append(d,b,b.name):b instanceof Blob?c.append(d,b):c.append(d,String(b)));<span class="cstat-no" title="statement not covered" >r</span></span>eturn c}</span>return{write:<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>if("undefined"==typeof FormData)<span class="cstat-no" title="statement not covered" >throw new Error("The multipart/form-data mime serializer requires FormData support");<span class="cstat-no" title="statement not covered" >i</span></span>f(c instanceof FormData)<span class="cstat-no" title="statement not covered" >return c;<span class="cstat-no" title="statement not covered" >i</span></span>f(a(c))<span class="cstat-no" title="statement not covered" >return new FormData(c);<span class="cstat-no" title="statement not covered" >i</span></span>f("object"==typeof c&amp;&amp;null!==c)<span class="cstat-no" title="statement not covered" >return b(c);<span class="cstat-no" title="statement not covered" >t</span></span>hrow new Error("Unable to create FormData from object "+c)}</span>}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],60:[function(a,b,c){!function(a){"use strict";a(function(){return{read:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a}</span>,write:<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.toString()}</span>}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],61:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("./makePromise"),c=a("./Scheduler"),d=a("./env").asap;return b({scheduler:new c(d)})})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./Scheduler":62,"./env":74,"./makePromise":76}],62:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){this._async=a,this._running=!1,this._queue=this,this._queueLen=0,this._afterQueue={},this._afterQueueLen=0;var b=this;this.drain=function(){b._drain()}}return a.prototype.enqueue=function(a){this._queue[this._queueLen++]=a,this.run()},a.prototype.afterQueue=function(a){this._afterQueue[this._afterQueueLen++]=a,this.run()},a.prototype.run=function(){this._running||(this._running=!0,this._async(this.drain))},a.prototype._drain=function(){for(var a=0;a&lt;this._queueLen;++a)this._queue[a].run(),this._queue[a]=void 0;for(this._queueLen=0,this._running=!1,a=0;a&lt;this._afterQueueLen;++a)this._afterQueue[a].run(),this._afterQueue[a]=void 0;this._afterQueueLen=0},a})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],63:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(b){<span class="cstat-no" title="statement not covered" ></span>Error.call(this),this.message=b,this.name=a.name,"function"==typeof Error.captureStackTrace&amp;&amp;Error.captureStackTrace(this,a)}</span>return a.prototype=Object.create(Error.prototype),a.prototype.constructor=a,a})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],64:[function(a,b,c){!function(a){"use strict";a(function(){function a(a,c){function d(b,d,f){var g=a._defer(),h=f.length,i=new Array(h);return e({f:b,thisArg:d,args:f,params:i,i:h-1,call:c},g._handler),g}function e(b,d){if(b.i&lt;0)return c(b.f,b.thisArg,b.params,d);var e=a._handler(b.args[b.i]);e.fold(f,b,void 0,d)}function f(a,b,c){a.params[a.i]=b,a.i-=1,e(a,c)}return arguments.length&lt;2&amp;&amp;(c=b),d}function b(a,b,c,d){try{d.resolve(a.apply(b,c))}catch(e){<span class="cstat-no" title="statement not covered" >d.reject(e)}</span>}return a.tryCatchResolve=b,a})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],65:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state"),c=a("../apply");return function(a){<span class="fstat-no" title="function not covered" >function d(b){<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>k=null,this.resolve(a)}<span class="fstat-no" title="function not covered" ></span>function d(a){<span class="cstat-no" title="statement not covered" ></span>this.resolved||(k.push(a),0===--j&amp;&amp;this.reject(k))}<span class="cstat-no" title="statement not covered" ></span>for(var e,f,g=a._defer(),h=g._handler,i=b.length&gt;&gt;&gt;0,j=i,k=[],l=0;i&gt;l;++l)<span class="cstat-no" title="statement not covered" >if(f=b[l],void 0!==f||l in b){<span class="cstat-no" title="statement not covered" >if(e=a._handler(f),e.state()&gt;0){<span class="cstat-no" title="statement not covered" >h.become(e),a._visitRemaining(b,l,e);<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>e</span>.visit(h,c,d)}</span>else<span class="cstat-no" title="statement not covered" >--j;<span class="cstat-no" title="statement not covered" >r</span></span></span>eturn 0===j&amp;&amp;h.reject(new RangeError("any(): array must not be empty")),g}<span class="fstat-no" title="function not covered" ></span>function e(b,c){<span class="fstat-no" title="function not covered" ></span>function d(a){<span class="cstat-no" title="statement not covered" ></span>this.resolved||(k.push(a),0===--n&amp;&amp;(l=null,this.resolve(k)))}<span class="fstat-no" title="function not covered" ></span>function e(a){<span class="cstat-no" title="statement not covered" ></span>this.resolved||(l.push(a),0===--f&amp;&amp;(k=null,this.reject(l)))}<span class="cstat-no" title="statement not covered" ></span>var f,g,h,i=a._defer(),j=i._handler,k=[],l=[],m=b.length&gt;&gt;&gt;0,n=0;<span class="cstat-no" title="statement not covered" >f</span>or(h=0;m&gt;h;++h)<span class="cstat-no" title="statement not covered" >g=b[h],(void 0!==g||h in b)&amp;&amp;++n;<span class="cstat-no" title="statement not covered" >f</span></span>or(c=Math.max(c,0),f=n-c+1,n=Math.min(c,n),c&gt;n?j.reject(new RangeError("some(): array must contain at least "+c+" item(s), but had "+n)):0===n&amp;&amp;j.resolve(k),h=0;m&gt;h;++h)<span class="cstat-no" title="statement not covered" >g=b[h],(void 0!==g||h in b)&amp;&amp;a._handler(g).visit(j,d,e,j.notify);<span class="cstat-no" title="statement not covered" >r</span></span>eturn i}<span class="fstat-no" title="function not covered" ></span>function f(b,c){<span class="cstat-no" title="statement not covered" ></span>return a._traverse(c,b)}<span class="fstat-no" title="function not covered" ></span>function g(b,c){<span class="cstat-no" title="statement not covered" ></span>var d=s.call(b);<span class="cstat-no" title="statement not covered" >r</span>eturn a._traverse(c,d).then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return h(d,a)}</span>)}<span class="fstat-no" title="function not covered" ></span>function h(b,c){<span class="cstat-no" title="statement not covered" ></span>for(var d=c.length,e=new Array(d),f=0,g=0;d&gt;f;++f)<span class="cstat-no" title="statement not covered" >c[f]&amp;&amp;(e[g++]=a._handler(b[f]).value);<span class="cstat-no" title="statement not covered" >r</span></span>eturn e.length=g,e}<span class="fstat-no" title="function not covered" ></span>function i(a){<span class="cstat-no" title="statement not covered" ></span>return p(a.map(j))}<span class="fstat-no" title="function not covered" ></span>function j(c){<span class="cstat-no" title="statement not covered" ></span>var d=a._handler(c);<span class="cstat-no" title="statement not covered" >r</span>eturn 0===d.state()?o(c).then(b.fulfilled,b.rejected):(d._unreport(),b.inspect(d))}<span class="fstat-no" title="function not covered" ></span>function k(a,b){<span class="cstat-no" title="statement not covered" ></span>return arguments.length&gt;2?q.call(a,m(b),arguments[2]):q.call(a,m(b))}<span class="fstat-no" title="function not covered" ></span>function l(a,b){<span class="cstat-no" title="statement not covered" ></span>return arguments.length&gt;2?r.call(a,m(b),arguments[2]):r.call(a,m(b))}<span class="fstat-no" title="function not covered" ></span>function m(a){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(b,c,d){<span class="cstat-no" title="statement not covered" ></span>return n(a,void 0,[b,c,d])}</span>}</span>var n=c(a),o=a.resolve,p=a.all,q=Array.prototype.reduce,r=Array.prototype.reduceRight,s=Array.prototype.slice;return a.any=d,a.some=e,a.settle=i,a.map=f,a.filter=g,a.reduce=k,a.reduceRight=l,a.prototype.spread=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.then(p).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return a.apply(this,b)}</span>)}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../apply":64,"../state":77}],66:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(){<span class="cstat-no" title="statement not covered" ></span>throw new TypeError("catch predicate must be a function")}<span class="fstat-no" title="function not covered" ></span>function b(a,b){<span class="cstat-no" title="statement not covered" ></span>return c(b)?a instanceof b:b(a)}<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>return a===Error||null!=a&amp;&amp;a.prototype instanceof Error}<span class="fstat-no" title="function not covered" ></span>function d(a){<span class="cstat-no" title="statement not covered" ></span>return("object"==typeof a||"function"==typeof a)&amp;&amp;null!==a}<span class="fstat-no" title="function not covered" ></span>function e(a){<span class="cstat-no" title="statement not covered" ></span>return a}</span>return function(c){<span class="fstat-no" title="function not covered" >function f(a,c){<span class="cstat-no" title="statement not covered" ></span>return <span class="fstat-no" title="function not covered" >function(d){<span class="cstat-no" title="statement not covered" ></span>return b(d,c)?a.call(this,d):j(d)}</span>}<span class="fstat-no" title="function not covered" ></span>function g(a,b,c,e){<span class="cstat-no" title="statement not covered" ></span>var f=a.call(b);<span class="cstat-no" title="statement not covered" >r</span>eturn d(f)?h(f,c,e):c(e)}<span class="fstat-no" title="function not covered" ></span>function h(a,b,c){<span class="cstat-no" title="statement not covered" ></span>return i(a).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return b(c)}</span>)}</span>var i=c.resolve,j=c.reject,k=c.prototype["catch"];return c.prototype.done=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>this._handler.visit(this._handler.receiver,a,b)}</span>,c.prototype["catch"]=c.prototype.otherwise=function(b){return arguments.length&lt;2?k.call(this,b):<span class="branch-1 cbranch-no" title="branch not covered" >"function"!=typeof b?this.ensure(a):k.call(this,f(arguments[1],b))}</span>,c.prototype["finally"]=c.prototype.ensure=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof a?this:this.then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return g(a,this,e,b)}</span>,<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return g(a,this,j,b)}</span>)}</span>,c.prototype["else"]=c.prototype.orElse=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.then(void 0,<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return a}</span>)}</span>,c.prototype["yield"]=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return a}</span>)}</span>,c.prototype.tap=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.then(a)["yield"](this)}</span>,c}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],67:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.fold=<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>var d=this._beget();<span class="cstat-no" title="statement not covered" >r</span>eturn this._handler.fold(<span class="fstat-no" title="function not covered" >function(c,d,e){<span class="cstat-no" title="statement not covered" ></span>a._handler(c).fold(<span class="fstat-no" title="function not covered" >function(a,c,d){<span class="cstat-no" title="statement not covered" ></span>d.resolve(b.call(this,c,a))}</span>,d,this,e)}</span>,c,d._handler.receiver,d._handler),d}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],68:[function(a,b,c){!function(a){"use strict";a(function(a){var b=a("../state").inspect;return function(a){return a.prototype.inspect=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return b(a._handler(this))}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../state":77}],69:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){<span class="fstat-no" title="function not covered" >function b(a,b,d,e){<span class="cstat-no" title="statement not covered" ></span>return c(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return[b,a(b)]}</span>,b,d,e)}<span class="fstat-no" title="function not covered" ></span>function c(a,b,e,f){<span class="fstat-no" title="function not covered" ></span>function g(f,g){<span class="cstat-no" title="statement not covered" ></span>return d(e(f)).then(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return c(a,b,e,g)}</span>)}<span class="cstat-no" title="statement not covered" ></span>return d(f).then(<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>return d(b(c)).then(<span class="fstat-no" title="function not covered" >function(b){<span class="cstat-no" title="statement not covered" ></span>return b?c:d(a(c)).spread(g)}</span>)}</span>)}</span>var d=a.resolve;return a.iterate=b,a.unfold=c,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],70:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype.progress=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return this.then(void 0,void 0,a)}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],71:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a,b,d,e){<span class="cstat-no" title="statement not covered" ></span>return c.setTimer(<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>a(d,e,b)}</span>,b)}</span>var c=a("../env"),d=a("../TimeoutError");return function(a){<span class="fstat-no" title="function not covered" >function e(a,c,d){<span class="cstat-no" title="statement not covered" ></span>b(f,a,c,d)}<span class="fstat-no" title="function not covered" ></span>function f(a,b){<span class="cstat-no" title="statement not covered" ></span>b.resolve(a)}<span class="fstat-no" title="function not covered" ></span>function g(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var e="undefined"==typeof a?new d("timed out after "+c+"ms"):a;<span class="cstat-no" title="statement not covered" >b</span>.reject(e)}</span>return a.prototype.delay=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this._beget();<span class="cstat-no" title="statement not covered" >r</span>eturn this._handler.fold(e,a,void 0,b._handler),b}</span>,a.prototype.timeout=<span class="fstat-no" title="function not covered" >function(a,d){<span class="cstat-no" title="statement not covered" ></span>var e=this._beget(),f=e._handler,h=b(g,a,d,e._handler);<span class="cstat-no" title="statement not covered" >r</span>eturn this._handler.visit(f,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c.clearTimer(h),this.resolve(a)}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c.clearTimer(h),this.reject(a)}</span>,f.notify),e}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../TimeoutError":63,"../env":74}],72:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a){<span class="cstat-no" title="statement not covered" ></span>throw a}<span class="fstat-no" title="function not covered" ></span>function c(){</span>}var d=a("../env").setTimer,e=a("../format");return function(a){<span class="fstat-no" title="function not covered" >function f(a){<span class="cstat-no" title="statement not covered" ></span>a.handled||(n.push(a),k("Potentially unhandled rejection ["+a.id+"] "+e.formatError(a.value)))}<span class="fstat-no" title="function not covered" ></span>function g(a){<span class="cstat-no" title="statement not covered" ></span>var b=n.indexOf(a);<span class="cstat-no" title="statement not covered" >b</span>&gt;=0&amp;&amp;(n.splice(b,1),l("Handled previous rejection ["+a.id+"] "+e.formatObject(a.value)))}<span class="fstat-no" title="function not covered" ></span>function h(a,b){<span class="cstat-no" title="statement not covered" ></span>m.push(a,b),null===o&amp;&amp;(o=d(i,0))}<span class="fstat-no" title="function not covered" ></span>function i(){<span class="cstat-no" title="statement not covered" ></span>for(o=null;m.length&gt;0;)<span class="cstat-no" title="statement not covered" >m.shift()(m.shift())}</span></span>var j,k=c,l=c;"undefined"!=typeof console&amp;&amp;(j=console,k="undefined"!=typeof j.error?<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>j.error(a)}</span>:<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>j.log(a)}</span>,</span>l="undefined"!=typeof j.info?<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>j.info(a)}</span>:<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>j.log(a)}</span>)</span>,a.onPotentiallyUnhandledRejection=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>h(f,a)}</span>,a.onPotentiallyUnhandledRejectionHandled=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>h(g,a)}</span>,a.onFatalRejection=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>h(b,a.value)}</span>;var m=[],n=[],o=null;return a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"../env":74,"../format":75}],73:[function(a,b,c){!function(a){"use strict";a(function(){return function(a){return a.prototype["with"]=a.prototype.withThis=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b=this._beget(),c=b._handler;<span class="cstat-no" title="statement not covered" >r</span>eturn c.receiver=a,this._handler.chain(c,a),b}</span>,a}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],74:[function(a,b,c){(function(c){!function(a){"use strict";a(function(a){function b(){return"undefined"!=typeof c&amp;&amp;null!==c&amp;&amp;"function"==typeof c.nextTick}<span class="fstat-no" title="function not covered" >function d(){<span class="cstat-no" title="statement not covered" ></span>return"function"==typeof MutationObserver&amp;&amp;MutationObserver||"function"==typeof WebKitMutationObserver&amp;&amp;WebKitMutationObserver}<span class="fstat-no" title="function not covered" ></span>function e(a){<span class="fstat-no" title="function not covered" ></span>function b(){<span class="cstat-no" title="statement not covered" ></span>var a=c;<span class="cstat-no" title="statement not covered" >c</span>=void 0,a()}<span class="cstat-no" title="statement not covered" ></span>var c,d=document.createTextNode(""),e=new a(b);<span class="cstat-no" title="statement not covered" >e</span>.observe(d,{characterData:!0});<span class="cstat-no" title="statement not covered" >v</span>ar f=0;<span class="cstat-no" title="statement not covered" >r</span>eturn <span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>c=a,d.data=f^=1}</span>}</span>var f,g="undefined"!=typeof setTimeout&amp;&amp;setTimeout,h=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return setTimeout(a,b)}</span>,i=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return clearTimeout(a)}</span>,j=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return g(a,0)}</span>;<span class="missing-if-branch" title="else path not taken" >E</span>if(b())j=function(a){return c.nextTick(a)};else <span class="cstat-no" title="statement not covered" >if(f=d())<span class="cstat-no" title="statement not covered" >j=e(f);e</span>lse <span class="cstat-no" title="statement not covered" >if(!g){<span class="cstat-no" title="statement not covered" >var k=a,l=k("vertx");<span class="cstat-no" title="statement not covered" >h</span>=<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>return l.setTimer(b,a)}</span>,i=l.cancelTimer,j=l.runOnLoop||l.runOnContext}</span>r</span></span>eturn{setTimer:h,clearTimer:i,asap:j}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})}).call(this,a("_process"))},{_process:36}],75:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(a){<span class="cstat-no" title="statement not covered" ></span>var c="object"==typeof a&amp;&amp;null!==a&amp;&amp;a.stack?a.stack:b(a);<span class="cstat-no" title="statement not covered" >r</span>eturn a instanceof Error?c:c+" (WARNING: non-Error used)"}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>var b=String(a);<span class="cstat-no" title="statement not covered" >r</span>eturn"[object Object]"===b&amp;&amp;"undefined"!=typeof JSON&amp;&amp;(b=c(a,b)),b}<span class="fstat-no" title="function not covered" ></span>function c(a,b){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >return JSON.stringify(a)}</span>catch(c){<span class="cstat-no" title="statement not covered" >return b}</span>}</span>return{formatError:a,formatObject:b,tryStringify:c}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],76:[function(a,b,c){(function(a){!function(b){"use strict";b(function(){return function(b){function c(a,b){this._handler=a===u?b:d(a)}function d(a){function b(a){e.resolve(a)}function c(a){e.reject(a)}<span class="fstat-no" title="function not covered" >function d(a){<span class="cstat-no" title="statement not covered" ></span>e.notify(a)}</span>var e=new w;try{a(b,c,d)}catch(f){<span class="cstat-no" title="statement not covered" >c(f)}</span>return e}function e(a){return J(a)?a:new c(u,new x(r(a)))}function f(a){return new c(u,new x(new A(a)))}<span class="fstat-no" title="function not covered" >function g(){<span class="cstat-no" title="statement not covered" ></span>return aa}</span>function h(){return new c(u,new w)}function i(a,b){var c=new w(a.receiver,a.join().context);return new b(u,c)}<span class="fstat-no" title="function not covered" >function j(a){<span class="cstat-no" title="statement not covered" ></span>return l(T,null,a)}<span class="fstat-no" title="function not covered" ></span>function k(a,b){<span class="cstat-no" title="statement not covered" ></span>return l(O,a,b)}<span class="fstat-no" title="function not covered" ></span>function l(a,b,d){<span class="fstat-no" title="function not covered" ></span>function e(c,e,g){<span class="cstat-no" title="statement not covered" ></span>g.resolved||m(d,f,c,a(b,e,c),g);</span>
&nbsp;
}<span class="fstat-no" title="function not covered" >function f(a,b,c){<span class="cstat-no" title="statement not covered" ></span>k[a]=b,0===--j&amp;&amp;c.become(new z(k))}<span class="cstat-no" title="statement not covered" ></span>for(var g,h="function"==typeof b?e:f,i=new w,j=d.length&gt;&gt;&gt;0,k=new Array(j),l=0;l&lt;d.length&amp;&amp;!i.resolved;++l)<span class="cstat-no" title="statement not covered" >g=d[l],void 0!==g||l in d?m(d,h,l,g,i):--j;<span class="cstat-no" title="statement not covered" >r</span></span>eturn 0===j&amp;&amp;i.become(new z(k)),new c(u,i)}<span class="fstat-no" title="function not covered" ></span>function m(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>if(K(d)){<span class="cstat-no" title="statement not covered" >var f=s(d),g=f.state();<span class="cstat-no" title="statement not covered" >0</span>===g?f.fold(b,c,void 0,e):g&gt;0?b(c,f.value,e):(e.become(f),n(a,c+1,f))}</span>else <span class="cstat-no" title="statement not covered" >b(c,d,e)}<span class="fstat-no" title="function not covered" ></span></span>function n(a,b,c){<span class="cstat-no" title="statement not covered" ></span>for(var d=b;d&lt;a.length;++d)<span class="cstat-no" title="statement not covered" >o(r(a[d]),c)}<span class="fstat-no" title="function not covered" ></span></span>function o(a,b){<span class="cstat-no" title="statement not covered" ></span>if(a!==b){<span class="cstat-no" title="statement not covered" >var c=a.state();<span class="cstat-no" title="statement not covered" >0</span>===c?a.visit(a,void 0,a._unreport):0&gt;c&amp;&amp;a._unreport()}</span>}<span class="fstat-no" title="function not covered" ></span>function p(a){<span class="cstat-no" title="statement not covered" ></span>return"object"!=typeof a||null===a?f(new TypeError("non-iterable passed to race()")):0===a.length?g():1===a.length?e(a[0]):q(a)}<span class="fstat-no" title="function not covered" ></span>function q(a){<span class="cstat-no" title="statement not covered" ></span>var b,d,e,f=new w;<span class="cstat-no" title="statement not covered" >f</span>or(b=0;b&lt;a.length;++b)<span class="cstat-no" title="statement not covered" >if(d=a[b],void 0!==d||b in a){<span class="cstat-no" title="statement not covered" >if(e=r(d),0!==e.state()){<span class="cstat-no" title="statement not covered" >f.become(e),n(a,b+1,e);<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>e</span>.visit(f,f.resolve,f.reject)}<span class="cstat-no" title="statement not covered" ></span>r</span></span>eturn new c(u,f)}</span>function r(a){return J(a)?a._handler.join():K(a)?t(a):new z(a)}<span class="fstat-no" title="function not covered" >function s(a){<span class="cstat-no" title="statement not covered" ></span>return J(a)?a._handler.join():t(a)}</span>function t(a){try{var b=a.then;return"function"==typeof b?<span class="branch-0 cbranch-no" title="branch not covered" >new y(b,a):</span>new z(a)}catch(c){<span class="cstat-no" title="statement not covered" >return new A(c)}</span>}function u(){}function v(){}function w(a,b){c.createContext(this,b),this.consumers=void 0,this.receiver=a,this.handler=void 0,this.resolved=!1}function x(a){this.handler=a}<span class="fstat-no" title="function not covered" >function y(a,b){<span class="cstat-no" title="statement not covered" ></span>w.call(this),W.enqueue(new G(a,b,this))}</span>function z(a){c.createContext(this),this.value=a}function A(a){c.createContext(this),this.id=++$,this.value=a,this.handled=!1,this.reported=!1,this._report()}function B(a,b){this.rejection=a,this.context=b}function C(a){this.rejection=a}<span class="fstat-no" title="function not covered" >function D(){<span class="cstat-no" title="statement not covered" ></span>return new A(new TypeError("Promise cycle"))}</span>function E(a,b){this.continuation=a,this.handler=b}<span class="fstat-no" title="function not covered" >function F(a,b){<span class="cstat-no" title="statement not covered" ></span>this.handler=b,this.value=a}<span class="fstat-no" title="function not covered" ></span>function G(a,b,c){<span class="cstat-no" title="statement not covered" ></span>this._then=a,this.thenable=b,this.resolver=c}<span class="fstat-no" title="function not covered" ></span>function H(a,b,c,d,e){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >a.call(b,c,d,e)}</span>catch(f){<span class="cstat-no" title="statement not covered" >d(f)}</span>}<span class="fstat-no" title="function not covered" ></span>function I(a,b,c,d){<span class="cstat-no" title="statement not covered" ></span>this.f=a,this.z=b,this.c=c,this.to=d,this.resolver=Z,this.receiver=this}</span>function J(a){return a instanceof c}function K(a){return("object"==typeof a||"function"==typeof a)&amp;&amp;null!==a}function L(a,b,d,e){return"function"!=typeof a?<span class="branch-0 cbranch-no" title="branch not covered" >e.become(b):</span>(c.enterContext(b),P(a,b.value,d,e),void c.exitContext())}function M(a,b,d,e,f){return"function"!=typeof a?<span class="branch-0 cbranch-no" title="branch not covered" >f.become(d):</span>(c.enterContext(d),Q(a,b,d.value,e,f),void c.exitContext())}<span class="fstat-no" title="function not covered" >function N(a,b,d,e,f){<span class="cstat-no" title="statement not covered" ></span>return"function"!=typeof a?f.notify(b):(c.enterContext(d),R(a,b,e,f),void c.exitContext())}<span class="fstat-no" title="function not covered" ></span>function O(a,b,c){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >return a(b,c)}</span>catch(d){<span class="cstat-no" title="statement not covered" >return f(d)}</span>}</span>function P(a,b,c,d){try{d.become(r(a.call(c,b)))}catch(e){<span class="cstat-no" title="statement not covered" >d.become(new A(e))}</span>}function Q(a,b,c,d,e){try{a.call(d,b,c,e)}catch(f){<span class="cstat-no" title="statement not covered" >e.become(new A(f))}</span>}<span class="fstat-no" title="function not covered" >function R(a,b,c,d){<span class="cstat-no" title="statement not covered" ></span>try{<span class="cstat-no" title="statement not covered" >d.notify(a.call(c,b))}</span>catch(e){<span class="cstat-no" title="statement not covered" >d.notify(e)}</span>}</span>function S(a,b){b.prototype=Y(a.prototype),b.prototype.constructor=b}<span class="fstat-no" title="function not covered" >function T(a,b){<span class="cstat-no" title="statement not covered" ></span>return b}</span>function U(){}function V(){return"undefined"!=typeof a&amp;&amp;null!==a&amp;&amp;"function"==typeof a.emit?<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>return"unhandledRejection"===b?a.emit(b,c.value,c):a.emit(b,c)}</span>:<span class="branch-1 cbranch-no" title="branch not covered" >"undefined"!=typeof self&amp;&amp;"function"==typeof CustomEvent?<span class="fstat-no" title="function not covered" >function(a,b,c){<span class="cstat-no" title="statement not covered" ></span>var d=!1;<span class="cstat-no" title="statement not covered" >t</span>ry{<span class="cstat-no" title="statement not covered" >var e=new c("unhandledRejection");<span class="cstat-no" title="statement not covered" >d</span>=e instanceof c}</span>catch(f){}<span class="cstat-no" title="statement not covered" >r</span>eturn d?<span class="fstat-no" title="function not covered" >function(a,d){<span class="cstat-no" title="statement not covered" ></span>var e=new c(a,{detail:{reason:d.value,key:d},bubbles:!1,cancelable:!0});<span class="cstat-no" title="statement not covered" >r</span>eturn!b.dispatchEvent(e)}</span>:a}</span>(U,self,CustomEvent):U}</span>var W=b.scheduler,X=V(),Y=Object.create||<span class="fstat-no" title="function not covered" ><span class="branch-1 cbranch-no" title="branch not covered" >function(a){<span class="fstat-no" title="function not covered" ></span>function b(){</span>}<span class="cstat-no" title="statement not covered" >return b.prototype=a,new b}</span>;</span>c.resolve=e,c.reject=f,c.never=g,c._defer=h,c._handler=r,c.prototype.then=function(a,b,c){var d=this._handler,e=d.join().state();if("function"!=typeof a&amp;&amp;e&gt;0||"function"!=typeof b&amp;&amp;0&gt;e)return new this.constructor(u,d);var f=this._beget(),g=f._handler;return d.chain(g,d.receiver,a,b,c),f},c.prototype["catch"]=function(a){return this.then(void 0,a)},c.prototype._beget=function(){return i(this._handler,this.constructor)},c.all=j,c.race=p,c._traverse=k,c._visitRemaining=n,u.prototype.when=u.prototype.become=u.prototype.notify=u.prototype.fail=u.prototype._unreport=u.prototype._report=U,u.prototype._state=0,u.prototype.state=function(){return this._state},u.prototype.join=function(){for(var a=this;void 0!==a.handler;)a=a.handler;return a},u.prototype.chain=function(a,b,c,d,e){this.when({resolver:a,receiver:b,fulfilled:c,rejected:d,progress:e})},u.prototype.visit=<span class="fstat-no" title="function not covered" >function(a,b,c,d){<span class="cstat-no" title="statement not covered" ></span>this.chain(Z,a,b,c,d)}</span>,u.prototype.fold=<span class="fstat-no" title="function not covered" >function(a,b,c,d){<span class="cstat-no" title="statement not covered" ></span>this.when(new I(a,b,c,d))}</span>,S(u,v),v.prototype.become=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>a.fail()}</span>;var Z=new v;S(u,w),w.prototype._state=0,w.prototype.resolve=function(a){this.become(r(a))},w.prototype.reject=function(a){this.resolved||this.become(new A(a))},w.prototype.join=function(){if(!this.resolved)return this;for(var a=this;void 0!==a.handler;)<span class="missing-if-branch" title="if path not taken" >I</span>if(a=a.handler,a===this)<span class="cstat-no" title="statement not covered" >return this.handler=D();r</span>eturn a},w.prototype.run=function(){var a=this.consumers,b=this.handler;this.handler=this.handler.join(),this.consumers=void 0;for(var c=0;c&lt;a.length;++c)b.when(a[c])},w.prototype.become=function(a){this.resolved||(this.resolved=!0,this.handler=a,void 0!==this.consumers&amp;&amp;W.enqueue(this),void 0!==this.context&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >a._report(this.context))</span>},w.prototype.when=function(a){this.resolved?W.enqueue(new E(a,this.handler)):void 0===this.consumers?this.consumers=[a]:<span class="branch-1 cbranch-no" title="branch not covered" >this.consumers.push(a)}</span>,w.prototype.notify=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.resolved||W.enqueue(new F(a,this))}</span>,w.prototype.fail=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>var b="undefined"==typeof a?this.context:a;<span class="cstat-no" title="statement not covered" >t</span>his.resolved&amp;&amp;this.handler.join().fail(b)}</span>,w.prototype._report=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.resolved&amp;&amp;this.handler.join()._report(a)}</span>,w.prototype._unreport=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.resolved&amp;&amp;this.handler.join()._unreport()}</span>,S(u,x),x.prototype.when=function(a){W.enqueue(new E(a,this))},x.prototype._report=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.join()._report(a)}</span>,x.prototype._unreport=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>this.join()._unreport()}</span>,S(w,y),S(u,z),z.prototype._state=1,z.prototype.fold=function(a,b,c,d){M(a,b,this,c,d)},z.prototype.when=function(a){L(a.fulfilled,this,a.receiver,a.resolver)};var $=0;S(u,A),A.prototype._state=-1,A.prototype.fold=<span class="fstat-no" title="function not covered" >function(a,b,c,d){<span class="cstat-no" title="statement not covered" ></span>d.become(this)}</span>,A.prototype.when=function(a){"function"==typeof a.rejected&amp;&amp;this._unreport(),L(a.rejected,this,a.receiver,a.resolver)},A.prototype._report=function(a){W.afterQueue(new B(this,a))},A.prototype._unreport=function(){this.handled||(this.handled=!0,W.afterQueue(new C(this)))},A.prototype.fail=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.reported=!0,X("unhandledRejection",this),c.onFatalRejection(this,void 0===a?this.context:a)}</span>,B.prototype.run=function(){this.rejection.handled||<span class="branch-1 cbranch-no" title="branch not covered" >this.rejection.reported|</span>|(<span class="branch-2 cbranch-no" title="branch not covered" >this.rejection.reported=!0,X("unhandledRejection",this.rejection)||c.onPotentiallyUnhandledRejection(this.rejection,this.context))</span>},C.prototype.run=function(){this.rejection.reported&amp;&amp;(<span class="branch-1 cbranch-no" title="branch not covered" >X("rejectionHandled",this.rejection)|</span>|<span class="branch-2 cbranch-no" title="branch not covered" >c.onPotentiallyUnhandledRejectionHandled(this.rejection))</span>},c.createContext=c.enterContext=c.exitContext=c.onPotentiallyUnhandledRejection=c.onPotentiallyUnhandledRejectionHandled=c.onFatalRejection=U;var _=new u,aa=new c(u,_);return E.prototype.run=function(){this.handler.join().when(this.continuation)},F.prototype.run=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>var a=this.handler.consumers;<span class="cstat-no" title="statement not covered" >i</span>f(void 0!==a)<span class="cstat-no" title="statement not covered" >for(var b,c=0;c&lt;a.length;++c)<span class="cstat-no" title="statement not covered" >b=a[c],N(b.progress,this.value,this.handler,b.receiver,b.resolver)}</span></span></span>,G.prototype.run=<span class="fstat-no" title="function not covered" >function(){<span class="fstat-no" title="function not covered" ></span>function a(a){<span class="cstat-no" title="statement not covered" ></span>d.resolve(a)}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>d.reject(a)}<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>d.notify(a)}<span class="cstat-no" title="statement not covered" ></span>var d=this.resolver;<span class="cstat-no" title="statement not covered" >H</span>(this._then,this.thenable,a,b,c)}</span>,I.prototype.fulfilled=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.f.call(this.c,this.z,a,this.to)}</span>,I.prototype.rejected=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.to.reject(a)}</span>,I.prototype.progress=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>this.to.notify(a)}</span>,c}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})}).call(this,a("_process"))},{_process:36}],77:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(){<span class="cstat-no" title="statement not covered" ></span>return{state:"pending"}}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>return{state:"rejected",reason:a}}<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>return{state:"fulfilled",value:a}}<span class="fstat-no" title="function not covered" ></span>function d(d){<span class="cstat-no" title="statement not covered" ></span>var e=d.state();<span class="cstat-no" title="statement not covered" >r</span>eturn 0===e?a():e&gt;0?c(d.value):b(d.value)}</span>return{pending:a,fulfilled:c,rejected:b,inspect:d}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(a){b.exports=a()})},{}],78:[function(a,b,c){!function(a){"use strict";a(function(a){function b(a,b,c,d){var e=x.resolve(a);return arguments.length&lt;2?e:e.then(b,c,d)}function c(a){return new x(a)}function d(a){return <span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>for(var b=0,c=arguments.length,d=new Array(c);c&gt;b;++b)<span class="cstat-no" title="statement not covered" >d[b]=arguments[b];<span class="cstat-no" title="statement not covered" >r</span></span>eturn y(a,this,d)}</span>}function e(a){for(var b=0,c=arguments.length-1,d=new Array(c);c&gt;b;++b)d[b]=arguments[b+1];return y(a,this,d)}<span class="fstat-no" title="function not covered" >function f(){<span class="cstat-no" title="statement not covered" ></span>return new g}<span class="fstat-no" title="function not covered" ></span>function g(){<span class="fstat-no" title="function not covered" ></span>function a(a){<span class="cstat-no" title="statement not covered" ></span>d._handler.resolve(a)}<span class="fstat-no" title="function not covered" ></span>function b(a){<span class="cstat-no" title="statement not covered" ></span>d._handler.reject(a)}<span class="fstat-no" title="function not covered" ></span>function c(a){<span class="cstat-no" title="statement not covered" ></span>d._handler.notify(a)}<span class="cstat-no" title="statement not covered" ></span>var d=x._defer();<span class="cstat-no" title="statement not covered" >t</span>his.promise=d,this.resolve=a,this.reject=b,this.notify=c,this.resolver={resolve:a,reject:b,notify:c}}<span class="fstat-no" title="function not covered" ></span>function h(a){<span class="cstat-no" title="statement not covered" ></span>return a&amp;&amp;"function"==typeof a.then}<span class="fstat-no" title="function not covered" ></span>function i(){<span class="cstat-no" title="statement not covered" ></span>return x.all(arguments)}<span class="fstat-no" title="function not covered" ></span>function j(a){<span class="cstat-no" title="statement not covered" ></span>return b(a,x.all)}<span class="fstat-no" title="function not covered" ></span>function k(a){<span class="cstat-no" title="statement not covered" ></span>return b(a,x.settle)}<span class="fstat-no" title="function not covered" ></span>function l(a,c){<span class="cstat-no" title="statement not covered" ></span>return b(a,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return x.map(a,c)}</span>)}<span class="fstat-no" title="function not covered" ></span>function m(a,c){<span class="cstat-no" title="statement not covered" ></span>return b(a,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return x.filter(a,c)}</span>)}</span>var n=a("./lib/decorators/timed"),o=a("./lib/decorators/array"),p=a("./lib/decorators/flow"),q=a("./lib/decorators/fold"),r=a("./lib/decorators/inspect"),s=a("./lib/decorators/iterate"),t=a("./lib/decorators/progress"),u=a("./lib/decorators/with"),v=a("./lib/decorators/unhandledRejection"),w=a("./lib/TimeoutError"),x=[o,p,q,s,t,r,u,n,v].reduce(function(a,b){return b(a)},a("./lib/Promise")),y=a("./lib/apply")(x);return b.promise=c,b.resolve=x.resolve,b.reject=x.reject,b.lift=d,b["try"]=e,b.attempt=e,b.iterate=x.iterate,b.unfold=x.unfold,b.join=i,b.all=j,b.settle=k,b.any=d(x.any),b.some=d(x.some),b.race=d(x.race),b.map=l,b.filter=m,b.reduce=d(x.reduce),b.reduceRight=d(x.reduceRight),b.isPromiseLike=h,b.Promise=x,b.defer=f,b.TimeoutError=w,b})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./lib/Promise":61,"./lib/TimeoutError":63,"./lib/apply":64,"./lib/decorators/array":65,"./lib/decorators/flow":66,"./lib/decorators/fold":67,"./lib/decorators/inspect":68,"./lib/decorators/iterate":69,"./lib/decorators/progress":70,"./lib/decorators/timed":71,"./lib/decorators/unhandledRejection":72,"./lib/decorators/with":73}],79:[function(a,b,c){!function(a){"use strict";a(function(){return{findProperties:<span class="fstat-no" title="function not covered" >function a(b,c,d){<span class="cstat-no" title="statement not covered" ></span>"object"==typeof b&amp;&amp;null!==b&amp;&amp;(c in b&amp;&amp;d(b[c],b,c),Object.keys(b).forEach(<span class="fstat-no" title="function not covered" >function(e){<span class="cstat-no" title="statement not covered" ></span>a(b[e],c,d)}</span>))}</span>}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],80:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a){<span class="cstat-no" title="statement not covered" ></span>var b,d,e,f,g;<span class="cstat-no" title="statement not covered" >r</span>eturn b=c.defer(),d=!1,e=b.resolver,f=b.promise,g=f.then,f.then=<span class="fstat-no" title="function not covered" >function(){<span class="cstat-no" title="statement not covered" ></span>return d||(d=!0,c.attempt(a).then(e.resolve,e.reject)),g.apply(f,arguments)}</span>,f}</span>var c;return c=a("when"),b})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{when:78}],81:[function(a,b,c){!function(a){"use strict";a(function(){function a(a){var c,d,e,f;for(a||(a={}),c=1,d=arguments.length;d&gt;c;c+=1){e=arguments[c];for(f in e)<span class="cstat-no" title="statement not covered" >f in a&amp;&amp;(a[f]===e[f]||f in b&amp;&amp;b[f]===e[f])||(a[f]=e[f])}</span>return a}var b={};return a})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],82:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(a){<span class="cstat-no" title="statement not covered" ></span>return a.toLowerCase().split("-").map(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a.charAt(0).toUpperCase()+a.slice(1)}</span>).join("-")}</span>return a})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],83:[function(a,b,c){!function(a){"use strict";a(function(a){<span class="fstat-no" title="function not covered" >function b(a,b){<span class="cstat-no" title="statement not covered" ></span>return a.then(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return a&amp;&amp;a[b]}</span>,<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return j.reject(a&amp;&amp;a[b])}</span>)}<span class="fstat-no" title="function not covered" ></span>function c(){<span class="cstat-no" title="statement not covered" ></span>return b(this,"entity")}<span class="fstat-no" title="function not covered" ></span>function d(){<span class="cstat-no" title="statement not covered" ></span>return b(b(this,"status"),"code")}<span class="fstat-no" title="function not covered" ></span>function e(){<span class="cstat-no" title="statement not covered" ></span>return b(this,"headers")}<span class="fstat-no" title="function not covered" ></span>function f(a){<span class="cstat-no" title="statement not covered" ></span>return a=k(a),b(this.headers(),a)}<span class="fstat-no" title="function not covered" ></span>function g(a){<span class="cstat-no" title="statement not covered" ></span>return a=[].concat(a),h(j.reduce(a,<span class="fstat-no" title="function not covered" >function(a,b){<span class="cstat-no" title="statement not covered" ></span>if("string"==typeof b&amp;&amp;(b={rel:b}),"function"!=typeof a.entity.clientFor)<span class="cstat-no" title="statement not covered" >throw new Error("Hypermedia response expected");<span class="cstat-no" title="statement not covered" >v</span></span>ar c=a.entity.clientFor(b.rel);<span class="cstat-no" title="statement not covered" >r</span>eturn c({params:b.params})}</span>,this))}</span>function h(a){return a.status=d,a.headers=e,a.header=f,a.entity=c,a.follow=g,a}function i(){return h(j.apply(j,arguments))}var j=a("when"),k=a("./normalizeHeaderName");return i.make=h,i.reject=<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>return h(j.reject(a))}</span>,i.promise=function(a){return h(j.promise(a))},i})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./normalizeHeaderName":82,when:78}],84:[function(a,b,c){!function(a){"use strict";a(function(){<span class="fstat-no" title="function not covered" >function a(a,b){<span class="cstat-no" title="statement not covered" ></span>if("string"!=typeof a)<span class="cstat-no" title="statement not covered" >throw new Error("String required for URL encoding");<span class="cstat-no" title="statement not covered" >r</span></span>eturn a.split("").map(<span class="fstat-no" title="function not covered" >function(a){<span class="cstat-no" title="statement not covered" ></span>if(b.hasOwnProperty(a))<span class="cstat-no" title="statement not covered" >return a;<span class="cstat-no" title="statement not covered" >v</span></span>ar c=a.charCodeAt(0);<span class="cstat-no" title="statement not covered" >r</span>eturn 127&gt;=c?"%"+c.toString(16).toUpperCase():encodeURIComponent(a).toUpperCase()}</span>).join("")}</span>function b(b){return b=b||d.unreserved,<span class="fstat-no" title="function not covered" >function(c){<span class="cstat-no" title="statement not covered" ></span>return a(c,b)}</span>}<span class="fstat-no" title="function not covered" >function c(a){<span class="cstat-no" title="statement not covered" ></span>return decodeURIComponent(a)}</span>var d;return d=function(){var a={alpha:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",digit:"0123456789"};return a.genDelims=":/?#[]@",a.subDelims="!$&amp;'()*+,;=",a.reserved=a.genDelims+a.subDelims,a.unreserved=a.alpha+a.digit+"-._~",a.url=a.reserved+a.unreserved,a.scheme=a.alpha+a.digit+"+-.",a.userinfo=a.unreserved+a.subDelims+":",a.host=a.unreserved+a.subDelims,a.port=a.digit,a.pchar=a.unreserved+a.subDelims+":@",a.segment=a.pchar,a.path=a.segment+"/",a.query=a.pchar+"/?",a.fragment=a.pchar+"/?",Object.keys(a).reduce(function(b,c){return b[c]=a[c].split("").reduce(function(a,b){return a[b]=!0,a},{}),b},{})}(),{decode:c,encode:b(),encodeURL:b(d.url),encodeScheme:b(d.scheme),encodeUserInfo:b(d.userinfo),encodeHost:b(d.host),encodePort:b(d.port),encodePathSegment:b(d.segment),encodePath:b(d.path),encodeQuery:b(d.query),encodeFragment:b(d.fragment)}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{}],85:[function(a,b,c){!function(a){"use strict";var b;a(function(a){<span class="fstat-no" title="function not covered" >function c(a,c,d){<span class="cstat-no" title="statement not covered" ></span>return c.split(",").reduce(<span class="fstat-no" title="function not covered" >function(c,e){<span class="cstat-no" title="statement not covered" ></span>var g,i;<span class="cstat-no" title="statement not covered" >i</span>f(g={},"*"===e.slice(-1)&amp;&amp;(e=e.slice(0,-1),g.explode=!0),h.test(e)){<span class="cstat-no" title="statement not covered" >var j=h.exec(e);<span class="cstat-no" title="statement not covered" >e</span>=j[1],g.maxLength=parseInt(j[2])}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn e=f.decode(e),i=d[e],i===b||null===i?c:("string"==typeof i?(g.maxLength&amp;&amp;(i=i.slice(0,g.maxLength)),c+=c.length?a.separator:a.first,a.named&amp;&amp;(c+=a.encoder(e),c+=i.length?"=":a.empty),c+=a.encoder(i)):c+=Array.isArray(i)?i.reduce(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>return b.length?(b+=g.explode?a.separator:",",a.named&amp;&amp;g.explode&amp;&amp;(b+=a.encoder(e),b+=c.length?"=":a.empty)):(b+=a.first,a.named&amp;&amp;(b+=a.encoder(e),b+=c.length?"=":a.empty)),b+=a.encoder(c)}</span>,""):Object.keys(i).reduce(<span class="fstat-no" title="function not covered" >function(b,c){<span class="cstat-no" title="statement not covered" ></span>return b.length?b+=g.explode?a.separator:",":(b+=a.first,a.named&amp;&amp;!g.explode&amp;&amp;(b+=a.encoder(e),b+=i[c].length?"=":a.empty)),b+=a.encoder(c),b+=g.explode?"=":",",b+=a.encoder(i[c])}</span>,""),c)}</span>,"")}<span class="fstat-no" title="function not covered" ></span>function d(a,b){<span class="cstat-no" title="statement not covered" ></span>var d;<span class="cstat-no" title="statement not covered" >i</span>f(d=g[a.slice(0,1)],d?a=a.slice(1):d=g[""],d.reserved)<span class="cstat-no" title="statement not covered" >throw new Error("Reserved expression operations are not supported");<span class="cstat-no" title="statement not covered" >r</span></span>eturn c(d,a,b)}<span class="fstat-no" title="function not covered" ></span>function e(a,b){<span class="cstat-no" title="statement not covered" ></span>var c,e,f;<span class="cstat-no" title="statement not covered" >f</span>or(f="",e=0;;){<span class="cstat-no" title="statement not covered" >if(c=a.indexOf("{",e),-1===c){<span class="cstat-no" title="statement not covered" >f+=a.slice(e);<span class="cstat-no" title="statement not covered" >b</span>reak}<span class="cstat-no" title="statement not covered" ></span>f</span>+=a.slice(e,c),e=a.indexOf("}",c)+1,f+=d(a.slice(c+1,e-1),b)}<span class="cstat-no" title="statement not covered" ></span>r</span>eturn f}</span>var f,g,h;return f=a("./uriEncoder"),h=/^([^:]*):([0-9]+)$/,g={"":{first:"",separator:",",named:!1,empty:"",encoder:f.encode},"+":{first:"",separator:",",named:!1,empty:"",encoder:f.encodeURL},"#":{first:"#",separator:",",named:!1,empty:"",encoder:f.encodeURL},".":{first:".",separator:".",named:!1,empty:"",encoder:f.encode},"/":{first:"/",separator:"/",named:!1,empty:"",encoder:f.encode},";":{first:";",separator:";",named:!0,empty:"",encoder:f.encode},"?":{first:"?",separator:"&amp;",named:!0,empty:"=",encoder:f.encode},"&amp;":{first:"&amp;",separator:"&amp;",named:!0,empty:"=",encoder:f.encode},"=":{reserved:!0},",":{reserved:!0},"!":{reserved:!0},"@":{reserved:!0},"|":{reserved:!0}},{expand:e}})}("function"==typeof define&amp;&amp;<span class="branch-1 cbranch-no" title="branch not covered" >define.amd?<span class="branch-0 cbranch-no" title="branch not covered" ></span>define:</span>function(c){b.exports=c(a)})},{"./uriEncoder":84}]},{},[1]);</pre></td></tr>
</table></pre>

</div>
<div class="footer">
    <div class="meta">Generated by <a href="http://istanbul-js.org/" target="_blank">istanbul</a> at Thu Jul 16 2015 10:34:25 GMT+0100 (BST)</div>
</div>
<script src="../prettify.js"></script>
<script>
window.onload = function () {
        if (typeof prettyPrint === 'function') {
            prettyPrint();
        }
};
</script>
<script src="../sorter.js"></script>
</body>
</html>
